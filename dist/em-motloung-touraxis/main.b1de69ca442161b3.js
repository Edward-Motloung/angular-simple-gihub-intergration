"use strict";var Bfe=Object.defineProperty,Ufe=Object.defineProperties,Vfe=Object.getOwnPropertyDescriptors,oU=Object.getOwnPropertySymbols,Hfe=Object.prototype.hasOwnProperty,zfe=Object.prototype.propertyIsEnumerable,aU=(et,zn,yi)=>zn in et?Bfe(et,zn,{enumerable:!0,configurable:!0,writable:!0,value:yi}):et[zn]=yi,_E=(et,zn)=>{for(var yi in zn||(zn={}))Hfe.call(zn,yi)&&aU(et,yi,zn[yi]);if(oU)for(var yi of oU(zn))zfe.call(zn,yi)&&aU(et,yi,zn[yi]);return et},yE=(et,zn)=>Ufe(et,Vfe(zn));(self.webpackChunkem_motloung_touraxis=self.webpackChunkem_motloung_touraxis||[]).push([[179],{590:()=>{function et(n){return"function"==typeof n}function zn(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const yi=zn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,s)=>`${s+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function xl(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Oi{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const r of t)r.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(et(i))try{i()}catch(r){e=r instanceof yi?r.errors:[r]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const r of s)try{xE(r)}catch(o){e=null!=e?e:[],o instanceof yi?e=[...e,...o.errors]:e.push(o)}}if(e)throw new yi(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xE(e);else{if(e instanceof Oi){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xl(t,e)}remove(e){const{_finalizers:t}=this;t&&xl(t,e),e instanceof Oi&&e._removeParent(this)}}Oi.EMPTY=(()=>{const n=new Oi;return n.closed=!0,n})();const vE=Oi.EMPTY;function bE(n){return n instanceof Oi||n&&"closed"in n&&et(n.remove)&&et(n.add)&&et(n.unsubscribe)}function xE(n){et(n)?n():n.unsubscribe()}const sa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},rf={setTimeout(n,e,...t){const{delegate:i}=rf;return(null==i?void 0:i.setTimeout)?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=rf;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function ME(n){rf.setTimeout(()=>{const{onUnhandledError:e}=sa;if(!e)throw n;e(n)})}function wE(){}const lU=C_("C",void 0,void 0);function C_(n,e,t){return{kind:n,value:e,error:t}}let ra=null;function of(n){if(sa.useDeprecatedSynchronousErrorHandling){const e=!ra;if(e&&(ra={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=ra;if(ra=null,t)throw i}}else n()}class D_ extends Oi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bE(e)&&e.add(this)):this.destination=mU}static create(e,t,i){return new Au(e,t,i)}next(e){this.isStopped?I_(function uU(n){return C_("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?I_(function cU(n){return C_("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?I_(lU,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dU=Function.prototype.bind;function R_(n,e){return dU.call(n,e)}class fU{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){af(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){af(i)}else af(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){af(t)}}}class Au extends D_{constructor(e,t,i){let s;if(super(),et(e)||!e)s={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=i?i:void 0};else{let r;this&&sa.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&R_(e.next,r),error:e.error&&R_(e.error,r),complete:e.complete&&R_(e.complete,r)}):s=e}this.destination=new fU(s)}}function af(n){sa.useDeprecatedSynchronousErrorHandling?function hU(n){sa.useDeprecatedSynchronousErrorHandling&&ra&&(ra.errorThrown=!0,ra.error=n)}(n):ME(n)}function I_(n,e){const{onStoppedNotification:t}=sa;t&&rf.setTimeout(()=>t(n,e))}const mU={closed:!0,next:wE,error:function pU(n){throw n},complete:wE},P_="function"==typeof Symbol&&Symbol.observable||"@@observable";function go(n){return n}let ln=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,s){const r=function _U(n){return n&&n instanceof D_||function gU(n){return n&&et(n.next)&&et(n.error)&&et(n.complete)}(n)&&bE(n)}(t)?t:new Au(t,i,s);return of(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=SE(i))((s,r)=>{const o=new Au({next:a=>{try{t(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[P_](){return this}pipe(...t){return function EE(n){return 0===n.length?go:1===n.length?n[0]:function(t){return n.reduce((i,s)=>s(i),t)}}(t)(this)}toPromise(t){return new(t=SE(t))((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return n.create=e=>new n(e),n})();function SE(n){var e;return null!==(e=null!=n?n:sa.Promise)&&void 0!==e?e:Promise}const yU=zn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let sr=(()=>{class n extends ln{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new AE(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new yU}next(t){of(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){of(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){of(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:s,observers:r}=this;return i||s?vE:(this.currentObservers=null,r.push(t),new Oi(()=>{this.currentObservers=null,xl(r,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:s,isStopped:r}=this;i?t.error(s):r&&t.complete()}asObservable(){const t=new ln;return t.source=this,t}}return n.create=(e,t)=>new AE(e,t),n})();class AE extends sr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:vE}}function TE(n){return et(null==n?void 0:n.lift)}function Gn(n){return e=>{if(TE(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function In(n,e,t,i,s){return new vU(n,e,t,i,s)}class vU extends D_{constructor(e,t,i,s,r,o){super(e),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function It(n,e){return Gn((t,i)=>{let s=0;t.subscribe(In(i,r=>{i.next(n.call(e,r,s++))}))})}function _o(n){return this instanceof _o?(this.v=n,this):new _o(n)}function RE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=t.apply(n,e||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){i[d]&&(s[d]=function(f){return new Promise(function(p,g){r.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{!function l(d){d.value instanceof _o?Promise.resolve(d.value.v).then(c,u):h(r[0][2],d)}(i[d](f))}catch(p){h(r[0][3],p)}}function c(d){a("next",d)}function u(d){a("throw",d)}function h(d,f){d(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}function IE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function F_(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){!function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}(a,l,(o=n[r](o)).done,o.value)})}}}const k_=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function PE(n){return et(null==n?void 0:n.then)}function LE(n){return et(n[P_])}function OE(n){return Symbol.asyncIterator&&et(null==n?void 0:n[Symbol.asyncIterator])}function NE(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const FE=function BU(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kE(n){return et(null==n?void 0:n[FE])}function BE(n){return RE(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:s}=yield _o(t.read());if(s)return yield _o(void 0);yield yield _o(i)}}finally{t.releaseLock()}})}function UE(n){return et(null==n?void 0:n.getReader)}function ls(n){if(n instanceof ln)return n;if(null!=n){if(LE(n))return function UU(n){return new ln(e=>{const t=n[P_]();if(et(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(k_(n))return function VU(n){return new ln(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(PE(n))return function HU(n){return new ln(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ME)})}(n);if(OE(n))return VE(n);if(kE(n))return function zU(n){return new ln(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(UE(n))return function GU(n){return VE(BE(n))}(n)}throw NE(n)}function VE(n){return new ln(e=>{(function WU(n,e){var t,i,s,r;return function CE(n,e,t,i){return new(t||(t=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?r(u.value):function s(r){return r instanceof t?r:new t(function(o){o(r)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=IE(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(s)throw s.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Or(n,e,t,i=0,s=!1){const r=e.schedule(function(){t(),s?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!s)return r}function Pn(n,e,t=1/0){return et(e)?Pn((i,s)=>It((r,o)=>e(i,r,s,o))(ls(n(i,s))),t):("number"==typeof e&&(t=e),Gn((i,s)=>function jU(n,e,t,i,s,r,o,a){const l=[];let c=0,u=0,h=!1;const d=()=>{h&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{r&&e.next(g),c++;let _=!1;ls(t(g,u++)).subscribe(In(e,m=>{null==s||s(m),r?f(m):e.next(m)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<i;){const m=l.shift();o?Or(e,o,()=>p(m)):p(m)}d()}catch(m){e.error(m)}}))};return n.subscribe(In(e,f,()=>{h=!0,d()})),()=>{null==a||a()}}(i,s,n,t)))}function Tu(n=1/0){return Pn(go,n)}const Nr=new ln(n=>n.complete());function B_(n){return n[n.length-1]}function HE(n){return et(B_(n))?n.pop():void 0}function Cu(n){return function qU(n){return n&&et(n.schedule)}(B_(n))?n.pop():void 0}function zE(n,e=0){return Gn((t,i)=>{t.subscribe(In(i,s=>Or(i,n,()=>i.next(s),e),()=>Or(i,n,()=>i.complete(),e),s=>Or(i,n,()=>i.error(s),e)))})}function GE(n,e=0){return Gn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function WE(n,e){if(!n)throw new Error("Iterable cannot be null");return new ln(t=>{Or(t,e,()=>{const i=n[Symbol.asyncIterator]();Or(t,e,()=>{i.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function Kn(n,e){return e?function eV(n,e){if(null!=n){if(LE(n))return function YU(n,e){return ls(n).pipe(GE(e),zE(e))}(n,e);if(k_(n))return function ZU(n,e){return new ln(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(PE(n))return function KU(n,e){return ls(n).pipe(GE(e),zE(e))}(n,e);if(OE(n))return WE(n,e);if(kE(n))return function JU(n,e){return new ln(t=>{let i;return Or(t,e,()=>{i=n[FE](),Or(t,e,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){return void t.error(o)}r?t.complete():t.next(s)},0,!0)}),()=>et(null==i?void 0:i.return)&&i.return()})}(n,e);if(UE(n))return function QU(n,e){return WE(BE(n),e)}(n,e)}throw NE(n)}(n,e):ls(n)}function jE(...n){const e=Cu(n),t=function XU(n,e){return"number"==typeof B_(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?ls(i[0]):Tu(t)(Kn(i,e)):Nr}function U_(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Au({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function Ut(n){for(let e in n)if(n[e]===Ut)return e;throw Error("Could not find renamed property on target object.")}function V_(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Pt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Pt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function H_(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const nV=Ut({__forward_ref__:Ut});function Gt(n){return n.__forward_ref__=Gt,n.toString=function(){return Pt(this())},n}function st(n){return $E(n)?n():n}function $E(n){return"function"==typeof n&&n.hasOwnProperty(nV)&&n.__forward_ref__===Gt}class Ae extends Error{constructor(e,t){super(function z_(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ke(n){return"string"==typeof n?n:null==n?"":String(n)}function vi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ke(n)}function lf(n,e){const t=e?` in ${e}`:"";throw new Ae(-201,`No provider for ${vi(n)} found${t}`)}function Wi(n,e){null==n&&function Yt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zn(n){return{providers:n.providers||[],imports:n.imports||[]}}function G_(n){return qE(n,cf)||qE(n,YE)}function qE(n,e){return n.hasOwnProperty(e)?n[e]:null}function XE(n){return n&&(n.hasOwnProperty(W_)||n.hasOwnProperty(cV))?n[W_]:null}const cf=Ut({\u0275prov:Ut}),W_=Ut({\u0275inj:Ut}),YE=Ut({ngInjectableDef:Ut}),cV=Ut({ngInjectorDef:Ut});var $e=(()=>(($e=$e||{})[$e.Default=0]="Default",$e[$e.Host=1]="Host",$e[$e.Self=2]="Self",$e[$e.SkipSelf=4]="SkipSelf",$e[$e.Optional=8]="Optional",$e))();let j_;function yo(n){const e=j_;return j_=n,e}function KE(n,e,t){const i=G_(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&$e.Optional?null:void 0!==e?e:void lf(Pt(n),"Injector")}function vo(n){return{toString:n}.toString()}var Is=(()=>((Is=Is||{})[Is.OnPush=0]="OnPush",Is[Is.Default=1]="Default",Is))(),Ps=(()=>{return(n=Ps||(Ps={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ps;var n})();const hV="undefined"!=typeof globalThis&&globalThis,dV="undefined"!=typeof window&&window,fV="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt=hV||"undefined"!=typeof global&&global||dV||fV,Ml={},Vt=[],uf=Ut({\u0275cmp:Ut}),$_=Ut({\u0275dir:Ut}),q_=Ut({\u0275pipe:Ut}),ZE=Ut({\u0275mod:Ut}),kr=Ut({\u0275fac:Ut}),Du=Ut({__NG_ELEMENT_ID__:Ut});let pV=0;function Ls(n){return vo(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Is.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Vt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ps.Emulated,id:"c",styles:n.styles||Vt,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.directives,r=n.features,o=n.pipes;return i.id+=pV++,i.inputs=tS(n.inputs,t),i.outputs=tS(n.outputs),r&&r.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(JE):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(QE):null,i})}function JE(n){return ni(n)||function bo(n){return n[$_]||null}(n)}function QE(n){return function oa(n){return n[q_]||null}(n)}const eS={};function ti(n){return vo(()=>{const e={type:n.type,bootstrap:n.bootstrap||Vt,declarations:n.declarations||Vt,imports:n.imports||Vt,exports:n.exports||Vt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(eS[n.id]=n.type),e})}function tS(n,e){if(null==n)return Ml;const t={};for(const i in n)if(n.hasOwnProperty(i)){let s=n[i],r=s;Array.isArray(s)&&(r=s[1],s=s[0]),t[s]=i,e&&(e[s]=r)}return t}const ze=Ls;function bi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function ni(n){return n[uf]||null}function cs(n,e){const t=n[ZE]||null;if(!t&&!0===e)throw new Error(`Type ${Pt(n)} does not have '\u0275mod' property.`);return t}function rr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ns(n){return Array.isArray(n)&&!0===n[1]}function K_(n){return 0!=(8&n.flags)}function pf(n){return 2==(2&n.flags)}function mf(n){return 1==(1&n.flags)}function Fs(n){return null!==n.template}function bV(n){return 0!=(512&n[2])}function ua(n,e){return n.hasOwnProperty(kr)?n[kr]:null}class wV{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Fi(){return iS}function iS(n){return n.type.prototype.ngOnChanges&&(n.setInput=SV),EV}function EV(){const n=rS(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Ml)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function SV(n,e,t,i){const s=rS(n)||function AV(n,e){return n[sS]=e}(n,{previous:Ml,current:null}),r=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[t],l=o[a];r[a]=new wV(l&&l.currentValue,e,o===Ml),n[i]=e}Fi.ngInherit=!0;const sS="__ngSimpleChanges__";function rS(n){return n[sS]||null}let ty;function ny(){return void 0!==ty?ty:"undefined"!=typeof document?document:void 0}function cn(n){return!!n.listen}const oS={createRenderer:(n,e)=>ny()};function En(n){for(;Array.isArray(n);)n=n[0];return n}function gf(n,e){return En(e[n])}function ds(n,e){return En(e[n.index])}function iy(n,e){return n.data[e]}function Tl(n,e){return n[e]}function $i(n,e){const t=e[n];return rr(t)?t:t[0]}function aS(n){return 4==(4&n[2])}function sy(n){return 128==(128&n[2])}function xo(n,e){return null==e?null:n[e]}function lS(n){n[18]=0}function ry(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const je={lFrame:gS(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function cS(){return je.bindingsEnabled}function ie(){return je.lFrame.lView}function At(){return je.lFrame.tView}function Br(n){return je.lFrame.contextLView=n,n[8]}function Ln(){let n=uS();for(;null!==n&&64===n.type;)n=n.parent;return n}function uS(){return je.lFrame.currentTNode}function or(n,e){const t=je.lFrame;t.currentTNode=n,t.isParent=e}function oy(){return je.lFrame.isParent}function ay(){je.lFrame.isParent=!1}function _f(){return je.isInCheckNoChangesMode}function yf(n){je.isInCheckNoChangesMode=n}function xi(){const n=je.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Cl(){return je.lFrame.bindingIndex++}function Vr(n){const e=je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function GV(n,e){const t=je.lFrame;t.bindingIndex=t.bindingRootIndex=n,ly(e)}function ly(n){je.lFrame.currentDirectiveIndex=n}function fS(){return je.lFrame.currentQueryIndex}function uy(n){je.lFrame.currentQueryIndex=n}function jV(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function pS(n,e,t){if(t&$e.SkipSelf){let s=e,r=n;for(;!(s=s.parent,null!==s||t&$e.Host||(s=jV(r),null===s||(r=r[15],10&s.type))););if(null===s)return!1;e=s,n=r}const i=je.lFrame=mS();return i.currentTNode=e,i.lView=n,!0}function vf(n){const e=mS(),t=n[1];je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mS(){const n=je.lFrame,e=null===n?null:n.child;return null===e?gS(n):e}function gS(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function _S(){const n=je.lFrame;return je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const yS=_S;function bf(){const n=_S();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Mi(){return je.lFrame.selectedIndex}function Mo(n){je.lFrame.selectedIndex=n}function un(){const n=je.lFrame;return iy(n.tView,n.selectedIndex)}function xf(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const r=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Mf(n,e,t){vS(n,e,3,t)}function wf(n,e,t,i){(3&n[2])===t&&vS(n,e,t,i)}function hy(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function vS(n,e,t,i){const r=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<r||-1==r)&&(e3(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function e3(n,e,t,i){const s=t[i]<0,r=t[i+1],a=n[s?-t[i]:t[i]];if(s){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{r.call(a)}finally{}}}else try{r.call(a)}finally{}}class Ou{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Ef(n,e,t){const i=cn(n);let s=0;for(;s<t.length;){const r=t[s];if("number"==typeof r){if(0!==r)break;s++;const o=t[s++],a=t[s++],l=t[s++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=r,a=t[++s];fy(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),s++}}return s}function bS(n){return 3===n||4===n||6===n}function fy(n){return 64===n.charCodeAt(0)}function Sf(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?t=s:0===t||xS(n,t,s,null,-1===t||2===t?e[++i]:null)}}return n}function xS(n,e,t,i,s){let r=0,o=n.length;if(-1===e)o=-1;else for(;r<n.length;){const a=n[r++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=r-1;break}}}for(;r<n.length;){const a=n[r];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==s&&(n[r+1]=s));if(i===n[r+1])return void(n[r+2]=s)}r++,null!==i&&r++,null!==s&&r++}-1!==o&&(n.splice(o,0,e),r=o+1),n.splice(r++,0,t),null!==i&&n.splice(r++,0,i),null!==s&&n.splice(r++,0,s)}function MS(n){return-1!==n}function Dl(n){return 32767&n}function Rl(n,e){let t=function r3(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let py=!0;function Af(n){const e=py;return py=n,e}let o3=0;function Fu(n,e){const t=gy(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,my(i.data,n),my(e,null),my(i.blueprint,null));const s=Tf(n,e),r=n.injectorIndex;if(MS(s)){const o=Dl(s),a=Rl(s,e),l=a[1].data;for(let c=0;c<8;c++)e[r+c]=a[o+c]|l[o+c]}return e[r+8]=s,r}function my(n,e){n.push(0,0,0,0,0,0,0,0,e)}function gy(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Tf(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,s=e;for(;null!==s;){const r=s[1],o=r.type;if(i=2===o?r.declTNode:1===o?s[6]:null,null===i)return-1;if(t++,s=s[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Cf(n,e,t){!function a3(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Du)&&(i=t[Du]),null==i&&(i=t[Du]=o3++);const s=255&i;e.data[n+(s>>5)]|=1<<s}(n,e,t)}function SS(n,e,t){if(t&$e.Optional)return n;lf(e,"NodeInjector")}function AS(n,e,t,i){if(t&$e.Optional&&void 0===i&&(i=null),0==(t&($e.Self|$e.Host))){const s=n[9],r=yo(void 0);try{return s?s.get(e,i,t&$e.Optional):KE(e,i,t&$e.Optional)}finally{yo(r)}}return SS(i,e,t)}function TS(n,e,t,i=$e.Default,s){if(null!==n){const r=function h3(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Du)?n[Du]:void 0;return"number"==typeof e?e>=0?255&e:c3:e}(t);if("function"==typeof r){if(!pS(e,n,i))return i&$e.Host?SS(s,t,i):AS(e,t,i,s);try{const o=r(i);if(null!=o||i&$e.Optional)return o;lf(t)}finally{yS()}}else if("number"==typeof r){let o=null,a=gy(n,e),l=-1,c=i&$e.Host?e[16][6]:null;for((-1===a||i&$e.SkipSelf)&&(l=-1===a?Tf(n,e):e[a+8],-1!==l&&RS(i,!1)?(o=e[1],a=Dl(l),e=Rl(l,e)):a=-1);-1!==a;){const u=e[1];if(DS(r,a,u.data)){const h=u3(a,e,t,o,i,c);if(h!==CS)return h}l=e[a+8],-1!==l&&RS(i,e[1].data[a+8]===c)&&DS(r,a,e)?(o=u,a=Dl(l),e=Rl(l,e)):a=-1}}}return AS(e,t,i,s)}const CS={};function c3(){return new Il(Ln(),ie())}function u3(n,e,t,i,s,r){const o=e[1],a=o.data[n+8],u=Df(a,o,t,null==i?pf(a)&&py:i!=o&&0!=(3&a.type),s&$e.Host&&r===a);return null!==u?ku(e,o,u,a):CS}function Df(n,e,t,i,s){const r=n.providerIndexes,o=e.data,a=1048575&r,l=n.directiveStart,u=r>>20,d=s?a+u:n.directiveEnd;for(let f=i?a:a+u;f<d;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(s){const f=o[l];if(f&&Fs(f)&&f.type===t)return l}return null}function ku(n,e,t,i){let s=n[t];const r=e.data;if(function t3(n){return n instanceof Ou}(s)){const o=s;o.resolving&&function iV(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${n}${t}`)}(vi(r[t]));const a=Af(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?yo(o.injectImpl):null;pS(n,i,$e.Default);try{s=n[t]=o.factory(void 0,r,n,i),e.firstCreatePass&&t>=i.directiveStart&&function QV(n,e,t){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=e.type.prototype;if(i){const o=iS(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}s&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,s),r&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,r),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,r))}(t,r[t],e)}finally{null!==l&&yo(l),Af(a),o.resolving=!1,yS()}}return s}function DS(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function RS(n,e){return!(n&$e.Self||n&$e.Host&&e)}class Il{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return TS(this._tNode,this._lView,e,i,t)}}function _y(n){return $E(n)?()=>{const e=_y(st(n));return e&&e()}:ua(n)}const Ll="__parameters__";function Nl(n,e,t){return vo(()=>{const i=function yy(n){return function(...t){if(n){const i=n(...t);for(const s in i)this[s]=i[s]}}}(e);function s(...r){if(this instanceof s)return i.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(Ll)?l[Ll]:Object.defineProperty(l,Ll,{value:[]})[Ll];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}class nt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const f3=new nt("AnalyzeForEntryComponents");function fs(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),fs(i,e)):e!==n&&e.push(i)}return e}function ar(n,e){n.forEach(t=>Array.isArray(t)?ar(t,e):e(t))}function PS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Hu(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function qi(n,e,t){let i=Fl(n,e);return i>=0?n[1|i]=t:(i=~i,function g3(n,e,t,i){let s=n.length;if(s==e)n.push(t,i);else if(1===s)n.push(i,n[0]),n[0]=t;else{for(s--,n.push(n[s-1],n[s]);s>e;)n[s]=n[s-2],s--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function by(n,e){const t=Fl(n,e);if(t>=0)return n[1|t]}function Fl(n,e){return function NS(n,e,t){let i=0,s=n.length>>t;for(;s!==i;){const r=i+(s-i>>1),o=n[r<<t];if(e===o)return r<<t;o>e?s=r:i=r+1}return~(s<<t)}(n,e,1)}const zu={},My="__NG_DI_FLAG__",Pf="ngTempTokenPath",w3=/\n/gm,kS="__source",S3=Ut({provide:String,useValue:Ut});let Gu;function BS(n){const e=Gu;return Gu=n,e}function A3(n,e=$e.Default){if(void 0===Gu)throw new Ae(203,"");return null===Gu?KE(n,void 0,e):Gu.get(n,e&$e.Optional?null:void 0,e)}function pe(n,e=$e.Default){return(function uV(){return j_}()||A3)(st(n),e)}const T3=pe;function wy(n){const e=[];for(let t=0;t<n.length;t++){const i=st(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Ae(900,"");let s,r=$e.Default;for(let o=0;o<i.length;o++){const a=i[o],l=C3(a);"number"==typeof l?-1===l?s=a.token:r|=l:s=a}e.push(pe(s,r))}else e.push(pe(i))}return e}function Wu(n,e){return n[My]=e,n.prototype[My]=e,n}function C3(n){return n[My]}const Lf=Wu(Nl("Inject",n=>({token:n})),-1),Eo=Wu(Nl("Optional"),8),ju=Wu(Nl("SkipSelf"),4);let Nf,Ff;function Bl(n){var e;return(null===(e=function Sy(){if(void 0===Nf&&(Nf=null,Nt.trustedTypes))try{Nf=Nt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Nf}())||void 0===e?void 0:e.createHTML(n))||n}function WS(n){var e;return(null===(e=function Ay(){if(void 0===Ff&&(Ff=null,Nt.trustedTypes))try{Ff=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ff}())||void 0===e?void 0:e.createHTML(n))||n}class qS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function So(n){return n instanceof qS?n.changingThisBreaksApplicationSecurity:n}function qu(n,e){const t=function $3(n){return n instanceof qS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class q3{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Bl(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class X3{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Bl(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Bl(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let s=t.length-1;0<s;s--){const o=t.item(s).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const K3=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Z3=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function kf(n){return(n=String(n)).match(K3)||n.match(Z3)?n:"unsafe:"+n}function YS(n){return(n=String(n)).split(",").map(e=>kf(e.trim())).join(", ")}function lr(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Xu(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const KS=lr("area,br,col,hr,img,wbr"),ZS=lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),JS=lr("rp,rt"),Ty=Xu(KS,Xu(ZS,lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xu(JS,lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xu(JS,ZS)),Cy=lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dy=lr("srcset"),QS=Xu(Cy,Dy,lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),J3=lr("script,style,template");class Q3{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=this.checkClobberedElement(t,t.nextSibling);if(s){t=s;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ty.hasOwnProperty(t))return this.sanitizedSomething=!0,!J3.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let s=0;s<i.length;s++){const r=i.item(s),o=r.name,a=o.toLowerCase();if(!QS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;Cy[a]&&(l=kf(l)),Dy[a]&&(l=YS(l)),this.buf.push(" ",o,'="',eA(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ty.hasOwnProperty(t)&&!KS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(eA(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const eH=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tH=/([^\#-~ |!])/g;function eA(n){return n.replace(/&/g,"&amp;").replace(eH,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(tH,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Bf;function Ry(n){return"content"in n&&function iH(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function tA(n){const e=Yu();return e?WS(e.sanitize(Sn.HTML,n)||""):qu(n,"HTML")?WS(So(n)):function nH(n,e){let t=null;try{Bf=Bf||function XS(n){const e=new X3(n);return function Y3(){try{return!!(new window.DOMParser).parseFromString(Bl(""),"text/html")}catch(n){return!1}}()?new q3(e):e}(n);let i=e?String(e):"";t=Bf.getInertBodyElement(i);let s=5,r=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=t.innerHTML,t=Bf.getInertBodyElement(i)}while(i!==r);return Bl((new Q3).sanitizeChildren(Ry(t)||t))}finally{if(t){const i=Ry(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(ny(),Ke(n))}function ha(n){const e=Yu();return e?e.sanitize(Sn.URL,n)||"":qu(n,"URL")?So(n):kf(Ke(n))}function Yu(){const n=ie();return n&&n[12]}const sA="__ngContext__";function ri(n,e){n[sA]=e}function Py(n){const e=function Ku(n){return n[sA]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Oy(n){return n.ngOriginalError}function vH(n,...e){n.error(...e)}class Zu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function yH(n){return n&&n.ngErrorLogger||vH}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Oy(e);for(;t&&Oy(t);)t=Oy(t);return t||null}}const DH=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function Ny(n){return n.ownerDocument.defaultView}function cr(n){return n instanceof Function?n():n}var Xi=(()=>((Xi=Xi||{})[Xi.Important=1]="Important",Xi[Xi.DashCase=2]="DashCase",Xi))();function ky(n,e){return undefined(n,e)}function Ju(n){const e=n[3];return Ns(e)?e[3]:e}function By(n){return fA(n[13])}function Uy(n){return fA(n[4])}function fA(n){for(;null!==n&&!Ns(n);)n=n[4];return n}function Vl(n,e,t,i,s){if(null!=i){let r,o=!1;Ns(i)?r=i:rr(i)&&(o=!0,i=i[0]);const a=En(i);0===n&&null!==t?null==s?vA(e,t,a):da(e,t,a,s||null,!0):1===n&&null!==t?da(e,t,a,s||null,!0):2===n?function AA(n,e,t){const i=Uf(n,e);i&&function zH(n,e,t,i){cn(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=r&&function jH(n,e,t,i,s){const r=t[7];r!==En(t)&&Vl(e,n,i,r,s);for(let a=10;a<t.length;a++){const l=t[a];Qu(l[1],l,n,e,i,r)}}(e,n,r,t,s)}}function Hy(n,e,t){if(cn(n))return n.createElement(e,t);{const i=null!==t?function RV(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===i?n.createElement(e):n.createElementNS(i,e)}}function mA(n,e){const t=n[9],i=t.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,ry(s,-1)),t.splice(i,1)}function zy(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const s=i[17];null!==s&&s!==n&&mA(s,i),e>0&&(n[t-1][4]=i[4]);const r=Rf(n,10+e);!function OH(n,e){Qu(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=r[19];null!==o&&o.detachView(r[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function gA(n,e){if(!(256&e[2])){const t=e[11];cn(t)&&t.destroyNode&&Qu(n,e,t,3,null,null),function kH(n){let e=n[13];if(!e)return Gy(n[1],n);for(;e;){let t=null;if(rr(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)rr(e)&&Gy(e[1],e),e=e[3];null===e&&(e=n),rr(e)&&Gy(e[1],e),t=e&&e[4]}e=t}}(e)}}function Gy(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function HH(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const s=e[t[i]];if(!(s instanceof Ou)){const r=t[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=s[r[o]],l=r[o+1];try{l.call(a)}finally{}}else try{r.call(s)}finally{}}}}(n,e),function VH(n,e){const t=n.cleanup,i=e[7];let s=-1;if(null!==t)for(let r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){const o=t[r+1],a="function"==typeof o?o(e):En(e[o]),l=i[s=t[r+2]],c=t[r+3];"boolean"==typeof c?a.removeEventListener(t[r],l,c):c>=0?i[s=c]():i[s=-c].unsubscribe(),r+=2}else{const o=i[s=t[r+1]];t[r].call(o)}if(null!==i){for(let r=s+1;r<i.length;r++)i[r]();e[7]=null}}(n,e),1===e[1].type&&cn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Ns(e[3])){t!==e[3]&&mA(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function _A(n,e,t){return function yA(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const s=n.data[i.directiveStart].encapsulation;if(s===Ps.None||s===Ps.Emulated)return null}return ds(i,t)}(n,e.parent,t)}function da(n,e,t,i,s){cn(n)?n.insertBefore(e,t,i,s):e.insertBefore(t,i,s)}function vA(n,e,t){cn(n)?n.appendChild(e,t):e.appendChild(t)}function bA(n,e,t,i,s){null!==i?da(n,e,t,i,s):vA(n,e,t)}function Uf(n,e){return cn(n)?n.parentNode(e):e.parentNode}function xA(n,e,t){return wA(n,e,t)}let wA=function MA(n,e,t){return 40&n.type?ds(n,t):null};function Vf(n,e,t,i){const s=_A(n,i,e),r=e[11],a=xA(i.parent||e[6],i,e);if(null!=s)if(Array.isArray(t))for(let l=0;l<t.length;l++)bA(r,s,t[l],a,!1);else bA(r,s,t,a,!1)}function Hf(n,e){if(null!==e){const t=e.type;if(3&t)return ds(e,n);if(4&t)return jy(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Hf(n,i);{const s=n[e.index];return Ns(s)?jy(-1,s):En(s)}}if(32&t)return ky(e,n)()||En(n[e.index]);{const i=SA(n,e);return null!==i?Array.isArray(i)?i[0]:Hf(Ju(n[16]),i):Hf(n,e.next)}}return null}function SA(n,e){return null!==e?n[16][6].projection[e.projection]:null}function jy(n,e){const t=10+n+1;if(t<e.length){const i=e[t],s=i[1].firstChild;if(null!==s)return Hf(i,s)}return e[7]}function $y(n,e,t,i,s,r,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&ri(En(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)$y(n,e,t.child,i,s,r,!1),Vl(e,n,s,a,r);else if(32&l){const c=ky(t,i);let u;for(;u=c();)Vl(e,n,s,u,r);Vl(e,n,s,a,r)}else 16&l?TA(n,e,i,t,s,r):Vl(e,n,s,a,r);t=o?t.projectionNext:t.next}}function Qu(n,e,t,i,s,r){$y(t,i,n.firstChild,e,s,r,!1)}function TA(n,e,t,i,s,r){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Vl(e,n,s,l[c],r);else $y(n,e,l,o[3],s,r,!0)}function CA(n,e,t){cn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function qy(n,e,t){cn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function DA(n,e,t){let i=n.length;for(;;){const s=n.indexOf(e,t);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const r=e.length;if(s+r===i||n.charCodeAt(s+r)<=32)return s}t=s+1}}const RA="ng-template";function qH(n,e,t){let i=0;for(;i<n.length;){let s=n[i++];if(t&&"class"===s){if(s=n[i],-1!==DA(s.toLowerCase(),e,0))return!0}else if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function IA(n){return 4===n.type&&n.value!==RA}function XH(n,e,t){return e===(4!==n.type||t?n.value:RA)}function YH(n,e,t){let i=4;const s=n.attrs||[],r=function JH(n){for(let e=0;e<n.length;e++)if(bS(n[e]))return e;return n.length}(s);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!XH(n,l,t)||""===l&&1===e.length){if(ks(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!qH(n.attrs,c,t)){if(ks(i))return!1;o=!0}continue}const h=KH(8&i?"class":l,s,IA(n),t);if(-1===h){if(ks(i))return!1;o=!0;continue}if(""!==c){let d;d=h>r?"":s[h+1].toLowerCase();const f=8&i?d:null;if(f&&-1!==DA(f,c,0)||2&i&&c!==d){if(ks(i))return!1;o=!0}}}}else{if(!o&&!ks(i)&&!ks(l))return!1;if(o&&ks(l))continue;o=!1,i=l|1&i}}return ks(i)||o}function ks(n){return 0==(1&n)}function KH(n,e,t,i){if(null===e)return-1;let s=0;if(i||!t){let r=!1;for(;s<e.length;){const o=e[s];if(o===n)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function QH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function PA(n,e,t=!1){for(let i=0;i<e.length;i++)if(YH(n,e[i],t))return!0;return!1}function ez(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let s=0;s<n.length;s++)if(n[s]!==i[s])continue e;return!0}}return!1}function LA(n,e){return n?":not("+e.trim()+")":e}function tz(n){let e=n[0],t=1,i=2,s="",r=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?s+="."+o:4&i&&(s+=" "+o);else""!==s&&!ks(o)&&(e+=LA(r,s),s=""),i=o,r=r||!ks(i);t++}return""!==s&&(e+=LA(r,s)),e}const Ze={};function ot(n){OA(At(),ie(),Mi()+n,_f())}function OA(n,e,t,i){if(!i)if(3==(3&e[2])){const r=n.preOrderCheckHooks;null!==r&&Mf(e,r,t)}else{const r=n.preOrderHooks;null!==r&&wf(e,r,0,t)}Mo(t)}function zf(n,e){return n<<17|e<<2}function Bs(n){return n>>17&32767}function Xy(n){return 2|n}function Hr(n){return(131068&n)>>2}function Yy(n,e){return-131069&n|e<<2}function Ky(n){return 1|n}function jA(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i],r=t[i+1];if(-1!==r){const o=n.data[r];uy(s),o.contentQueries(2,e[r],r)}}}function eh(n,e,t,i,s,r,o,a,l,c){const u=e.blueprint.slice();return u[0]=s,u[2]=140|i,lS(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=r,u[16]=2==e.type?n[16]:u,u}function Hl(n,e,t,i,s){let r=n.data[e];if(null===r)r=function rv(n,e,t,i,s){const r=uS(),o=oy(),l=n.data[e]=function vz(n,e,t,i,s,r){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,t,e,i,s);return null===n.firstChild&&(n.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l)),l}(n,e,t,i,s),function zV(){return je.lFrame.inI18n}()&&(r.flags|=64);else if(64&r.type){r.type=t,r.value=i,r.attrs=s;const o=function Lu(){const n=je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return or(r,!0),r}function zl(n,e,t,i){if(0===t)return-1;const s=e.length;for(let r=0;r<t;r++)e.push(i),n.blueprint.push(i),n.data.push(null);return s}function th(n,e,t){vf(e);try{const i=n.viewQuery;null!==i&&pv(1,i,t);const s=n.template;null!==s&&$A(n,e,s,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&jA(n,e),n.staticViewQueries&&pv(2,n.viewQuery,t);const r=n.components;null!==r&&function gz(n,e){for(let t=0;t<e.length;t++)kz(n,e[t])}(e,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,bf()}}function Gl(n,e,t,i){const s=e[2];if(256==(256&s))return;vf(e);const r=_f();try{lS(e),function hS(n){return je.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&$A(n,e,t,2,i);const o=3==(3&s);if(!r)if(o){const c=n.preOrderCheckHooks;null!==c&&Mf(e,c,null)}else{const c=n.preOrderHooks;null!==c&&wf(e,c,0,null),hy(e,0)}if(function Nz(n){for(let e=By(n);null!==e;e=Uy(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const s=t[i],r=s[3];0==(1024&s[2])&&ry(r,1),s[2]|=1024}}}(e),function Oz(n){for(let e=By(n);null!==e;e=Uy(e))for(let t=10;t<e.length;t++){const i=e[t],s=i[1];sy(i)&&Gl(s,i,s.template,i[8])}}(e),null!==n.contentQueries&&jA(n,e),!r)if(o){const c=n.contentCheckHooks;null!==c&&Mf(e,c)}else{const c=n.contentHooks;null!==c&&wf(e,c,1),hy(e,1)}!function pz(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Mo(~s);else{const r=s,o=t[++i],a=t[++i];GV(o,r),a(2,e[r])}}}finally{Mo(-1)}}(n,e);const a=n.components;null!==a&&function mz(n,e){for(let t=0;t<e.length;t++)Fz(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&pv(2,l,i),!r)if(o){const c=n.viewCheckHooks;null!==c&&Mf(e,c)}else{const c=n.viewHooks;null!==c&&wf(e,c,2),hy(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ry(e[3],-1))}finally{bf()}}function _z(n,e,t,i){const s=e[10],r=!_f(),o=aS(e);try{r&&!o&&s.begin&&s.begin(),o&&th(n,e,i),Gl(n,e,t,i)}finally{r&&!o&&s.end&&s.end()}}function $A(n,e,t,i,s){const r=Mi(),o=2&i;try{Mo(-1),o&&e.length>20&&OA(n,e,20,_f()),t(i,s)}finally{Mo(r)}}function ov(n,e,t){!cS()||(function Az(n,e,t,i){const s=t.directiveStart,r=t.directiveEnd;n.firstCreatePass||Fu(t,e),ri(i,e);const o=t.initialInputs;for(let a=s;a<r;a++){const l=n.data[a],c=Fs(l);c&&Iz(e,t,l);const u=ku(e,n,a,t);ri(u,e),null!==o&&Pz(0,a-s,u,l,0,o),c&&($i(t.index,e)[8]=u)}}(n,e,t,ds(t,e)),128==(128&t.flags)&&function Tz(n,e,t){const i=t.directiveStart,s=t.directiveEnd,o=t.index,a=function WV(){return je.lFrame.currentDirectiveIndex}();try{Mo(o);for(let l=i;l<s;l++){const c=n.data[l],u=e[l];ly(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&tT(c,u)}}finally{Mo(-1),ly(a)}}(n,e,t))}function av(n,e,t=ds){const i=e.localNames;if(null!==i){let s=e.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?t(e,n):n[o];n[s++]=a}}}function XA(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=jf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function jf(n,e,t,i,s,r,o,a,l,c){const u=20+i,h=u+s,d=function yz(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ze);return t}(u,h),f="function"==typeof c?c():c;return d[1]={type:n,blueprint:d,template:t,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function ZA(n,e,t,i){const s=aT(e);null===t?s.push(i):(s.push(t),n.firstCreatePass&&lT(n).push(i,s.length-1))}function JA(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const s=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,s):t[i]=[e,s]}return t}function Yi(n,e,t,i,s,r,o,a){const l=ds(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(hT(n,t,u,i,s),pf(e)&&function Mz(n,e){const t=$i(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function xz(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),s=null!=o?o(s,e.value||"",i):s,cn(r)?r.setProperty(l,i,s):fy(i)||(l.setProperty?l.setProperty(i,s):l[i]=s))}function lv(n,e,t,i){let s=!1;if(cS()){const r=function Cz(n,e,t){const i=n.directiveRegistry;let s=null;if(i)for(let r=0;r<i.length;r++){const o=i[r];PA(t,o.selectors,!1)&&(s||(s=[]),Cf(Fu(t,e),n,o.type),Fs(o)?(nT(n,t),s.unshift(o)):s.push(o))}return s}(n,e,t),o=null===i?null:{"":-1};if(null!==r){s=!0,iT(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const h=r[u];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,c=zl(n,e,r.length,null);for(let u=0;u<r.length;u++){const h=r[u];t.mergedAttrs=Sf(t.mergedAttrs,h.hostAttrs),sT(n,t,e,c,h),Rz(c,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const d=h.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function bz(n,e){const i=e.directiveEnd,s=n.data,r=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=s[c],h=u.inputs,d=null===r||IA(e)?null:Lz(h,r);o.push(d),a=JA(h,c,a),l=JA(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function Dz(n,e,t){if(e){const i=n.localNames=[];for(let s=0;s<e.length;s+=2){const r=t[e[s+1]];if(null==r)throw new Ae(-301,!1);i.push(e[s],r)}}}(t,i,o)}return t.mergedAttrs=Sf(t.mergedAttrs,t.attrs),s}function eT(n,e,t,i,s,r){const o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function Sz(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,s,o)}}function tT(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function nT(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function Rz(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Fs(e)&&(t[""]=n)}}function iT(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sT(n,e,t,i,s){n.data[i]=s;const r=s.factory||(s.factory=ua(s.type)),o=new Ou(r,Fs(s),null);n.blueprint[i]=o,t[i]=o,eT(n,e,0,i,zl(n,t,s.hostVars,Ze),s)}function Iz(n,e,t){const i=ds(e,n),s=XA(t),r=n[10],o=$f(n,eh(n,s,null,t.onPush?64:16,i,e,r,r.createRenderer(i,t),null,null));n[e.index]=o}function ur(n,e,t,i,s,r){const o=ds(n,e);!function cv(n,e,t,i,s,r,o){if(null==r)cn(n)?n.removeAttribute(e,s,t):e.removeAttribute(s);else{const a=null==o?Ke(r):o(r,i||"",s);cn(n)?n.setAttribute(e,s,a,t):t?e.setAttributeNS(t,s,a):e.setAttribute(s,a)}}(e[11],o,r,n.value,t,i,s)}function Pz(n,e,t,i,s,r){const o=r[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],h=o[l++];null!==a?i.setInput(t,h,c,u):t[u]=h}}}function Lz(n,e){let t=null,i=0;for(;i<e.length;){const s=e[i];if(0!==s)if(5!==s){if("number"==typeof s)break;n.hasOwnProperty(s)&&(null===t&&(t=[]),t.push(s,n[s],e[i+1])),i+=2}else i+=2;else i+=4}return t}function rT(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function Fz(n,e){const t=$i(e,n);if(sy(t)){const i=t[1];80&t[2]?Gl(i,t,i.template,t[8]):t[5]>0&&uv(t)}}function uv(n){for(let i=By(n);null!==i;i=Uy(i))for(let s=10;s<i.length;s++){const r=i[s];if(1024&r[2]){const o=r[1];Gl(o,r,o.template,r[8])}else r[5]>0&&uv(r)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const s=$i(t[i],n);sy(s)&&s[5]>0&&uv(s)}}function kz(n,e){const t=$i(e,n),i=t[1];(function Bz(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),th(i,t,t[8])}function $f(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function hv(n){for(;n;){n[2]|=64;const e=Ju(n);if(bV(n)&&!e)return n;n=e}return null}function fv(n,e,t){const i=e[10];i.begin&&i.begin();try{Gl(n,e,n.template,t)}catch(s){throw uT(e,s),s}finally{i.end&&i.end()}}function oT(n){!function dv(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Py(t),s=i[1];_z(s,i,s.template,t)}}(n[8])}function pv(n,e,t){uy(0),e(n,t)}const zz=(()=>Promise.resolve(null))();function aT(n){return n[7]||(n[7]=[])}function lT(n){return n.cleanup||(n.cleanup=[])}function uT(n,e){const t=n[9],i=t?t.get(Zu,null):null;i&&i.handleError(e)}function hT(n,e,t,i,s){for(let r=0;r<t.length;){const o=t[r++],a=t[r++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,s,i,a):l[a]=s}}function zr(n,e,t){const i=gf(e,n);!function pA(n,e,t){cn(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function qf(n,e,t){let i=t?n.styles:null,s=t?n.classes:null,r=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:1==r?s=H_(s,a):2==r&&(i=H_(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=s:n.classesWithoutHost=s}const mv=new nt("INJECTOR",-1);class dT{get(e,t=zu){if(t===zu){const i=new Error(`NullInjectorError: No provider for ${Pt(e)}!`);throw i.name="NullInjectorError",i}return t}}const gv=new nt("Set Injector scope."),nh={},jz={};let _v;function fT(){return void 0===_v&&(_v=new dT),_v}function pT(n,e=null,t=null,i){const s=mT(n,e,t,i);return s._resolveInjectorDefTypes(),s}function mT(n,e=null,t=null,i){return new $z(n,t,e||fT(),i)}class $z{constructor(e,t,i,s=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];t&&ar(t,a=>this.processProvider(a,e,t)),ar([e],a=>this.processInjectorType(a,[],r)),this.records.set(mv,Wl(void 0,this));const o=this.records.get(gv);this.scope=null!=o?o.value:null,this.source=s||("object"==typeof e?null:Pt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=zu,i=$e.Default){this.assertNotDestroyed();const s=BS(this),r=yo(void 0);try{if(!(i&$e.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function eG(n){return"function"==typeof n||"object"==typeof n&&n instanceof nt}(e)&&G_(e);a=l&&this.injectableDefInScope(l)?Wl(yv(e),nh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&$e.Self?fT():this.parent).get(e,t=i&$e.Optional&&t===zu?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Pf]=o[Pf]||[]).unshift(Pt(e)),s)throw o;return function D3(n,e,t,i){const s=n[Pf];throw e[kS]&&s.unshift(e[kS]),n.message=function R3(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let s=Pt(e);if(Array.isArray(e))s=e.map(Pt).join(" -> ");else if("object"==typeof e){let r=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):Pt(a)))}s=`{${r.join(", ")}}`}return`${t}${i?"("+i+")":""}[${s}]: ${n.replace(w3,"\n  ")}`}("\n"+n.message,s,t,i),n.ngTokenPath=s,n[Pf]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{yo(r),BS(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,s)=>e.push(Pt(s))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processInjectorType(e,t,i){if(!(e=st(e)))return!1;let s=XE(e);const r=null==s&&e.ngModule||void 0,o=void 0===r?e:r,a=-1!==i.indexOf(o);if(void 0!==r&&(s=XE(r)),null==s)return!1;if(null!=s.imports&&!a){let u;i.push(o);try{ar(s.imports,h=>{this.processInjectorType(h,t,i)&&(void 0===u&&(u=[]),u.push(h))})}finally{}if(void 0!==u)for(let h=0;h<u.length;h++){const{ngModule:d,providers:f}=u[h];ar(f,p=>this.processProvider(p,d,f||Vt))}}this.injectorDefTypes.add(o);const l=ua(o)||(()=>new o);this.records.set(o,Wl(l,nh));const c=s.providers;if(null!=c&&!a){const u=e;ar(c,h=>this.processProvider(h,u,c))}return void 0!==r&&void 0!==e.providers}processProvider(e,t,i){let s=jl(e=st(e))?e:st(e&&e.provide);const r=function Xz(n,e,t){return _T(n)?Wl(void 0,n.useValue):Wl(gT(n),nh)}(e);if(jl(e)||!0!==e.multi)this.records.get(s);else{let o=this.records.get(s);o||(o=Wl(void 0,nh,!0),o.factory=()=>wy(o.multi),this.records.set(s,o)),s=e,o.multi.push(e)}this.records.set(s,r)}hydrate(e,t){return t.value===nh&&(t.value=jz,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Qz(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=st(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function yv(n){const e=G_(n),t=null!==e?e.factory:ua(n);if(null!==t)return t;if(n instanceof nt)throw new Ae(204,!1);if(n instanceof Function)return function qz(n){const e=n.length;if(e>0)throw Hu(e,"?"),new Ae(204,!1);const t=function aV(n){const e=n&&(n[cf]||n[YE]);if(e){const t=function lV(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ae(204,!1)}function gT(n,e,t){let i;if(jl(n)){const s=st(n);return ua(s)||yv(s)}if(_T(n))i=()=>st(n.useValue);else if(function Kz(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...wy(n.deps||[]));else if(function Yz(n){return!(!n||!n.useExisting)}(n))i=()=>pe(st(n.useExisting));else{const s=st(n&&(n.useClass||n.provide));if(!function Jz(n){return!!n.deps}(n))return ua(s)||yv(s);i=()=>new s(...wy(n.deps))}return i}function Wl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _T(n){return null!==n&&"object"==typeof n&&S3 in n}function jl(n){return"function"==typeof n}let Nn=(()=>{class n{static create(t,i){var s;if(Array.isArray(t))return pT({name:""},i,t,"");{const r=null!==(s=t.name)&&void 0!==s?s:"";return pT({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=zu,n.NULL=new dT,n.\u0275prov=Ie({token:n,providedIn:"any",factory:()=>pe(mv)}),n.__NG_ELEMENT_ID__=-1,n})();function lG(n,e){xf(Py(n)[1],Ln())}function Lt(n){let e=function DT(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let s;if(Fs(n))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ae(903,"");s=e.\u0275dir}if(s){if(t){i.push(s);const o=n;o.inputs=xv(n.inputs),o.declaredInputs=xv(n.declaredInputs),o.outputs=xv(n.outputs);const a=s.hostBindings;a&&dG(n,a);const l=s.viewQuery,c=s.contentQueries;if(l&&uG(n,l),c&&hG(n,c),V_(n.inputs,s.inputs),V_(n.declaredInputs,s.declaredInputs),V_(n.outputs,s.outputs),Fs(s)&&s.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const r=s.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(n),a===Lt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function cG(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const s=n[i];s.hostVars=e+=s.hostVars,s.hostAttrs=Sf(s.hostAttrs,t=Sf(t,s.hostAttrs))}}(i)}function xv(n){return n===Ml?{}:n===Vt?[]:n}function uG(n,e){const t=n.viewQuery;n.viewQuery=t?(i,s)=>{e(i,s),t(i,s)}:e}function hG(n,e){const t=n.contentQueries;n.contentQueries=t?(i,s,r)=>{e(i,s,r),t(i,s,r)}:e}function dG(n,e){const t=n.hostBindings;n.hostBindings=t?(i,s)=>{e(i,s),t(i,s)}:e}let Xf=null;function $l(){if(!Xf){const n=Nt.Symbol;if(n&&n.iterator)Xf=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Xf=i)}}}return Xf}function ih(n){return!!Mv(n)&&(Array.isArray(n)||!(n instanceof Map)&&$l()in n)}function Mv(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function hr(n,e,t){return n[e]=t}function oi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Vs(n,e,t,i){const s=ie();return oi(s,Cl(),e)&&(At(),ur(un(),s,n,e,t,i)),Vs}function Xl(n,e,t,i){return oi(n,Cl(),t)?e+Ke(t)+i:Ze}function Ki(n,e,t,i,s,r,o,a){const l=ie(),c=At(),u=n+20,h=c.firstCreatePass?function vG(n,e,t,i,s,r,o,a,l){const c=e.consts,u=Hl(e,n,4,o||null,xo(c,a));lv(e,t,u,xo(c,l)),xf(e,u);const h=u.tViews=jf(2,u,i,s,r,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,s,r,o):c.data[u];or(h,!1);const d=l[11].createComment("");Vf(c,l,d,h),ri(d,l),$f(l,l[u]=rT(d,l,d,h)),mf(h)&&ov(c,l,h),null!=o&&av(l,h,a)}function wv(n){return Tl(function HV(){return je.lFrame.contextLView}(),20+n)}function J(n,e=$e.Default){const t=ie();return null===t?pe(n,e):TS(Ln(),t,st(n),e)}function Cv(){throw new Error("invalid")}function sn(n,e,t){const i=ie();return oi(i,Cl(),e)&&Yi(At(),un(),i,n,e,i[11],t,!1),sn}function Dv(n,e,t,i,s){const o=s?"class":"style";hT(n,t,e.inputs[o],o,i)}function Be(n,e,t,i){const s=ie(),r=At(),o=20+n,a=s[11],l=s[o]=Hy(a,e,function JV(){return je.lFrame.currentNamespace}()),c=r.firstCreatePass?function VG(n,e,t,i,s,r,o){const a=e.consts,c=Hl(e,n,2,s,xo(a,r));return lv(e,t,c,xo(a,o)),null!==c.attrs&&qf(c,c.attrs,!1),null!==c.mergedAttrs&&qf(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,r,s,0,e,t,i):r.data[o];or(c,!0);const u=c.mergedAttrs;null!==u&&Ef(a,l,u);const h=c.classes;null!==h&&qy(a,l,h);const d=c.styles;return null!==d&&CA(a,l,d),64!=(64&c.flags)&&Vf(r,s,l,c),0===function FV(){return je.lFrame.elementDepthCount}()&&ri(l,s),function kV(){je.lFrame.elementDepthCount++}(),mf(c)&&(ov(r,s,c),function qA(n,e,t){if(K_(e)){const s=e.directiveEnd;for(let r=e.directiveStart;r<s;r++){const o=n.data[r];o.contentQueries&&o.contentQueries(1,t[r],r)}}}(r,c,s)),null!==i&&av(s,c),Be}function Pe(){let n=Ln();oy()?ay():(n=n.parent,or(n,!1));const e=n;!function BV(){je.lFrame.elementDepthCount--}();const t=At();return t.firstCreatePass&&(xf(t,n),K_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function i3(n){return 0!=(16&n.flags)}(e)&&Dv(t,e,ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function s3(n){return 0!=(32&n.flags)}(e)&&Dv(t,e,ie(),e.stylesWithoutHost,!1),Pe}function Hs(n,e,t,i){return Be(n,e,t,i),Pe(),Hs}function ic(){return ie()}function rh(n){return!!n&&"function"==typeof n.then}const Pv=function KT(n){return!!n&&"function"==typeof n.subscribe};function Kt(n,e,t,i){const s=ie(),r=At(),o=Ln();return function JT(n,e,t,i,s,r,o,a){const l=mf(i),u=n.firstCreatePass&&lT(n),h=e[8],d=aT(e);let f=!0;if(3&i.type||a){const _=ds(i,e),m=a?a(_):_,y=d.length,v=a?b=>a(En(b[i.index])):i.index;if(cn(t)){let b=null;if(!a&&l&&(b=function zG(n,e,t,i){const s=n.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const o=s[r];if(o===t&&s[r+1]===i){const a=e[7],l=s[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(n,e,s,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=r,b.__ngLastListenerFn__=r,f=!1;else{r=Lv(i,e,h,r,!1);const x=t.listen(m,s,r);d.push(r,x),u&&u.push(s,v,y,y+1)}}else r=Lv(i,e,h,r,!0),m.addEventListener(s,r,o),d.push(r),u&&u.push(s,v,y,o)}else r=Lv(i,e,h,r,!1);const p=i.outputs;let g;if(f&&null!==p&&(g=p[s])){const _=g.length;if(_)for(let m=0;m<_;m+=2){const w=e[g[m]][g[m+1]].subscribe(r),E=d.length;d.push(r,w),u&&u.push(s,i.index,E,-(E+1))}}}(r,s,s[11],o,n,e,!!t,i),Kt}function QT(n,e,t,i){try{return!1!==t(i)}catch(s){return uT(n,s),!1}}function Lv(n,e,t,i,s){return function r(o){if(o===Function)return i;const a=2&n.flags?$i(n.index,e):e;0==(32&e[2])&&hv(a);let l=QT(e,0,i,o),c=r.__ngNextListenerFn__;for(;c;)l=QT(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return s&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function ai(n=1){return function $V(n){return(je.lFrame.contextLView=function qV(n,e){for(;n>0;)e=e[15],n--;return e}(n,je.lFrame.contextLView))[8]}(n)}function GG(n,e){let t=null;const i=function ZH(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let s=0;s<e.length;s++){const r=e[s];if("*"!==r){if(null===i?PA(n,r,!0):ez(i,r))return s}else t=s}return t}function sc(n,e,t){return Ov(n,"",e,"",t),sc}function Ov(n,e,t,i,s){const r=ie(),o=Xl(r,e,t,i);return o!==Ze&&Yi(At(),un(),r,n,o,r[11],s,!1),Ov}function uC(n,e,t,i,s){const r=n[t+1],o=null===e;let a=i?Bs(r):Hr(r),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];$G(n[a],e)&&(l=!0,n[a+1]=i?Ky(u):Xy(u)),a=i?Bs(u):Hr(u)}l&&(n[t+1]=i?Xy(r):Ky(r))}function $G(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Fl(n,e)>=0}const Fn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hC(n){return n.substring(Fn.key,Fn.keyEnd)}function dC(n,e){const t=Fn.textEnd;return t===e?-1:(e=Fn.keyEnd=function KG(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Fn.key=e,t),rc(n,e,t))}function rc(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Zf(n,e){return function zs(n,e,t,i){const s=ie(),r=At(),o=Vr(2);r.firstUpdatePass&&bC(r,n,o,i),e!==Ze&&oi(s,o,e)&&MC(r,r.data[Mi()],s,s[11],n,s[o+1]=function oW(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Pt(So(n)))),n}(e,t),i,o)}(n,e,null,!0),Zf}function yC(n){!function Gs(n,e,t,i){const s=At(),r=Vr(2);s.firstUpdatePass&&bC(s,null,r,i);const o=ie();if(t!==Ze&&oi(o,r,t)){const a=s.data[Mi()];if(EC(a,i)&&!vC(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=H_(l,t||"")),Dv(s,a,o,t,i)}else!function rW(n,e,t,i,s,r,o,a){s===Ze&&(s=Vt);let l=0,c=0,u=0<s.length?s[0]:null,h=0<r.length?r[0]:null;for(;null!==u||null!==h;){const d=l<s.length?s[l+1]:void 0,f=c<r.length?r[c+1]:void 0;let g,p=null;u===h?(l+=2,c+=2,d!==f&&(p=h,g=f)):null===h||null!==u&&u<h?(l+=2,p=u):(c+=2,p=h,g=f),null!==p&&MC(n,e,t,i,p,g,o,a),u=l<s.length?s[l]:null,h=c<r.length?r[c]:null}}(s,a,o,o[11],o[r+1],o[r+1]=function sW(n,e,t){if(null==t||""===t)return Vt;const i=[],s=So(t);if(Array.isArray(s))for(let r=0;r<s.length;r++)n(i,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&n(i,r,s[r]);else"string"==typeof s&&e(i,s);return i}(n,e,t),i,r)}}(qi,fr,n,!0)}function fr(n,e){for(let t=function XG(n){return function pC(n){Fn.key=0,Fn.keyEnd=0,Fn.value=0,Fn.valueEnd=0,Fn.textEnd=n.length}(n),dC(n,rc(n,0,Fn.textEnd))}(e);t>=0;t=dC(e,t))qi(n,hC(e),!0)}function vC(n,e){return e>=n.expandoStartIndex}function bC(n,e,t,i){const s=n.data;if(null===s[t+1]){const r=s[Mi()],o=vC(n,t);EC(r,i)&&null===e&&!o&&(e=!1),e=function eW(n,e,t,i){const s=function cy(n){const e=je.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let r=i?e.residualClasses:e.residualStyles;if(null===s)0===(i?e.classBindings:e.styleBindings)&&(t=oh(t=Nv(null,n,e,t,i),e.attrs,i),r=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==s)if(t=Nv(s,n,e,t,i),null===r){let l=function tW(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Hr(i))return n[Bs(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=Nv(null,n,e,l[1],i),l=oh(l,e.attrs,i),function nW(n,e,t,i){n[Bs(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else r=function iW(n,e,t){let i;const s=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<s;r++)i=oh(i,n[r].hostAttrs,t);return oh(i,e.attrs,t)}(n,e,i)}return void 0!==r&&(i?e.residualClasses=r:e.residualStyles=r),t}(s,r,e,i),function WG(n,e,t,i,s,r){let o=r?e.classBindings:e.styleBindings,a=Bs(o),l=Hr(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const h=t;u=h[1],(null===u||Fl(h,u)>0)&&(c=!0)}else u=t;if(s)if(0!==l){const d=Bs(n[a+1]);n[i+1]=zf(d,a),0!==d&&(n[d+1]=Yy(n[d+1],i)),n[a+1]=function sz(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=zf(a,0),0!==a&&(n[a+1]=Yy(n[a+1],i)),a=i;else n[i+1]=zf(l,0),0===a?a=i:n[l+1]=Yy(n[l+1],i),l=i;c&&(n[i+1]=Xy(n[i+1])),uC(n,u,i,!0),uC(n,u,i,!1),function jG(n,e,t,i,s){const r=s?n.residualClasses:n.residualStyles;null!=r&&"string"==typeof e&&Fl(r,e)>=0&&(t[i+1]=Ky(t[i+1]))}(e,u,n,i,r),o=zf(a,l),r?e.classBindings=o:e.styleBindings=o}(s,r,e,t,o,i)}}function Nv(n,e,t,i,s){let r=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(r=e[a],i=oh(i,r.hostAttrs,s),r!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function oh(n,e,t){const i=t?1:2;let s=-1;if(null!==e)for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?s=o:s===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qi(n,o,!!t||e[++r]))}return void 0===n?null:n}function MC(n,e,t,i,s,r,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Jf(function kA(n){return 1==(1&n)}(c)?wC(l,e,t,s,Hr(c),o):void 0)||(Jf(r)||function FA(n){return 2==(2&n)}(c)&&(r=wC(l,null,t,s,a,o)),function $H(n,e,t,i,s){const r=cn(n);if(e)s?r?n.addClass(t,i):t.classList.add(i):r?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Xi.DashCase;if(null==s)r?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof s&&s.endsWith("!important");a&&(s=s.slice(0,-10),o|=Xi.Important),r?n.setStyle(t,i,s,o):t.style.setProperty(i,s,a?"important":"")}}}(i,o,gf(Mi(),t),s,r))}function wC(n,e,t,i,s,r){const o=null===e;let a;for(;s>0;){const l=n[s],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let d=t[s+1];d===Ze&&(d=h?Vt:void 0);let f=h?by(d,i):u===i?d:void 0;if(c&&!Jf(f)&&(f=by(l,i)),Jf(f)&&(a=f,o))return a;const p=n[s+1];s=o?Bs(p):Hr(p)}if(null!==e){let l=r?e.residualClasses:e.residualStyles;null!=l&&(a=by(l,i))}return a}function Jf(n){return void 0!==n}function EC(n,e){return 0!=(n.flags&(e?16:32))}function qe(n,e=""){const t=ie(),i=At(),s=n+20,r=i.firstCreatePass?Hl(i,s,1,e,null):i.data[s],o=t[s]=function Vy(n,e){return cn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Vf(i,t,o,r),or(r,!1)}function pa(n){return li("",n,""),pa}function li(n,e,t){const i=ie(),s=Xl(i,n,e,t);return s!==Ze&&zr(i,Mi(),s),li}const Qf="en-US";let $C=Qf;function Bv(n,e,t,i,s){if(n=st(n),Array.isArray(n))for(let r=0;r<n.length;r++)Bv(n[r],e,t,i,s);else{const r=At(),o=ie();let a=jl(n)?n:st(n.provide),l=gT(n);const c=Ln(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(jl(n)||!n.multi){const f=new Ou(l,s,J),p=Vv(a,e,s?u:u+d,h);-1===p?(Cf(Fu(c,o),r,a),Uv(r,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=Vv(a,e,u+d,h),p=Vv(a,e,u,u+d),g=f>=0&&t[f],_=p>=0&&t[p];if(s&&!_||!s&&!g){Cf(Fu(c,o),r,a);const m=function S4(n,e,t,i,s){const r=new Ou(n,t,J);return r.multi=[],r.index=e,r.componentProviders=0,gD(r,s,i&&!t),r}(s?E4:w4,t.length,s,i,l);!s&&_&&(t[p].providerFactory=m),Uv(r,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),t.push(m),o.push(m)}else Uv(r,n,f>-1?f:p,gD(t[s?p:f],l,!s&&i));!s&&i&&_&&t[p].componentProviders++}}}function Uv(n,e,t,i){const s=jl(e),r=function Zz(n){return!!n.useClass}(e);if(s||r){const l=(r?st(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!s&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function gD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Vv(n,e,t,i){for(let s=t;s<i;s++)if(e[s]===n)return s;return-1}function w4(n,e,t,i){return Hv(this.multi,[])}function E4(n,e,t,i){const s=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ku(t,t[1],this.providerFactory.index,i);r=a.slice(0,o),Hv(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],Hv(s,r);return r}function Hv(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Qt(n,e=[]){return t=>{t.providersResolver=(i,s)=>function M4(n,e,t){const i=At();if(i.firstCreatePass){const s=Fs(n);Bv(t,i.data,i.blueprint,s,!0),Bv(e,i.data,i.blueprint,s,!1)}}(i,s?s(n):n,e)}}class _D{}class C4{resolveComponentFactory(e){throw function T4(n){const e=Error(`No component factory found for ${Pt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let lc=(()=>{class n{}return n.NULL=new C4,n})();function D4(){return cc(Ln(),ie())}function cc(n,e){return new kn(ds(n,e))}let kn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=D4,n})();function R4(n){return n instanceof kn?n.nativeElement:n}class ga{}let Ws=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function P4(){const n=ie(),t=$i(Ln().index,n);return function I4(n){return n[11]}(rr(t)?t:n)}(),n})(),L4=(()=>{class n{}return n.\u0275prov=Ie({token:n,providedIn:"root",factory:()=>null}),n})();class hh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const O4=new hh("13.2.7"),zv={};function sp(n,e,t,i,s=!1){for(;null!==t;){const r=e[t.index];if(null!==r&&i.push(En(r)),Ns(r))for(let a=10;a<r.length;a++){const l=r[a],c=l[1].firstChild;null!==c&&sp(l[1],l,c,i)}const o=t.type;if(8&o)sp(n,e,t.child,i);else if(32&o){const a=ky(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=SA(e,t);if(Array.isArray(a))i.push(...a);else{const l=Ju(e[16]);sp(l[1],l,a,i,!0)}}t=s?t.projectionNext:t.next}return i}class dh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return sp(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ns(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(zy(e,i),Rf(t,i))}this._attachedToViewContainer=!1}gA(this._lView[1],this._lView)}onDestroy(e){ZA(this._lView[1],this._lView,null,e)}markForCheck(){hv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Vz(n,e,t){yf(!0);try{fv(n,e,t)}finally{yf(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function FH(n,e){Qu(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ae(902,"");this._appRef=e}}class N4 extends dh{constructor(e){super(e),this._view=e}detectChanges(){oT(this._view)}checkNoChanges(){!function Hz(n){yf(!0);try{oT(n)}finally{yf(!1)}}(this._view)}get context(){return null}}class vD extends lc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ni(e);return new Gv(t,this.ngModule)}}function bD(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Gv extends _D{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function nz(n){return n.map(tz).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return bD(this.componentDef.inputs)}get outputs(){return bD(this.componentDef.outputs)}create(e,t,i,s){const r=(s=s||this.ngModule)?function k4(n,e){return{get:(t,i,s)=>{const r=n.get(t,zv,s);return r!==zv||i===zv?r:e.get(t,i,s)}}}(e,s.injector):e,o=r.get(ga,oS),a=r.get(L4,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function KA(n,e,t){if(cn(n))return n.selectRootElement(e,t===Ps.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Hy(o.createRenderer(null,this.componentDef),c,function F4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?576:528,d=function CT(n,e){return{components:[],scheduler:n||DH,clean:zz,playerHandler:e||null,flags:0}}(),f=jf(0,null,null,1,0,null,null,null,null,null),p=eh(null,f,d,h,null,null,o,l,a,r);let g,_;vf(p);try{const m=function AT(n,e,t,i,s,r){const o=t[1];t[20]=n;const l=Hl(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(qf(l,c,!0),null!==n&&(Ef(s,n,c),null!==l.classes&&qy(s,n,l.classes),null!==l.styles&&CA(s,n,l.styles)));const u=i.createRenderer(n,e),h=eh(t,XA(e),null,e.onPush?64:16,t[20],l,i,u,r||null,null);return o.firstCreatePass&&(Cf(Fu(l,t),o,e.type),nT(o,l),iT(l,t.length,1)),$f(t,h),t[20]=h}(u,this.componentDef,p,o,l);if(u)if(i)Ef(l,u,["ng-version",O4.full]);else{const{attrs:y,classes:v}=function iz(n){const e=[],t=[];let i=1,s=2;for(;i<n.length;){let r=n[i];if("string"==typeof r)2===s?""!==r&&e.push(r,n[++i]):8===s&&t.push(r);else{if(!ks(s))break;s=r}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&Ef(l,u,y),v&&v.length>0&&qy(l,u,v.join(" "))}if(_=iy(f,20),void 0!==t){const y=_.projection=[];for(let v=0;v<this.ngContentSelectors.length;v++){const b=t[v];y.push(null!=b?Array.from(b):null)}}g=function TT(n,e,t,i,s){const r=t[1],o=function Ez(n,e,t){const i=Ln();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),sT(n,i,e,zl(n,e,1,null),t));const s=ku(e,n,i.directiveStart,i);ri(s,e);const r=ds(i,e);return r&&ri(r,e),s}(r,t,e);if(i.components.push(o),n[8]=o,s&&s.forEach(l=>l(o,e)),e.contentQueries){const l=Ln();e.contentQueries(1,o,l.directiveStart)}const a=Ln();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Mo(a.index),eT(t[1],a,0,a.directiveStart,a.directiveEnd,e),tT(e,o)),o}(m,this.componentDef,p,d,[lG]),th(f,p,null)}finally{bf()}return new U4(this.componentType,g,cc(_,p),p,_)}}class U4 extends class A4{}{constructor(e,t,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.instance=t,this.hostView=this.changeDetectorRef=new N4(s),this.componentType=e}get injector(){return new Il(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Gr{}class xD{}const uc=new Map;class ED extends Gr{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vD(this);const i=cs(e);this._bootstrapComponents=cr(i.bootstrap),this._r3Injector=mT(e,t,[{provide:Gr,useValue:this},{provide:lc,useValue:this.componentFactoryResolver}],Pt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Nn.THROW_IF_NOT_FOUND,i=$e.Default){return e===Nn||e===Gr||e===mv?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Wv extends xD{constructor(e){super(),this.moduleType=e,null!==cs(e)&&function H4(n){const e=new Set;!function t(i){const s=cs(i,!0),r=s.id;null!==r&&(function MD(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Pt(e)} vs ${Pt(e.name)}`)}(r,uc.get(r),i),uc.set(r,i));const o=cr(s.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new ED(this.moduleType,e)}}function rp(n,e,t,i){return function AD(n,e,t,i,s,r){const o=e+t;return oi(n,o,s)?hr(n,o+1,r?i.call(r,s):i(s)):fh(n,o+1)}(ie(),xi(),n,e,t,i)}function fh(n,e){const t=n[e];return t===Ze?void 0:t}function TD(n,e,t,i,s,r,o){const a=e+t;return function fa(n,e,t,i){const s=oi(n,e,t);return oi(n,e+1,i)||s}(n,a,s,r)?hr(n,a+2,o?i.call(o,s,r):i(s,r)):fh(n,a+2)}function jv(n){return e=>{setTimeout(n,void 0,e)}}const gt=class tj extends sr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var s,r,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const h=e;a=null===(s=h.next)||void 0===s?void 0:s.bind(h),l=null===(r=h.error)||void 0===r?void 0:r.bind(h),c=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(l=jv(l),a&&(a=jv(a)),c&&(c=jv(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof Oi&&e.add(u),u}};function nj(){return this._results[$l()]()}class $v{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=$l(),i=$v.prototype;i[t]||(i[t]=nj)}get changes(){return this._changes||(this._changes=new gt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const s=fs(e);(this._changesDetected=!function p3(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let s=n[i],r=e[i];if(t&&(s=t(s),r=t(r)),r!==s)return!1}return!0}(i._results,s,t))&&(i._results=s,i.length=s.length,i.last=s[this.length-1],i.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let pr=(()=>{class n{}return n.__NG_ELEMENT_ID__=rj,n})();const ij=pr,sj=class extends ij{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=eh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(i[19]=r.createEmbeddedView(t)),th(t,i,e),new dh(i)}};function rj(){return op(Ln(),ie())}function op(n,e){return 4&n.type?new sj(e,n,cc(n,e)):null}let js=(()=>{class n{}return n.__NG_ELEMENT_ID__=oj,n})();function oj(){return ND(Ln(),ie())}const aj=js,LD=class extends aj{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return cc(this._hostTNode,this._hostLView)}get injector(){return new Il(this._hostTNode,this._hostLView)}get parentInjector(){const e=Tf(this._hostTNode,this._hostLView);if(MS(e)){const t=Rl(e,this._hostLView),i=Dl(e);return new Il(t[1].data[i+8],t)}return new Il(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=OD(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const s=e.createEmbeddedView(t||{});return this.insert(s,i),s}createComponent(e,t,i,s,r){const o=e&&!function Vu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const h=t||{};a=h.index,i=h.injector,s=h.projectableNodes,r=h.ngModuleRef}const l=o?e:new Gv(ni(e)),c=i||this.parentInjector;if(!r&&null==l.ngModule){const d=(o?c:this.parentInjector).get(Gr,null);d&&(r=d)}const u=l.create(c,s,void 0,r);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,s=i[1];if(function NV(n){return Ns(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const h=i[3],d=new LD(h,h[6],h[3]);d.detach(d.indexOf(e))}}const r=this._adjustIndex(t),o=this._lContainer;!function BH(n,e,t,i){const s=10+i,r=t.length;i>0&&(t[s-1][4]=e),i<r-10?(e[4]=t[s],PS(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function UH(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(s,i,o,r);const a=jy(r,o),l=i[11],c=Uf(l,o[7]);return null!==c&&function NH(n,e,t,i,s,r){i[0]=s,i[6]=e,Qu(n,i,t,1,s,r)}(s,o[6],l,i,c,a),e.attachToViewContainerRef(),PS(qv(o),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=OD(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=zy(this._lContainer,t);i&&(Rf(qv(this._lContainer),t),gA(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=zy(this._lContainer,t);return i&&null!=Rf(qv(this._lContainer),t)?new dh(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function OD(n){return n[8]}function qv(n){return n[8]||(n[8]=[])}function ND(n,e){let t;const i=e[n.index];if(Ns(i))t=i;else{let s;if(8&n.type)s=En(i);else{const r=e[11];s=r.createComment("");const o=ds(n,e);da(r,Uf(r,o),s,function GH(n,e){return cn(n)?n.nextSibling(e):e.nextSibling}(r,o),!1)}e[n.index]=t=rT(i,e,s,n),$f(e,t)}return new LD(t,n,e)}class Xv{constructor(e){this.queryList=e,this.matches=null}clone(){return new Xv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yv{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let r=0;r<i;r++){const o=t.getByIndex(r);s.push(this.queries[o.indexInDeclarationView].clone())}return new Yv(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==HD(e,t).matches&&this.queries[t].setDirty()}}class FD{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Kv{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const s=null!==t?t.length:0,r=this.getByIndex(i).embeddedTView(e,s);r&&(r.indexInDeclarationView=i,null!==t?t.push(r):t=[r])}return null!==t?new Kv(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Zv{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Zv(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const r=i[s];this.matchTNodeWithReadOption(e,t,uj(t,r)),this.matchTNodeWithReadOption(e,t,Df(t,e,r,!1,!1))}else i===pr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Df(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===kn||s===js||s===pr&&4&t.type)this.addMatch(t.index,-2);else{const r=Df(t,e,s,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function uj(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function dj(n,e,t,i){return-1===t?function hj(n,e){return 11&n.type?cc(n,e):4&n.type?op(n,e):null}(e,n):-2===t?function fj(n,e,t){return t===kn?cc(e,n):t===pr?op(e,n):t===js?ND(e,n):void 0}(n,e,i):ku(n,n[1],t,e)}function kD(n,e,t,i){const s=e[19].queries[i];if(null===s.matches){const r=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:dj(e,r[c],o[l+1],t.metadata.read))}s.matches=a}return s.matches}function Jv(n,e,t,i){const s=n.queries.getByIndex(t),r=s.matches;if(null!==r){const o=kD(n,e,s,t);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)i.push(o[a/2]);else{const c=r[a+1],u=e[-l];for(let h=10;h<u.length;h++){const d=u[h];d[17]===d[3]&&Jv(d[1],d,c,i)}if(null!==u[9]){const h=u[9];for(let d=0;d<h.length;d++){const f=h[d];Jv(f[1],f,c,i)}}}}}return i}function ap(n){const e=ie(),t=At(),i=fS();uy(i+1);const s=HD(t,i);if(n.dirty&&aS(e)===(2==(2&s.metadata.flags))){if(null===s.matches)n.reset([]);else{const r=s.crossesNgTemplate?Jv(t,e,i,[]):kD(t,e,s,i);n.reset(r,R4),n.notifyOnChanges()}return!0}return!1}function BD(n,e,t){const i=At();i.firstCreatePass&&(function VD(n,e,t){null===n.queries&&(n.queries=new Kv),n.queries.track(new Zv(e,t))}(i,new FD(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function UD(n,e,t){const i=new $v(4==(4&t));ZA(n,e,i,i.destroy),null===e[19]&&(e[19]=new Yv),e[19].queries.push(new Xv(i))}(i,ie(),e)}function HD(n,e){return n.queries.getByIndex(e)}function e0(n,e){return op(n,e)}function hp(...n){}const a0=new nt("Application Initializer");let l0=(()=>{class n{constructor(t){this.appInits=t,this.resolve=hp,this.reject=hp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const r=this.appInits[s]();if(rh(r))t.push(r);else if(Pv(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(s=>{this.reject(s)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(pe(a0,8))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gh=new nt("AppId",{providedIn:"root",factory:function r1(){return`${c0()}${c0()}${c0()}`}});function c0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const o1=new nt("Platform Initializer"),dc=new nt("Platform ID"),a1=new nt("appBootstrapListener");let l1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const Co=new nt("LocaleId",{providedIn:"root",factory:()=>T3(Co,$e.Optional|$e.SkipSelf)||function Pj(){return"undefined"!=typeof $localize&&$localize.locale||Qf}()});class Oj{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let c1=(()=>{class n{compileModuleSync(t){return new Wv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),r=cr(cs(t).declarations).reduce((o,a)=>{const l=ni(a);return l&&o.push(new Gv(l)),o},[]);return new Oj(i,r)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fj=(()=>Promise.resolve(0))();function u0(n){"undefined"==typeof Zone?Fj.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class rn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gt(!1),this.onMicrotaskEmpty=new gt(!1),this.onStable=new gt(!1),this.onError=new gt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&t,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function kj(){let n=Nt.requestAnimationFrame,e=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Vj(n){const e=()=>{!function Uj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Nt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,d0(n),n.isCheckStableRunning=!0,h0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),d0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,s,r,o,a)=>{try{return u1(n),t.invokeTask(s,r,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||n.shouldCoalesceRunChangeDetection)&&e(),h1(n)}},onInvoke:(t,i,s,r,o,a,l)=>{try{return u1(n),t.invoke(s,r,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),h1(n)}},onHasTask:(t,i,s,r)=>{t.hasTask(s,r),i===s&&("microTask"==r.change?(n._hasPendingMicrotasks=r.microTask,d0(n),h0(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,i,s,r)=>(t.handleError(s,r),n.runOutsideAngular(()=>n.onError.emit(r)),!1)})}(s)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,e,Bj,hp,hp);try{return r.runTask(o,t,i)}finally{r.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Bj={};function h0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function d0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function u1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function h1(n){n._nesting--,h0(n)}class Hj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gt,this.onMicrotaskEmpty=new gt,this.onStable=new gt,this.onError=new gt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,s){return e.apply(t,i)}}let f0=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rn.assertNotInAngularZone(),u0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())u0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:s})}whenStable(t,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,s){return[]}}return n.\u0275fac=function(t){return new(t||n)(pe(rn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),d1=(()=>{class n{constructor(){this._applications=new Map,p0.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return p0.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();class zj{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let $s,p0=new zj;const f1=new nt("AllowMultipleToken");class p1{constructor(e,t){this.name=e,this.token=t}}function m1(n,e,t=[]){const i=`Platform: ${e}`,s=new nt(i);return(r=[])=>{let o=g1();if(!o||o.injector.get(f1,!1))if(n)n(t.concat(r).concat({provide:s,useValue:!0}));else{const a=t.concat(r).concat({provide:s,useValue:!0},{provide:gv,useValue:"platform"});!function $j(n){if($s&&!$s.destroyed&&!$s.injector.get(f1,!1))throw new Ae(400,"");$s=n.get(_1);const e=n.get(o1,null);e&&e.forEach(t=>t())}(Nn.create({providers:a,name:i}))}return function qj(n){const e=g1();if(!e)throw new Ae(401,"");return e}()}}function g1(){return $s&&!$s.destroyed?$s:null}let _1=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function Xj(n,e){let t;return t="noop"===n?new Hj:("zone.js"===n?void 0:n)||new rn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:rn,useValue:a}];return a.run(()=>{const c=Nn.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),h=u.injector.get(Zu,null);if(!h)throw new Ae(402,"");return a.runOutsideAngular(()=>{const d=a.onError.subscribe({next:f=>{h.handleError(f)}});u.onDestroy(()=>{m0(this._modules,u),d.unsubscribe()})}),function Yj(n,e,t){try{const i=t();return rh(i)?i.catch(s=>{throw e.runOutsideAngular(()=>n.handleError(s)),s}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(h,a,()=>{const d=u.injector.get(l0);return d.runInitializers(),d.donePromise.then(()=>(function IW(n){Wi(n,"Expected localeId to be defined"),"string"==typeof n&&($C=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Co,Qf)||Qf),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const s=y1({},i);return function Wj(n,e,t){const i=new Wv(t);return Promise.resolve(i)}(0,0,t).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(t){const i=t.injector.get(dp);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new Ae(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(pe(Nn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();function y1(n,e){return Array.isArray(e)?e.reduce(y1,n):Object.assign(Object.assign({},n),e)}let dp=(()=>{class n{constructor(t,i,s,r,o){this._zone=t,this._injector=i,this._exceptionHandler=s,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new ln(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new ln(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{rn.assertNotInAngularZone(),u0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{rn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}});this.isStable=jE(a,l.pipe(function tV(n={}){const{connector:e=(()=>new sr),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=n;return r=>{let o,a,l,c=0,u=!1,h=!1;const d=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{d(),o=l=void 0,u=h=!1},p=()=>{const g=o;f(),null==g||g.unsubscribe()};return Gn((g,_)=>{c++,!h&&!u&&d();const m=l=null!=l?l:e();_.add(()=>{c--,0===c&&!h&&!u&&(a=U_(p,s))}),m.subscribe(_),!o&&c>0&&(o=new Au({next:y=>m.next(y),error:y=>{h=!0,d(),a=U_(f,t,y),m.error(y)},complete:()=>{u=!0,d(),a=U_(f,i),m.complete()}}),ls(g).subscribe(o))})(r)}}()))}bootstrap(t,i){if(!this._initStatus.done)throw new Ae(405,"");let s;s=t instanceof _D?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(s.componentType);const r=function jj(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Gr),a=s.create(Nn.NULL,[],i||s.selector,r),l=a.location.nativeElement,c=a.injector.get(f0,null),u=c&&a.injector.get(d1);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),m0(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Ae(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;m0(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(a1,[]).concat(this._bootstrapListeners).forEach(s=>s(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(pe(rn),pe(Nn),pe(Zu),pe(lc),pe(l0))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let b1=!0,fp=(()=>{class n{}return n.__NG_ELEMENT_ID__=Jj,n})();function Jj(n){return function Qj(n,e,t){if(pf(n)&&!t){const i=$i(n.index,e);return new dh(i,i)}return 47&n.type?new dh(e[16],e):null}(Ln(),ie(),16==(16&n))}class S1{constructor(){}supports(e){return ih(e)}create(e){return new r5(e)}}const s5=(n,e)=>e;class r5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||s5}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,s=0,r=null;for(;t||i;){const o=!i||t&&t.currentIndex<T1(i,s,r)?t:i,a=T1(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)s++;else{r||(r=[]);const c=a-s,u=l-s;if(c!=u){for(let d=0;d<c;d++){const f=d<r.length?r[d]:r[d]=0,p=f+d;u<=p&&p<c&&(r[d]=f+1)}r[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ih(e))throw new Ae(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,r,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)r=e[a],o=this._trackByFn(a,r),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,r,o,a)),Object.is(t.item,r)||this._addIdentityChange(t,r)):(t=this._mismatch(t,r,o,a),i=!0),t=t._next}else s=0,function yG(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[$l()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,s),i=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,s){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,s)):e=this._addAfter(new o5(t,i),r,s),e}_verifyReinsertion(e,t,i,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?e=this._reinsertAfter(r,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,r=e._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new A1),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new A1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class o5{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class a5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class A1{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new a5,this.map.set(t,i)),i.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function T1(n,e,t){const i=n.previousIndex;if(null===i)return i;let s=0;return t&&i<t.length&&(s=t[i]),i+e+s}class C1{constructor(){}supports(e){return e instanceof Map||Mv(e)}create(){return new l5}}class l5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Mv(e)))throw new Ae(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(s,i);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,t);const r=s._prev,o=s._next;return r&&(r._next=o),o&&(o._prev=r),s._next=null,s._prev=null,s}const i=new c5(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class c5{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function D1(){return new gp([new S1])}let gp=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const s=i.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||D1()),deps:[[n,new ju,new Eo]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(null!=i)return i;throw new Ae(901,"")}}return n.\u0275prov=Ie({token:n,providedIn:"root",factory:D1}),n})();function R1(){return new _h([new C1])}let _h=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const s=i.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||R1()),deps:[[n,new ju,new Eo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Ae(901,"")}}return n.\u0275prov=Ie({token:n,providedIn:"root",factory:R1}),n})();const d5=m1(null,"core",[{provide:dc,useValue:"unknown"},{provide:_1,deps:[Nn]},{provide:d1,deps:[]},{provide:l1,deps:[]}]);let f5=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(pe(dp))},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({}),n})(),_p=null;function mr(){return _p}const Jn=new nt("DocumentToken");let ya=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:function(){return function _5(){return pe(I1)}()},providedIn:"platform"}),n})();const y5=new nt("Location Initialized");let I1=(()=>{class n extends ya{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mr().getBaseHref(this._doc)}onPopState(t){const i=mr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=mr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,s){P1()?this._history.pushState(t,i,s):this.location.hash=s}replaceState(t,i,s){P1()?this._history.replaceState(t,i,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(pe(Jn))},n.\u0275prov=Ie({token:n,factory:function(){return function v5(){return new I1(pe(Jn))}()},providedIn:"platform"}),n})();function P1(){return!!window.history.pushState}function b0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function L1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wr(n){return n&&"?"!==n[0]?"?"+n:n}let fc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:function(){return function b5(n){const e=pe(Jn).location;return new O1(pe(ya),e&&e.origin||"")}()},providedIn:"root"}),n})();const x0=new nt("appBaseHref");let O1=(()=>{class n extends fc{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return b0(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Wr(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,r){const o=this.prepareExternalUrl(s+Wr(r));this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){const o=this.prepareExternalUrl(s+Wr(r));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(pe(ya),pe(x0,8))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),x5=(()=>{class n extends fc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=b0(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,s,r){let o=this.prepareExternalUrl(s+Wr(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){let o=this.prepareExternalUrl(s+Wr(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(pe(ya),pe(x0,8))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),M0=(()=>{class n{constructor(t,i){this._subject=new gt,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=L1(N1(s)),this._platformStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Wr(i))}normalize(t){return n.stripTrailingSlash(function w5(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,N1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._platformStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wr(i)),s)}replaceState(t,i="",s=null){this._platformStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wr(i)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformStrategy).historyGo)||void 0===s||s.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}}return n.normalizeQueryParams=Wr,n.joinWithSlash=b0,n.stripTrailingSlash=L1,n.\u0275fac=function(t){return new(t||n)(pe(fc),pe(ya))},n.\u0275prov=Ie({token:n,factory:function(){return function M5(){return new M0(pe(fc),pe(ya))}()},providedIn:"root"}),n})();function N1(n){return n.replace(/\/index.html$/,"")}function W1(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[s,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===e)return decodeURIComponent(r)}return null}let j1=(()=>{class n{constructor(t,i,s,r){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=s,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(ih(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Pt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(J(gp),J(_h),J(kn),J(Ws))},n.\u0275dir=ze({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class a8{constructor(e,t,i,s){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let P0=(()=>{class n{constructor(t,i,s){this._viewContainer=t,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new a8(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),$1(a,s)}});for(let s=0,r=i.length;s<r;s++){const a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{$1(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(J(js),J(pr),J(gp))},n.\u0275dir=ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function $1(n,e){n.context.$implicit=e.item}let L0=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new l8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){q1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){q1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(J(js),J(pr))},n.\u0275dir=ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class l8{constructor(){this.$implicit=null,this.ngIf=null}}function q1(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Pt(e)}'.`)}let K1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({}),n})();const Z1="browser";function J1(n){return n===Z1}let B8=(()=>{class n{}return n.\u0275prov=Ie({token:n,providedIn:"root",factory:()=>new U8(pe(Jn),window)}),n})();class U8{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function V8(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(e)||r.querySelector(`[name="${e}"]`);if(o)return o}s=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Q1(this.window.history)||Q1(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Q1(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class eR{}class B0 extends class H8 extends class g5{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function m5(n){_p||(_p=n)}(new B0)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function z8(){return bh=bh||document.querySelector("base"),bh?bh.getAttribute("href"):null}();return null==t?null:function G8(n){Tp=Tp||document.createElement("a"),Tp.setAttribute("href",n);const e=Tp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){bh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return W1(document.cookie,e)}}let Tp,bh=null;const tR=new nt("TRANSITION_ID"),j8=[{provide:a0,useFactory:function W8(n,e,t){return()=>{t.get(l0).donePromise.then(()=>{const i=mr(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let r=0;r<s.length;r++)i.remove(s[r])})}},deps:[tR,Jn,Nn],multi:!0}];class U0{static init(){!function Gj(n){p0=n}(new U0)}addToWindow(e){Nt.getAngularTestability=(i,s=!0)=>{const r=e.findTestabilityInTree(i,s);if(null==r)throw new Error("Could not find testability for element.");return r},Nt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Nt.getAllAngularRootElements=()=>e.getAllRootElements(),Nt.frameworkStabilizers||(Nt.frameworkStabilizers=[]),Nt.frameworkStabilizers.push(i=>{const s=Nt.getAllAngularTestabilities();let r=s.length,o=!1;const a=function(l){o=o||l,r--,0==r&&i(o)};s.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:i?mr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let $8=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const Cp=new nt("EventManagerPlugins");let Dp=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}addGlobalEventListener(t,i,s){return this._findPluginFor(i).addGlobalEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const s=this._plugins;for(let r=0;r<s.length;r++){const o=s[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(pe(Cp),pe(rn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();class nR{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const s=mr().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,i)}}let iR=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),i.add(s))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),xh=(()=>{class n extends iR{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,s){t.forEach(r=>{const o=this._doc.createElement("style");o.textContent=r,s.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(sR),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,s)=>{this._addStylesToHost(t,s,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(sR))}}return n.\u0275fac=function(t){return new(t||n)(pe(Jn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();function sR(n){mr().remove(n)}const V0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},H0=/%COMP%/g;function Rp(n,e,t){for(let i=0;i<e.length;i++){let s=e[i];Array.isArray(s)?Rp(n,s,t):(s=s.replace(H0,n),t.push(s))}return t}function aR(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ip=(()=>{class n{constructor(t,i,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new z0(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Ps.Emulated:{let s=this.rendererByCompId.get(i.id);return s||(s=new J8(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,s)),s.applyToHost(t),s}case 1:case Ps.ShadowDom:return new Q8(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const s=Rp(i.id,i.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(pe(Dp),pe(xh),pe(gh))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();class z0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(V0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,s){if(s){t=s+":"+t;const r=V0[s];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const s=V0[i];s?e.removeAttributeNS(s,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,s){s&(Xi.DashCase|Xi.Important)?e.style.setProperty(t,i,s&Xi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Xi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,aR(i)):this.eventManager.addEventListener(e,t,aR(i))}}class J8 extends z0{constructor(e,t,i,s){super(e),this.component=i;const r=Rp(s+"-"+i.id,i.styles,[]);t.addStyles(r),this.contentAttr=function Y8(n){return"_ngcontent-%COMP%".replace(H0,n)}(s+"-"+i.id),this.hostAttr=function K8(n){return"_nghost-%COMP%".replace(H0,n)}(s+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Q8 extends z0{constructor(e,t,i,s){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=Rp(s.id,s.styles,[]);for(let o=0;o<r.length;o++){const a=document.createElement("style");a.textContent=r[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let e$=(()=>{class n extends nR{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}}return n.\u0275fac=function(t){return new(t||n)(pe(Jn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const cR=["alt","control","meta","shift"],n$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uR={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},i$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let s$=(()=>{class n extends nR{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,s){const r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=n._normalizeKey(i.pop());let o="";if(cR.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=r,0!=i.length||0===r.length)return null;const a={};return a.domEventName=s,a.fullKey=o,a}static getEventFullKey(t){let i="",s=function r$(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&uR.hasOwnProperty(e)&&(e=uR[e]))}return n$[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),cR.forEach(r=>{r!=s&&i$[r](t)&&(i+=r+".")}),i+=s,i}static eventCallback(t,i,s){return r=>{n.getEventFullKey(r)===t&&s.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(pe(Jn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const c$=m1(d5,"browser",[{provide:dc,useValue:Z1},{provide:o1,useValue:function o$(){B0.makeCurrent(),U0.init()},multi:!0},{provide:Jn,useFactory:function l$(){return function IV(n){ty=n}(document),document},deps:[]}]),u$=[{provide:gv,useValue:"root"},{provide:Zu,useFactory:function a$(){return new Zu},deps:[]},{provide:Cp,useClass:e$,multi:!0,deps:[Jn,rn,dc]},{provide:Cp,useClass:s$,multi:!0,deps:[Jn]},{provide:Ip,useClass:Ip,deps:[Dp,xh,gh]},{provide:ga,useExisting:Ip},{provide:iR,useExisting:xh},{provide:xh,useClass:xh,deps:[Jn]},{provide:f0,useClass:f0,deps:[rn]},{provide:Dp,useClass:Dp,deps:[Cp,rn]},{provide:eR,useClass:$8,deps:[]}];let hR=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:gh,useValue:t.appId},{provide:tR,useExisting:gh},j8]}}}return n.\u0275fac=function(t){return new(t||n)(pe(n,12))},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({providers:u$,imports:[K1,f5]}),n})();function tt(...n){return Kn(n,Cu(n))}"undefined"!=typeof window&&window;class _s extends sr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const{isArray:x$}=Array,{getPrototypeOf:M$,prototype:w$,keys:E$}=Object;function pR(n){if(1===n.length){const e=n[0];if(x$(e))return{args:e,keys:null};if(function S$(n){return n&&"object"==typeof n&&M$(n)===w$}(e)){const t=E$(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:A$}=Array;function W0(n){return It(e=>function T$(n,e){return A$(e)?n(...e):n(e)}(n,e))}function mR(n,e){return n.reduce((t,i,s)=>(t[i]=e[s],t),{})}function gR(n,e,t){n?Or(t,n,e):e()}function Pp(n,e){const t=et(n)?n:()=>n,i=s=>s.error(t());return new ln(e?s=>e.schedule(i,0,s):i)}const Lp=zn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function j0(...n){return function R$(){return Tu(1)}()(Kn(n,Cu(n)))}function _R(n){return new ln(e=>{ls(n()).subscribe(e)})}function yR(){return Gn((n,e)=>{let t=null;n._refCount++;const i=In(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,r=t;t=null,s&&(!r||s===r)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class I$ extends ln{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,TE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oi;const t=this.getSubject();e.add(this.source.subscribe(In(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oi.EMPTY)}return e}refCount(){return yR()(this)}}function va(n,e){return Gn((t,i)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&i.complete();t.subscribe(In(i,l=>{null==s||s.unsubscribe();let c=0;const u=r++;ls(n(l,u)).subscribe(s=In(i,h=>i.next(e?e(l,h,u,c++):h),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function Op(n){return n<=0?()=>Nr:Gn((e,t)=>{let i=0;e.subscribe(In(t,s=>{++i<=n&&(t.next(s),n<=i&&t.complete())}))})}function L$(n,e,t,i,s){return(r,o)=>{let a=t,l=e,c=0;r.subscribe(In(o,u=>{const h=c++;l=a?n(l,u,h):(a=!0,u),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function vR(n,e){return Gn(L$(n,e,arguments.length>=2,!0))}function ba(n,e){return Gn((t,i)=>{let s=0;t.subscribe(In(i,r=>n.call(e,r,s++)&&i.next(r)))})}function Ro(n){return Gn((e,t)=>{let r,i=null,s=!1;i=e.subscribe(In(t,void 0,void 0,o=>{r=ls(n(o,Ro(n)(e))),i?(i.unsubscribe(),i=null,r.subscribe(t)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(t))})}function pc(n,e){return et(e)?Pn(n,e,1):Pn(n,1)}function $0(n){return n<=0?()=>Nr:Gn((e,t)=>{let i=[];e.subscribe(In(t,s=>{i.push(s),n<i.length&&i.shift()},()=>{for(const s of i)t.next(s);t.complete()},void 0,()=>{i=null}))})}function bR(n=O$){return Gn((e,t)=>{let i=!1;e.subscribe(In(t,s=>{i=!0,t.next(s)},()=>i?t.complete():t.error(n())))})}function O$(){return new Lp}function xR(n){return Gn((e,t)=>{let i=!1;e.subscribe(In(t,s=>{i=!0,t.next(s)},()=>{i||t.next(n),t.complete()}))})}function mc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ba((s,r)=>n(s,r,i)):go,Op(1),t?xR(e):bR(()=>new Lp))}function Zi(n,e,t){const i=et(n)||e||t?{next:n,error:e,complete:t}:n;return i?Gn((s,r)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;s.subscribe(In(r,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),r.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),r.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),r.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):go}class $r{constructor(e,t){this.id=e,this.url=t}}class q0 extends $r{constructor(e,t,i="imperative",s=null){super(e,t),this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mh extends $r{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class MR extends $r{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class k$ extends $r{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class B$ extends $r{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U$ extends $r{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V$ extends $r{constructor(e,t,i,s,r){super(e,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class H$ extends $r{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z$ extends $r{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wR{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ER{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class G${constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W${constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j${constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $${constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SR{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ft="primary";class q${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gc(n){return new q$(n)}const AR="ngNavigationCancelingError";function X0(n){const e=Error("NavigationCancelingError: "+n);return e[AR]=!0,e}function Y$(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=n[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function gr(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let r=0;r<t.length;r++)if(s=t[r],!TR(n[s],e[s]))return!1;return!0}function TR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((s,r)=>i[r]===s)}return n===e}function CR(n){return Array.prototype.concat.apply([],n)}function DR(n){return n.length>0?n[n.length-1]:null}function Qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _r(n){return Pv(n)?n:rh(n)?Kn(Promise.resolve(n)):tt(n)}const J$={exact:function PR(n,e,t){if(!Ma(n.segments,e.segments)||!Np(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!PR(n.children[i],e.children[i],t))return!1;return!0},subset:LR},RR={exact:function Q$(n,e){return gr(n,e)},subset:function e6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TR(n[t],e[t]))},ignored:()=>!0};function IR(n,e,t){return J$[t.paths](n.root,e.root,t.matrixParams)&&RR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function LR(n,e,t){return OR(n,e,e.segments,t)}function OR(n,e,t,i){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Ma(s,t)||e.hasChildren()||!Np(s,t,i))}if(n.segments.length===t.length){if(!Ma(n.segments,t)||!Np(n.segments,t,i))return!1;for(const s in e.children)if(!n.children[s]||!LR(n.children[s],e.children[s],i))return!1;return!0}{const s=t.slice(0,n.segments.length),r=t.slice(n.segments.length);return!!(Ma(n.segments,s)&&Np(n.segments,s,i)&&n.children[ft])&&OR(n.children[ft],e,r,i)}}function Np(n,e,t){return e.every((i,s)=>RR[t](n[s].parameters,i.parameters))}class xa{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gc(this.queryParams)),this._queryParamMap}toString(){return i6.serialize(this)}}class bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qn(t,(i,s)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fp(this)}}class wh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gc(this.parameters)),this._parameterMap}toString(){return UR(this)}}function Ma(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class NR{}class FR{parse(e){const t=new d6(e);return new xa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Eh(e.root,!0)}`,i=function o6(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(s=>`${kp(t)}=${kp(s)}`).join("&"):`${kp(t)}=${kp(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function s6(n){return encodeURI(n)}(e.fragment)}`:""}`}}const i6=new FR;function Fp(n){return n.segments.map(e=>UR(e)).join("/")}function Eh(n,e){if(!n.hasChildren())return Fp(n);if(e){const t=n.children[ft]?Eh(n.children[ft],!1):"",i=[];return Qn(n.children,(s,r)=>{r!==ft&&i.push(`${r}:${Eh(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function n6(n,e){let t=[];return Qn(n.children,(i,s)=>{s===ft&&(t=t.concat(e(i,s)))}),Qn(n.children,(i,s)=>{s!==ft&&(t=t.concat(e(i,s)))}),t}(n,(i,s)=>s===ft?[Eh(n.children[ft],!1)]:[`${s}:${Eh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ft]?`${Fp(n)}/${t[0]}`:`${Fp(n)}/(${t.join("//")})`}}function kR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kp(n){return kR(n).replace(/%3B/gi,";")}function Y0(n){return kR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bp(n){return decodeURIComponent(n)}function BR(n){return Bp(n.replace(/\+/g,"%20"))}function UR(n){return`${Y0(n.path)}${function r6(n){return Object.keys(n).map(e=>`;${Y0(e)}=${Y0(n[e])}`).join("")}(n.parameters)}`}const a6=/^[^\/()?;=#]+/;function Up(n){const e=n.match(a6);return e?e[0]:""}const l6=/^[^=?&#]+/,u6=/^[^&#]+/;class d6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bt([],{}):new bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ft]=new bt(e,t)),i}parseSegment(){const e=Up(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new wh(Bp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Up(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=Up(this.remaining);s&&(i=s,this.capture(i))}e[Bp(t)]=Bp(i)}parseQueryParam(e){const t=function c6(n){const e=n.match(l6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function h6(n){const e=n.match(u6);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=BR(t),r=BR(i);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(r)}else e[s]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Up(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let r;i.indexOf(":")>-1?(r=i.substr(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=ft);const o=this.parseChildren();t[r]=1===Object.keys(o).length?o[ft]:new bt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class VR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=K0(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=K0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Z0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Z0(e,this._root).map(t=>t.value)}}function K0(n,e){if(n===e.value)return e;for(const t of e.children){const i=K0(n,t);if(i)return i}return null}function Z0(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Z0(n,t);if(i.length)return i.unshift(e),i}return[]}class qr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _c(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class HR extends VR{constructor(e,t){super(e),this.snapshot=t,J0(this,e)}toString(){return this.snapshot.toString()}}function zR(n,e){const t=function f6(n,e){const o=new Vp([],{},{},"",{},ft,e,null,n.root,-1,{});return new WR("",new qr(o,[]))}(n,e),i=new _s([new wh("",{})]),s=new _s({}),r=new _s({}),o=new _s({}),a=new _s(""),l=new wa(i,s,o,a,r,ft,e,t.root);return l.snapshot=t.root,new HR(new qr(l,[]),t)}class wa{constructor(e,t,i,s,r,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(It(e=>gc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(It(e=>gc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function GR(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const s=t[i],r=t[i-1];if(s.routeConfig&&""===s.routeConfig.path)i--;else{if(r.component)break;i--}}return function p6(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Vp{constructor(e,t,i,s,r,o,a,l,c,u,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class WR extends VR{constructor(e,t){super(t),this.url=e,J0(this,t)}toString(){return jR(this._root)}}function J0(n,e){e.value._routerState=n,e.children.forEach(t=>J0(n,t))}function jR(n){const e=n.children.length>0?` { ${n.children.map(jR).join(", ")} } `:"";return`${n.value}${e}`}function Q0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gr(e.params,t.params)||n.params.next(t.params),function K$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eb(n,e){const t=gr(n.params,e.params)&&function t6(n,e){return Ma(n,e)&&n.every((t,i)=>gr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eb(n.parent,e.parent))}function Sh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const s=function g6(n,e,t){return e.children.map(i=>{for(const s of t.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return Sh(n,i,s);return Sh(n,i)})}(n,e,t);return new qr(i,s)}{if(n.shouldAttach(e.value)){const r=n.retrieve(e.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Sh(n,a)),o}}const i=function _6(n){return new wa(new _s(n.url),new _s(n.params),new _s(n.queryParams),new _s(n.fragment),new _s(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(r=>Sh(n,r));return new qr(i,s)}}function Hp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ah(n){return"object"==typeof n&&null!=n&&n.outlets}function tb(n,e,t,i,s){let r={};if(i&&Qn(i,(a,l)=>{r[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new xa(t,r,s);const o=$R(n,e,t);return new xa(o,r,s)}function $R(n,e,t){const i={};return Qn(n.children,(s,r)=>{i[r]=s===e?t:$R(s,e,t)}),new bt(n.segments,i)}class qR{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Hp(i[0]))throw new Error("Root segment cannot have matrix parameters");const s=i.find(Ah);if(s&&s!==DR(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nb{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function XR(n,e,t){if(n||(n=new bt([],{})),0===n.segments.length&&n.hasChildren())return zp(n,e,t);const i=function w6(n,e,t){let i=0,s=e;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=t.length)return r;const o=n.segments[s],a=t[i];if(Ah(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(s>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!KR(l,c,o))return r;i+=2}else{if(!KR(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(n,e,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const r=new bt(n.segments.slice(0,i.pathIndex),{});return r.children[ft]=new bt(n.segments.slice(i.pathIndex),n.children),zp(r,0,s)}return i.match&&0===s.length?new bt(n.segments,{}):i.match&&!n.hasChildren()?ib(n,e,t):i.match?zp(n,0,s):ib(n,e,t)}function zp(n,e,t){if(0===t.length)return new bt(n.segments,{});{const i=function M6(n){return Ah(n[0])?n[0].outlets:{[ft]:n}}(t),s={};return Qn(i,(r,o)=>{"string"==typeof r&&(r=[r]),null!==r&&(s[o]=XR(n.children[o],e,r))}),Qn(n.children,(r,o)=>{void 0===i[o]&&(s[o]=r)}),new bt(n.segments,s)}}function ib(n,e,t){const i=n.segments.slice(0,e);let s=0;for(;s<t.length;){const r=t[s];if(Ah(r)){const l=E6(r.outlets);return new bt(i,l)}if(0===s&&Hp(t[0])){i.push(new wh(n.segments[e].path,YR(t[0]))),s++;continue}const o=Ah(r)?r.outlets[ft]:`${r}`,a=s<t.length-1?t[s+1]:null;o&&a&&Hp(a)?(i.push(new wh(o,YR(a))),s+=2):(i.push(new wh(o,{})),s++)}return new bt(i,{})}function E6(n){const e={};return Qn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=ib(new bt([],{}),0,t))}),e}function YR(n){const e={};return Qn(n,(t,i)=>e[i]=`${t}`),e}function KR(n,e,t){return n==t.path&&gr(e,t.parameters)}class A6{constructor(e,t,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Q0(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const s=_c(t);e.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Qn(s,(r,o)=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=_c(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=_c(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const s=_c(t);e.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new $$(r.value.snapshot))}),e.children.length&&this.forwardEvent(new W$(e.value.snapshot))}activateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(Q0(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Q0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function T6(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=s,o.resolver=l,o.outlet&&o.outlet.activateWith(s,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class sb{constructor(e,t){this.routes=e,this.module=t}}function Io(n){return"function"==typeof n}function Ea(n){return n instanceof xa}const Th=Symbol("INITIAL_VALUE");function Ch(){return va(n=>function C$(...n){const e=Cu(n),t=HE(n),{args:i,keys:s}=pR(n);if(0===i.length)return Kn([],e);const r=new ln(function D$(n,e,t=go){return i=>{gR(e,()=>{const{length:s}=n,r=new Array(s);let o=s,a=s;for(let l=0;l<s;l++)gR(e,()=>{const c=Kn(n[l],e);let u=!1;c.subscribe(In(i,h=>{r[l]=h,u||(u=!0,a--),a||i.next(t(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,s?o=>mR(s,o):go));return t?r.pipe(W0(t)):r}(n.map(e=>e.pipe(Op(1),function P$(...n){const e=Cu(n);return Gn((t,i)=>{(e?j0(n,t,e):j0(n,t)).subscribe(i)})}(Th)))).pipe(vR((e,t)=>{let i=!1;return t.reduce((s,r,o)=>s!==Th?s:(r===Th&&(i=!0),i||!1!==r&&o!==t.length-1&&!Ea(r)?s:r),e)},Th),ba(e=>e!==Th),It(e=>Ea(e)?e:!0===e),Op(1)))}class L6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dh,this.attachRef=null}}class Dh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new L6,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let rb=(()=>{class n{constructor(t,i,s,r,o){this.parentContexts=t,this.location=i,this.resolver=s,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new gt,this.deactivateEvents=new gt,this.attachEvents=new gt,this.detachEvents=new gt,this.name=r||ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new O6(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(J(Dh),J(js),J(lc),function Bu(n){return function l3(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let s=0;for(;s<i;){const r=t[s];if(bS(r))break;if(0===r)s+=2;else if("number"==typeof r)for(s++;s<i&&"string"==typeof t[s];)s++;else{if(r===e)return t[s+1];s+=2}}}return null}(Ln(),n)}("name"),J(fp))},n.\u0275dir=ze({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class O6{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===wa?this.route:e===Dh?this.childContexts:this.parent.get(e,t)}}let ZR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ls({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&Hs(0,"router-outlet")},directives:[rb],encapsulation:2}),n})();function JR(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];N6(i,F6(e,i))}}function N6(n,e){n.children&&JR(n.children,e)}function F6(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ob(n){const e=n.children&&n.children.map(ob),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ft&&(t.component=ZR),t}function ys(n){return n.outlet||ft}function QR(n,e){const t=n.filter(i=>ys(i)===e);return t.push(...n.filter(i=>ys(i)!==e)),t}const eI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gp(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},eI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Y$)(t,n,e);if(!r)return Object.assign({},eI);const o={};Qn(r.posParams,(l,c)=>{o[c]=l.path});const a=r.consumed.length>0?Object.assign(Object.assign({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function Wp(n,e,t,i,s="corrected"){if(t.length>0&&function U6(n,e,t){return t.some(i=>jp(n,e,i)&&ys(i)!==ft)}(n,t,i)){const o=new bt(e,function B6(n,e,t,i){const s={};s[ft]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const r of t)if(""===r.path&&ys(r)!==ft){const o=new bt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,s[ys(r)]=o}return s}(n,e,i,new bt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function V6(n,e,t){return t.some(i=>jp(n,e,i))}(n,t,i)){const o=new bt(n.segments,function k6(n,e,t,i,s,r){const o={};for(const a of i)if(jp(n,t,a)&&!s[ys(a)]){const l=new bt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===r?n.segments.length:e.length,o[ys(a)]=l}return Object.assign(Object.assign({},s),o)}(n,e,t,i,n.children,s));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new bt(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function jp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function tI(n,e,t,i){return!!(ys(n)===i||i!==ft&&jp(e,t,n))&&("**"===n.path||Gp(e,n,t).matched)}function nI(n,e,t){return 0===e.length&&!n.children[t]}class $p{constructor(e){this.segmentGroup=e||null}}class iI{constructor(e){this.urlTree=e}}function Rh(n){return Pp(new $p(n))}function sI(n){return Pp(new iI(n))}class W6{constructor(e,t,i,s,r){this.configLoader=t,this.urlSerializer=i,this.urlTree=s,this.config=r,this.allowRedirects=!0,this.ngModule=e.get(Gr)}apply(){const e=Wp(this.urlTree.root,[],[],this.config).segmentGroup,t=new bt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ft).pipe(It(r=>this.createUrlTree(ab(r),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ro(r=>{if(r instanceof iI)return this.allowRedirects=!1,this.match(r.urlTree);throw r instanceof $p?this.noMatchError(r):r}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ft).pipe(It(s=>this.createUrlTree(ab(s),e.queryParams,e.fragment))).pipe(Ro(s=>{throw s instanceof $p?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const s=e.segments.length>0?new bt([],{[ft]:e}):e;return new xa(s,t,i)}expandSegmentGroup(e,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(It(r=>new bt([],r))):this.expandSegment(e,i,t,i.segments,s,!0)}expandChildren(e,t,i){const s=[];for(const r of Object.keys(i.children))"primary"===r?s.unshift(r):s.push(r);return Kn(s).pipe(pc(r=>{const o=i.children[r],a=QR(t,r);return this.expandSegmentGroup(e,a,o,r).pipe(It(l=>({segment:l,outlet:r})))}),vR((r,o)=>(r[o.outlet]=o.segment,r),{}),function N$(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ba((s,r)=>n(s,r,i)):go,$0(1),t?xR(e):bR(()=>new Lp))}())}expandSegment(e,t,i,s,r,o){return Kn(i).pipe(pc(a=>this.expandSegmentAgainstRoute(e,t,i,a,s,r,o).pipe(Ro(c=>{if(c instanceof $p)return tt(null);throw c}))),mc(a=>!!a),Ro((a,l)=>{if(a instanceof Lp||"EmptyError"===a.name)return nI(t,s,r)?tt(new bt([],{})):Rh(t);throw a}))}expandSegmentAgainstRoute(e,t,i,s,r,o,a){return tI(s,t,r,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o):Rh(t):Rh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,s){const r=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?sI(r):this.lineralizeSegments(i,r).pipe(Pn(o=>{const a=new bt(o,{});return this.expandSegment(e,a,t,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Gp(t,s,r);if(!a)return Rh(t);const h=this.applyRedirectCommands(l,s.redirectTo,u);return s.redirectTo.startsWith("/")?sI(h):this.lineralizeSegments(s,h).pipe(Pn(d=>this.expandSegment(e,t,i,d.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,s,r){if("**"===i.path)return i.loadChildren?(i._loadedConfig?tt(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(It(h=>(i._loadedConfig=h,new bt(s,{})))):tt(new bt(s,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Gp(t,i,s);return o?this.getChildConfig(e,i,s).pipe(Pn(u=>{const h=u.module,d=u.routes,{segmentGroup:f,slicedSegments:p}=Wp(t,a,l,d),g=new bt(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(h,d,g).pipe(It(v=>new bt(a,v)));if(0===d.length&&0===p.length)return tt(new bt(a,{}));const _=ys(i)===r;return this.expandSegment(h,g,d,p,_?ft:r,!0).pipe(It(y=>new bt(a.concat(y.segments),y.children)))})):Rh(t)}getChildConfig(e,t,i){return t.children?tt(new sb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Pn(s=>s?this.configLoader.load(e.injector,t).pipe(It(r=>(t._loadedConfig=r,r))):function z6(n){return Pp(X0(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):tt(new sb([],e))}runCanLoadGuards(e,t,i){const s=t.canLoad;return s&&0!==s.length?tt(s.map(o=>{const a=e.get(o);let l;if(function D6(n){return n&&Io(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!Io(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return _r(l)})).pipe(Ch(),Zi(o=>{if(!Ea(o))return;const a=X0(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),It(o=>!0===o)):tt(!0)}lineralizeSegments(e,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return tt(i);if(s.numberOfChildren>1||!s.children[ft])return Pp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[ft]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,s){const r=this.createSegmentGroup(e,t.root,i,s);return new xa(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Qn(e,(s,r)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,s){const r=this.createSegments(e,t.segments,i,s);let o={};return Qn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,s)}),new bt(r,o)}createSegments(e,t,i,s){return t.map(r=>r.path.startsWith(":")?this.findPosParam(e,r,s):this.findOrReturn(r,i))}findPosParam(e,t,i){const s=i[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let i=0;for(const s of t){if(s.path===e.path)return t.splice(i),s;i++}return e}}function ab(n){const e={};for(const i of Object.keys(n.children)){const r=ab(n.children[i]);(r.segments.length>0||r.hasChildren())&&(e[i]=r)}return function j6(n){if(1===n.numberOfChildren&&n.children[ft]){const e=n.children[ft];return new bt(n.segments.concat(e.segments),e.children)}return n}(new bt(n.segments,e))}class rI{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qp{constructor(e,t){this.component=e,this.route=t}}function q6(n,e,t){const i=n._root;return Ih(i,e?e._root:null,t,[i.value])}function Xp(n,e,t){const i=function Y6(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Ih(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=_c(e);return n.children.forEach(o=>{(function K6(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const l=function Z6(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ma(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ma(n.url,e.url)||!gr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eb(n,e)||!gr(n.queryParams,e.queryParams);default:return!eb(n,e)}}(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new rI(i)):(r.data=o.data,r._resolvedData=o._resolvedData),Ih(n,e,r.component?a?a.children:null:t,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new qp(a.outlet.component,o))}else o&&Ph(e,a,s),s.canActivateChecks.push(new rI(i)),Ih(n,null,r.component?a?a.children:null:t,i,s)})(o,r[o.value.outlet],t,i.concat([o.value]),s),delete r[o.value.outlet]}),Qn(r,(o,a)=>Ph(o,t.getContext(a),s)),s}function Ph(n,e,t){const i=_c(n),s=n.value;Qn(i,(r,o)=>{Ph(r,s.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new qp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class oq{}function oI(n){return new ln(e=>e.error(n))}class lq{constructor(e,t,i,s,r,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){const e=Wp(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ft);if(null===t)return null;const i=new Vp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ft,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new qr(i,t),r=new WR(this.url,s);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(e){const t=e.value,i=GR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const r of Object.keys(t.children)){const o=t.children[r],a=QR(e,r),l=this.processSegmentGroup(a,o,r);if(null===l)return null;i.push(...l)}const s=aI(i);return function cq(n){n.sort((e,t)=>e.value.outlet===ft?-1:t.value.outlet===ft?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,i,s){for(const r of e){const o=this.processSegmentAgainstRoute(r,t,i,s);if(null!==o)return o}return nI(t,i,s)?[]:null}processSegmentAgainstRoute(e,t,i,s){if(e.redirectTo||!tI(e,t,i,s))return null;let r,o=[],a=[];if("**"===e.path){const f=i.length>0?DR(i).parameters:{};r=new Vp(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uI(e),ys(e),e.component,e,lI(t),cI(t)+i.length,hI(e))}else{const f=Gp(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,r=new Vp(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uI(e),ys(e),e.component,e,lI(t),cI(t)+o.length,hI(e))}const l=function uq(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=Wp(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new qr(r,f)]}if(0===l.length&&0===u.length)return[new qr(r,[])];const h=ys(e)===s,d=this.processSegment(l,c,u,h?ft:s);return null===d?null:[new qr(r,d)]}}function hq(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function aI(n){const e=[],t=new Set;for(const i of n){if(!hq(i)){e.push(i);continue}const s=e.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),t.add(s)):e.push(i)}for(const i of t){const s=aI(i.children);e.push(new qr(i.value,s))}return e.filter(i=>!t.has(i))}function lI(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cI(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function uI(n){return n.data||{}}function hI(n){return n.resolve||{}}function dI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function lb(n){return va(e=>{const t=n(e);return t?Kn(t).pipe(It(()=>e)):tt(e)})}class vq extends class yq{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const cb=new nt("ROUTES");class fI{constructor(e,t,i,s){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe(It(r=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=r.create(e);return new sb(CR(o.injector.get(cb,void 0,$e.Self|$e.Optional)).map(ob),o)}),Ro(r=>{throw t._loader$=void 0,r}));return t._loader$=new I$(s,()=>new sr).pipe(yR()),t._loader$}loadModuleFactory(e){return _r(e()).pipe(Pn(t=>t instanceof xD?tt(t):Kn(this.compiler.compileModuleAsync(t))))}}class xq{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Mq(n){throw n}function wq(n,e,t){return e.parse("/")}function pI(n,e){return tt(null)}const Eq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ai=(()=>{class n{constructor(t,i,s,r,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=s,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new sr,this.errorHandler=Mq,this.malformedUriErrorHandler=wq,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pI,afterPreactivation:pI},this.urlHandlingStrategy=new xq,this.routeReuseStrategy=new vq,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Gr),this.console=o.get(l1);const h=o.get(rn);this.isNgZoneEnabled=h instanceof rn&&rn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Z$(){return new xa(new bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fI(o,a,d=>this.triggerEvent(new wR(d)),d=>this.triggerEvent(new ER(d))),this.routerState=zR(this.currentUrlTree,this.rootComponentType),this.transitions=new _s({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ba(s=>0!==s.id),It(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),va(s=>{let r=!1,o=!1;return tt(s).pipe(Zi(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),va(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return mI(a.source)&&(this.browserUrlTree=a.extractedUrl),tt(a).pipe(va(h=>{const d=this.transitions.getValue();return i.next(new q0(h.id,this.serializeUrl(h.extractedUrl),h.source,h.restoredState)),d!==this.transitions.getValue()?Nr:Promise.resolve(h)}),function $6(n,e,t,i){return va(s=>function G6(n,e,t,i,s){return new W6(n,e,t,i,s).apply()}(n,e,t,s.extractedUrl,i).pipe(It(r=>Object.assign(Object.assign({},s),{urlAfterRedirects:r}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Zi(h=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:h.urlAfterRedirects})}),function dq(n,e,t,i,s){return Pn(r=>function aq(n,e,t,i,s="emptyOnly",r="legacy"){try{const o=new lq(n,e,t,i,s,r).recognize();return null===o?oI(new oq):tt(o)}catch(o){return oI(o)}}(n,e,r.urlAfterRedirects,t(r.urlAfterRedirects),i,s).pipe(It(o=>Object.assign(Object.assign({},r),{targetSnapshot:o}))))}(this.rootComponentType,this.config,h=>this.serializeUrl(h),this.paramsInheritanceStrategy,this.relativeLinkResolution),Zi(h=>{if("eager"===this.urlUpdateStrategy){if(!h.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl);this.setBrowserUrl(f,h)}this.browserUrlTree=h.urlAfterRedirects}const d=new B$(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);i.next(d)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:d,extractedUrl:f,source:p,restoredState:g,extras:_}=a,m=new q0(d,this.serializeUrl(f),p,g);i.next(m);const y=zR(f,this.rootComponentType).snapshot;return tt(Object.assign(Object.assign({},a),{targetSnapshot:y,urlAfterRedirects:f,extras:Object.assign(Object.assign({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Nr}),lb(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:h,extras:{skipLocationChange:d,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:h,skipLocationChange:!!d,replaceUrl:!!f})}),Zi(a=>{const l=new U$(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),It(a=>Object.assign(Object.assign({},a),{guards:q6(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function J6(n,e){return Pn(t=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=t;return 0===o.length&&0===r.length?tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Q6(n,e,t,i){return Kn(n).pipe(Pn(s=>function rq(n,e,t,i,s){const r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?tt(r.map(a=>{const l=Xp(a,e,s);let c;if(function P6(n){return n&&Io(n.canDeactivate)}(l))c=_r(l.canDeactivate(n,e,t,i));else{if(!Io(l))throw new Error("Invalid CanDeactivate guard");c=_r(l(n,e,t,i))}return c.pipe(mc())})).pipe(Ch()):tt(!0)}(s.component,s.route,t,e,i)),mc(s=>!0!==s,!0))}(o,i,s,n).pipe(Pn(a=>a&&function C6(n){return"boolean"==typeof n}(a)?function eq(n,e,t,i){return Kn(e).pipe(pc(s=>j0(function nq(n,e){return null!==n&&e&&e(new G$(n)),tt(!0)}(s.route.parent,i),function tq(n,e){return null!==n&&e&&e(new j$(n)),tt(!0)}(s.route,i),function sq(n,e,t){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(o=>function X6(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>_R(()=>tt(o.guards.map(l=>{const c=Xp(l,o.node,t);let u;if(function I6(n){return n&&Io(n.canActivateChild)}(c))u=_r(c.canActivateChild(i,n));else{if(!Io(c))throw new Error("Invalid CanActivateChild guard");u=_r(c(i,n))}return u.pipe(mc())})).pipe(Ch())));return tt(r).pipe(Ch())}(n,s.path,t),function iq(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return tt(!0);const s=i.map(r=>_R(()=>{const o=Xp(r,e,t);let a;if(function R6(n){return n&&Io(n.canActivate)}(o))a=_r(o.canActivate(e,n));else{if(!Io(o))throw new Error("Invalid CanActivate guard");a=_r(o(e,n))}return a.pipe(mc())}));return tt(s).pipe(Ch())}(n,s.route,t))),mc(s=>!0!==s,!0))}(i,r,n,e):tt(a)),It(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Zi(a=>{if(Ea(a.guardsResult)){const c=X0(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new V$(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),ba(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),lb(a=>{if(a.guards.canActivateChecks.length)return tt(a).pipe(Zi(l=>{const c=new H$(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),va(l=>{let c=!1;return tt(l).pipe(function fq(n,e){return Pn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return tt(t);let r=0;return Kn(s).pipe(pc(o=>function pq(n,e,t,i){return function mq(n,e,t,i){const s=dI(n);if(0===s.length)return tt({});const r={};return Kn(s).pipe(Pn(o=>function gq(n,e,t,i){const s=Xp(n,e,i);return _r(s.resolve?s.resolve(e,t):s(e,t))}(n[o],e,t,i).pipe(Zi(a=>{r[o]=a}))),$0(1),Pn(()=>dI(r).length===s.length?tt(r):Nr))}(n._resolve,n,e,i).pipe(It(r=>(n._resolvedData=r,n.data=Object.assign(Object.assign({},n.data),GR(n,t).resolve),null)))}(o.route,i,n,e)),Zi(()=>r++),$0(1),Pn(o=>r===s.length?tt(t):Nr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Zi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Zi(l=>{const c=new z$(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),lb(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:h,extras:{skipLocationChange:d,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:h,skipLocationChange:!!d,replaceUrl:!!f})}),It(a=>{const l=function m6(n,e,t){const i=Sh(n,e._root,t?t._root:void 0);return new HR(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Zi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>It(i=>(new A6(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Zi({next(){r=!0},complete(){r=!0}}),function F$(n){return Gn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;r||o||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===s.id&&(this.currentNavigation=null)}),Ro(a=>{if(o=!0,function X$(n){return n&&n[AR]}(a)){const l=Ea(a.url);l||(this.navigated=!0,this.restoreHistory(s,!0));const c=new MR(s.id,this.serializeUrl(s.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),h={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mI(s.source)};this.scheduleNavigation(u,"imperative",null,h,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const l=new k$(s.id,this.serializeUrl(s.extractedUrl),a);i.next(l);try{s.resolve(this.errorHandler(a))}catch(c){s.reject(c)}}return Nr}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var s;const r={replaceUrl:!0},o=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){JR(t),this.config=t.map(ob),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=s||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let h=null;switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}return null!==h&&(h=this.removeEmptyProps(h)),function y6(n,e,t,i,s){if(0===t.length)return tb(e.root,e.root,e.root,i,s);const r=function v6(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new qR(!0,0,n);let e=0,t=!1;const i=n.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Qn(r.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new qR(t,e,i)}(t);if(r.toRoot())return tb(e.root,e.root,new bt([],{}),i,s);const o=function b6(n,e,t){if(n.isAbsolute)return new nb(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const r=t.snapshot._urlSegment;return new nb(r,r===e.root,0)}const i=Hp(n.commands[0])?0:1;return function x6(n,e,t){let i=n,s=e,r=t;for(;r>s;){if(r-=s,i=i.parent,!i)throw new Error("Invalid number of '../'");s=i.segments.length}return new nb(i,!1,s-r)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(r,e,n),a=o.processChildren?zp(o.segmentGroup,o.index,r.commands):XR(o.segmentGroup,o.index,r.commands);return tb(e.root,o.segmentGroup,a,i,s)}(c,this.currentUrlTree,t,h,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const s=Ea(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Aq(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return i}isActive(t,i){let s;if(s=!0===i?Object.assign({},Eq):!1===i?Object.assign({},Sq):i,Ea(t))return IR(this.currentUrlTree,t,s);const r=this.parseUrl(t);return IR(this.currentUrlTree,r,s)}removeEmptyProps(t){return Object.keys(t).reduce((i,s)=>{const r=t[s];return null!=r&&(i[s]=r),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Mh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,s,r,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,h;o?(c=o.resolve,u=o.reject,h=o.promise):h=new Promise((p,g)=>{c=p,u=g});const d=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),f=s&&s.\u0275routerPageId?s.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:d,targetPageId:f,source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:c,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const s=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl?this.location.replaceState(s,"",r):this.location.go(s,"",r)}restoreHistory(t,i=!1){var s,r;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===o?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const s=new MR(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Cv()},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();function mI(n){return"imperative"!==n}class gI{}class _I{preload(e,t){return tt(null)}}let yI=(()=>{class n{constructor(t,i,s,r){this.router=t,this.injector=s,this.preloadingStrategy=r,this.loader=new fI(s,i,l=>t.triggerEvent(new wR(l)),l=>t.triggerEvent(new ER(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(ba(t=>t instanceof Mh),pc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Gr);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const s=[];for(const r of i)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const o=r._loadedConfig;s.push(this.processRoutes(o.module,o.routes))}else r.loadChildren&&!r.canLoad?s.push(this.preloadConfig(t,r)):r.children&&s.push(this.processRoutes(t,r.children));return Kn(s).pipe(Tu(),It(r=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?tt(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Pn(r=>(i._loadedConfig=r,this.processRoutes(r.module,r.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(pe(Ai),pe(c1),pe(Nn),pe(gI))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),db=(()=>{class n{constructor(t,i,s={}){this.router=t,this.viewportScroller=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof q0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof SR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new SR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Cv()},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const Sa=new nt("ROUTER_CONFIGURATION"),vI=new nt("ROUTER_FORROOT_GUARD"),Rq=[M0,{provide:NR,useClass:FR},{provide:Ai,useFactory:function Nq(n,e,t,i,s,r,o={},a,l){const c=new Ai(null,n,e,t,i,s,CR(r));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function Fq(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var h,d;null===(h=console.group)||void 0===h||h.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(d=console.groupEnd)||void 0===d||d.call(console)}),c},deps:[NR,Dh,M0,Nn,c1,cb,Sa,[class bq{},new Eo],[class _q{},new Eo]]},Dh,{provide:wa,useFactory:function kq(n){return n.routerState.root},deps:[Ai]},yI,_I,class Dq{preload(e,t){return t().pipe(Ro(()=>tt(null)))}},{provide:Sa,useValue:{enableTracing:!1}}];function Iq(){return new p1("Router",Ai)}let bI=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[Rq,xI(t),{provide:vI,useFactory:Oq,deps:[[Ai,new Eo,new ju]]},{provide:Sa,useValue:i||{}},{provide:fc,useFactory:Lq,deps:[ya,[new Lf(x0),new Eo],Sa]},{provide:db,useFactory:Pq,deps:[Ai,B8,Sa]},{provide:gI,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:_I},{provide:p1,multi:!0,useFactory:Iq},[fb,{provide:a0,multi:!0,useFactory:Bq,deps:[fb]},{provide:MI,useFactory:Uq,deps:[fb]},{provide:a1,multi:!0,useExisting:MI}]]}}static forChild(t){return{ngModule:n,providers:[xI(t)]}}}return n.\u0275fac=function(t){return new(t||n)(pe(vI,8),pe(Ai,8))},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({}),n})();function Pq(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new db(n,e,t)}function Lq(n,e,t={}){return t.useHash?new x5(n,e):new O1(n,e)}function Oq(n){return"guarded"}function xI(n){return[{provide:f3,multi:!0,useValue:n},{provide:cb,multi:!0,useValue:n}]}let fb=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new sr}appInitializer(){return this.injector.get(y5,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const s=new Promise(a=>i=a),r=this.injector.get(Ai),o=this.injector.get(Sa);return"disabled"===o.initialNavigation?(r.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(r.hooks.afterPreactivation=()=>this.initNavigation?tt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),r.initialNavigation()):i(!0),s})}bootstrapListener(t){const i=this.injector.get(Sa),s=this.injector.get(yI),r=this.injector.get(db),o=this.injector.get(Ai),a=this.injector.get(dp);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),s.setUpPreloading(),r.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(pe(Nn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();function Bq(n){return n.appInitializer.bind(n)}function Uq(n){return n.bootstrapListener.bind(n)}const MI=new nt("Router Initializer");let pb=(()=>{class n{constructor(){this.$repos=new gt,this.$searchText=new gt,this.$clearText=new gt}setRepositories(t){this.$repos.emit(t)}setSearchText(t){this.$searchText.emit(t)}clearSearchText(){this.$clearText.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Hq{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const zq={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const en="undefined"!=typeof window&&window||{};var Yp=(()=>{return(n=Yp||(Yp={})).isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5",Yp;var n})();let Ji;function mb(){if(void 0===en.document)return"bs4";const n=en.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),en.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=en.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(en.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(en.document.head.removeChild(n),"bs4"):(en.document.head.removeChild(n),"bs5")}function vc(){return void 0===en||(void 0===en.__theme?(Ji||(Ji=mb()),"bs3"===Ji):"bs3"===en.__theme)}function EI(){return!vc()&&(Ji||(Ji=mb()),"bs4"===Ji)}function Lh(){return{isBs3:vc(),isBs4:EI(),isBs5:!vc()&&!EI()&&(Ji||(Ji=mb()),"bs5"===Ji)}}"undefined"==typeof console||console;let gb,Kq=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(s=>s!==t);let i=this._focusTrapStack;i.length&&i[i.length-1]._disable(),i.push(t),t._enable()}deregister(t){t._disable();const i=this._focusTrapStack,s=i.indexOf(t);-1!==s&&(i.splice(s,1),i.length&&i[i.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{gb="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){gb=!1}let AI=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?J1(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!gb)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(pe(dc))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TI=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Jq(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Zq(n){try{return n.frameElement}catch(e){return null}}(function oX(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===DI(i)||!this.isVisible(i)))return!1;let s=t.nodeName.toLowerCase(),r=DI(t);return t.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function sX(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function rX(n){return!function eX(n){return function nX(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Qq(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function tX(n){return function iX(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||CI(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(pe(AI))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CI(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function DI(n){if(!CI(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function RI(n){return null!=n&&"false"!=`${n}`}class aX{constructor(e,t,i,s,r=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let i=0;i<t.length;i++)t[i].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]):t[i].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=0;i<t.length;i++){let s=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=t.length-1;i>=0;i--){let s=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Op(1)).subscribe(e)}}let lX=(()=>{class n{constructor(t,i,s){this._checker=t,this._ngZone=i,this._document=s}create(t,i=!1){return new aX(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(pe(TI),pe(rn),pe(Jn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cX=(()=>{class n{constructor(t,i,s){this._elementRef=t,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=s,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=RI(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=RI(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const i=t.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(J(kn),J(lX),J(Jn))},n.\u0275dir=ze({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[Fi]}),n})(),II=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Kq,AI,TI]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({imports:[[K1]]}),n})();const uX=["addListener","removeListener"],hX=["addEventListener","removeEventListener"],dX=["on","off"];function Kp(n,e,t,i){if(et(t)&&(i=t,t=void 0),i)return Kp(n,e,t).pipe(W0(i));const[s,r]=function mX(n){return et(n.addEventListener)&&et(n.removeEventListener)}(n)?hX.map(o=>a=>n[o](e,a,t)):function fX(n){return et(n.addListener)&&et(n.removeListener)}(n)?uX.map(PI(n,e)):function pX(n){return et(n.on)&&et(n.off)}(n)?dX.map(PI(n,e)):[];if(!s&&k_(n))return Pn(o=>Kp(o,e,t))(ls(n));if(!s)throw new TypeError("Invalid event target");return new ln(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function PI(n,e){return t=>i=>n[t](e,i)}class gX extends Oi{constructor(e,t){super()}schedule(e,t=0){return this}}const Zp={setInterval(n,e,...t){const{delegate:i}=Zp;return(null==i?void 0:i.setInterval)?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Zp;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class _X extends gX{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const s=this.id,r=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(r,s,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return Zp.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Zp.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,i=!1;try{this.work(e)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xl(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Oh={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Oh;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const s=e(r=>{t=void 0,n(r)});return new Oi(()=>null==t?void 0:t(s))},requestAnimationFrame(...n){const{delegate:e}=Oh;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Oh;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},LI={now:()=>(LI.delegate||Date).now(),delegate:void 0};class Nh{constructor(e,t=Nh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Nh.now=LI.now;class vX extends Nh{constructor(e,t=Nh.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const xX=new class bX extends vX{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let s;e=e||i.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw s}}}(class yX extends _X{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Oh.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var s;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:r}=e;null!=t&&(null===(s=r[r.length-1])||void 0===s?void 0:s.id)!==t&&(Oh.cancelAnimationFrame(t),e._scheduled=void 0)}});var Jp=(()=>{return(n=Jp||(Jp={})).top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",Jp;var n})(),Fh=(()=>{return(n=Fh||(Fh={})).top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",Fh;var n})();function Aa(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,i=null==t?void 0:t.getComputedStyle(n,null);return e?i&&i[e]:i}function _b(n){if(!n)return document.documentElement;let i,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&i!==n.nextElementSibling;)i=n.nextElementSibling,t=i.offsetParent;const s=t&&t.nodeName;return s&&"BODY"!==s&&"HTML"!==s?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===Aa(t,"position")?_b(t):t:i?i.ownerDocument.documentElement:document.documentElement}function yb(n){return null!==n.parentNode?yb(n.parentNode):n}function Qp(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=t?n:e,s=t?e:n,r=document.createRange();r.setStart(i,0),r.setEnd(s,0);const o=r.commonAncestorContainer;if(n!==o&&e!==o||i.contains(s))return function MX(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||_b(n.firstElementChild)===n)}(o)?o:_b(o);const a=yb(n);return a.host?Qp(a.host,e):Qp(n,yb(e).host)}function OI(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===Aa(e,"transform");)e=e.parentElement;return e||document.documentElement}function NI(n,e){const t="x"===e?"Left":"Top",i="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${i}Width`])}function FI(n,e,t,i){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function kI(n){const e=n.body,t=n.documentElement;return{height:FI("Height",e,t),width:FI("Width",e,t)}}function kh(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function tn(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function BI(n){const e=n.getBoundingClientRect();if(!(e&&tn(e.top)&&tn(e.left)&&tn(e.bottom)&&tn(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},i="HTML"===n.nodeName?kI(n.ownerDocument):void 0,s=(null==i?void 0:i.width)||n.clientWidth||tn(e.right)&&tn(t.left)&&e.right-t.left||0,r=(null==i?void 0:i.height)||n.clientHeight||tn(e.bottom)&&tn(t.top)&&e.bottom-t.top||0;let o=n.offsetWidth-s,a=n.offsetHeight-r;if(o||a){const l=Aa(n);o-=NI(l,"x"),a-=NI(l,"y"),t.width-=o,t.height-=a}return kh(t)}function vb(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function bb(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:i}=Aa(n);return/(auto|scroll|overlay)/.test(String(e)+String(i)+String(t))?n:bb(vb(n))}function xb(n,e,t=!1){var i,s,r,o,a,l;const c="HTML"===e.nodeName,u=BI(n),h=BI(e),f=(bb(n),Aa(e)),p=parseFloat(f.borderTopWidth),g=parseFloat(f.borderLeftWidth);t&&c&&(h.top=Math.max(null!==(i=h.top)&&void 0!==i?i:0,0),h.left=Math.max(null!==(s=h.left)&&void 0!==s?s:0,0));const _=kh({top:(null!==(r=u.top)&&void 0!==r?r:0)-(null!==(o=h.top)&&void 0!==o?o:0)-p,left:(null!==(a=u.left)&&void 0!==a?a:0)-(null!==(l=h.left)&&void 0!==l?l:0)-g,width:u.width,height:u.height});if(_.marginTop=0,_.marginLeft=0,c){const m=parseFloat(f.marginTop),y=parseFloat(f.marginLeft);tn(_.top)&&(_.top-=p-m),tn(_.bottom)&&(_.bottom-=p-m),tn(_.left)&&(_.left-=g-y),tn(_.right)&&(_.right-=g-y),_.marginTop=m,_.marginLeft=y}return _}function UI(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",i=n.nodeName;if("BODY"===i||"HTML"===i){const s=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||s)[t]}return n[t]}function VI(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===Aa(n,"position")||VI(vb(n)))}function Mb(n,e,t=0,i,s=!1){let r={top:0,left:0};const o=s?OI(n):Qp(n,e);if("viewport"===i)r=function EX(n,e=!1){const t=n.ownerDocument.documentElement,i=xb(n,t),s=Math.max(t.clientWidth,window.innerWidth||0),r=Math.max(t.clientHeight,window.innerHeight||0),o=e?0:UI(t),a=e?0:UI(t,"left");return kh({top:o-Number(null==i?void 0:i.top)+Number(null==i?void 0:i.marginTop),left:a-Number(null==i?void 0:i.left)+Number(null==i?void 0:i.marginLeft),width:s,height:r})}(o,s);else{let a;"scrollParent"===i?(a=bb(vb(e)),"BODY"===a.nodeName&&(a=n.ownerDocument.documentElement)):a="window"===i?n.ownerDocument.documentElement:i;const l=xb(a,o,s);if(l&&"HTML"===a.nodeName&&!VI(o)){const{height:c,width:u}=kI(n.ownerDocument);tn(r.top)&&tn(l.top)&&tn(l.marginTop)&&(r.top+=l.top-l.marginTop),tn(r.top)&&(r.bottom=Number(c)+Number(l.top)),tn(r.left)&&tn(l.left)&&tn(l.marginLeft)&&(r.left+=l.left-l.marginLeft),tn(r.top)&&(r.right=Number(u)+Number(l.left))}else l&&(r=l)}return tn(r.left)&&(r.left+=t),tn(r.top)&&(r.top+=t),tn(r.right)&&(r.right-=t),tn(r.bottom)&&(r.bottom-=t),r}function SX({width:n,height:e}){return n*e}function HI(n,e,t,i,s=["top","bottom","right","left"],r="viewport",o=0){var a,l,c,u,h,d,f,p,g,_,m,y;if(-1===n.indexOf("auto"))return n;const v=Mb(t,i,o,r),b={top:{width:null!==(a=null==v?void 0:v.width)&&void 0!==a?a:0,height:(null!==(l=null==e?void 0:e.top)&&void 0!==l?l:0)-(null!==(c=null==v?void 0:v.top)&&void 0!==c?c:0)},right:{width:(null!==(u=null==v?void 0:v.right)&&void 0!==u?u:0)-(null!==(h=null==e?void 0:e.right)&&void 0!==h?h:0),height:null!==(d=null==v?void 0:v.height)&&void 0!==d?d:0},bottom:{width:null!==(f=null==v?void 0:v.width)&&void 0!==f?f:0,height:(null!==(p=null==v?void 0:v.bottom)&&void 0!==p?p:0)-(null!==(g=null==e?void 0:e.bottom)&&void 0!==g?g:0)},left:{width:(null!==(_=e.left)&&void 0!==_?_:0)-(null!==(m=null==v?void 0:v.left)&&void 0!==m?m:0),height:null!==(y=null==v?void 0:v.height)&&void 0!==y?y:0}},x=Object.keys(b).map(M=>Object.assign(Object.assign({position:M},b[M]),{area:SX(b[M])})).sort((M,S)=>S.area-M.area);let w=x.filter(({width:M,height:S})=>M>=t.clientWidth&&S>=t.clientHeight);w=w.filter(({position:M})=>s.some(S=>S===M));const E=w.length>0?w[0].position:x[0].position,A=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Lh().isBs5?Fh[E]:E}`),E+(A?`-${A}`:"")}const em=(n,e=0)=>n?parseFloat(n):e;function zI(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),i=em(null==t?void 0:t.marginTop)+em(null==t?void 0:t.marginBottom),s=em(null==t?void 0:t.marginLeft)+em(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+s,height:Number(n.offsetHeight)+i}}function GI(n,e,t){return xb(e,t?OI(n):Qp(n,e),t)}function wb(n,e,t){var i,s,r;const o=t.split(" ")[0],a=zI(n),l={width:a.width,height:a.height},c=-1!==["right","left"].indexOf(o),u=c?"top":"left",h=c?"left":"top",d=c?"height":"width",f=c?"width":"height";return l[u]=(null!==(i=e[u])&&void 0!==i?i:0)+e[d]/2-a[d]/2,l[h]=o===h?(null!==(s=e[h])&&void 0!==s?s:0)-a[f]:null!==(r=e[function TX(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(h)])&&void 0!==r?r:0,l}function WI(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const DX={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function tm(n,e){return!!Lh().isBs5&&DX[e].includes(n)}function jI(n,e,t){!n||!e||Object.keys(e).forEach(i=>{let s="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&function wX(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[i])&&(s="px"),t?t.setStyle(n,i,`${String(e[i])}${s}`):n.style[i]=String(e[i])+s})}function PX(n){var e,t,i,s,r,o;let a=n.offsets.target;const l=n.instance.target.querySelector(".arrow");if(!l)return n;const c=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),u=c?"height":"width",h=c?"Top":"Left",d=h.toLowerCase(),f=c?"left":"top",p=c?"bottom":"right",g=zI(l)[u],_=n.placement.split(" ")[1];(null!==(e=n.offsets.host[p])&&void 0!==e?e:0)-g<(null!==(t=a[d])&&void 0!==t?t:0)&&(a[d]-=(null!==(i=a[d])&&void 0!==i?i:0)-((null!==(s=n.offsets.host[p])&&void 0!==s?s:0)-g)),Number(n.offsets.host[d])+Number(g)>(null!==(r=a[p])&&void 0!==r?r:0)&&(a[d]+=Number(n.offsets.host[d])+Number(g)-Number(a[p])),a=kh(a);const m=Aa(n.instance.target),y=parseFloat(m[`margin${h}`])||0,v=parseFloat(m[`border${h}Width`])||0;let b;if(_){const w=parseFloat(m.borderRadius)||0,E=Number(y+v+w);b=d===_?Number(n.offsets.host[d])+E:Number(n.offsets.host[d])+Number(n.offsets.host[u]-E)}else b=Number(n.offsets.host[d])+Number(n.offsets.host[u]/2-g/2);let x=b-(null!==(o=a[d])&&void 0!==o?o:0)-y-v;return x=Math.max(Math.min(a[u]-(g+5),x),0),n.offsets.arrow={[d]:Math.round(x),[f]:""},n.instance.arrow=l,n}function LX(n){if(n.offsets.target=kh(n.offsets.target),!WI(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),wb(n.instance.target,n.offsets.host,n.placement)),n;const e=Mb(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],i=n.placement.split(" ")[1]||"";const a=HI("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),l=[t,a];return l.forEach((c,u)=>{var h,d,f,p,g,_,m,y,v,b,x,w,E,A,M,S;if(t!==c||l.length===u+1)return;t=n.placement.split(" ")[0];const F="left"===t&&Math.floor(null!==(h=n.offsets.target.right)&&void 0!==h?h:0)>Math.floor(null!==(d=n.offsets.host.left)&&void 0!==d?d:0)||"right"===t&&Math.floor(null!==(f=n.offsets.target.left)&&void 0!==f?f:0)<Math.floor(null!==(p=n.offsets.host.right)&&void 0!==p?p:0)||"top"===t&&Math.floor(null!==(g=n.offsets.target.bottom)&&void 0!==g?g:0)>Math.floor(null!==(_=n.offsets.host.top)&&void 0!==_?_:0)||"bottom"===t&&Math.floor(null!==(m=n.offsets.target.top)&&void 0!==m?m:0)<Math.floor(null!==(y=n.offsets.host.bottom)&&void 0!==y?y:0),U=Math.floor(null!==(v=n.offsets.target.left)&&void 0!==v?v:0)<Math.floor(null!==(b=e.left)&&void 0!==b?b:0),I=Math.floor(null!==(x=n.offsets.target.right)&&void 0!==x?x:0)>Math.floor(null!==(w=e.right)&&void 0!==w?w:0),B=Math.floor(null!==(E=n.offsets.target.top)&&void 0!==E?E:0)<Math.floor(null!==(A=e.top)&&void 0!==A?A:0),O=Math.floor(null!==(M=n.offsets.target.bottom)&&void 0!==M?M:0)>Math.floor(null!==(S=e.bottom)&&void 0!==S?S:0),L="left"===t&&U||"right"===t&&I||"top"===t&&B||"bottom"===t&&O,k=-1!==["top","bottom"].indexOf(t),H=k&&"left"===i&&U||k&&"right"===i&&I||!k&&"left"===i&&B||!k&&"right"===i&&O;(F||L||H)&&((F||L)&&(t=l[u+1]),H&&(i=function CX(n){return"right"===n?"left":"left"===n?"right":n}(i)),n.placement=t+(i?` ${i}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),wb(n.instance.target,n.offsets.host,n.placement)))}),n}function NX(n){var e;if(!WI(n.options,"preventOverflow"))return n;const t="transform",i=n.instance.target.style,{top:s,left:r,[t]:o}=i;i.top="",i.left="",i[t]="";const a=Mb(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);i.top=s,i.left=r,i[t]=o;const c={primary(u){var h,d,f,p;let g=n.offsets.target[u];return(null!==(h=n.offsets.target[u])&&void 0!==h?h:0)<(null!==(d=a[u])&&void 0!==d?d:0)&&(g=Math.max(null!==(f=n.offsets.target[u])&&void 0!==f?f:0,null!==(p=a[u])&&void 0!==p?p:0)),{[u]:g}},secondary(u){var h,d,f,p;const g="right"===u,_=g?"left":"top";let y=n.offsets.target[_];return(null!==(h=n.offsets.target[u])&&void 0!==h?h:0)>(null!==(d=a[u])&&void 0!==d?d:0)&&(y=Math.min(null!==(f=n.offsets.target[_])&&void 0!==f?f:0,(null!==(p=a[u])&&void 0!==p?p:0)-n.offsets.target[g?"width":"height"])),{[_]:y}}};return["left","right","top","bottom"].forEach(u=>{const h=-1!==["left","top","start"].indexOf(u)?c.primary:c.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),h(u))}),n}function FX(n){var e;const t=n.placement,i=t.split(" ")[0],s=t.split(" ")[1];if(s){const{host:r,target:o}=n.offsets,a=-1!==["bottom","top"].indexOf(i),l=a?"left":"top",c=a?"width":"height",u={start:{[l]:r[l]},end:{[l]:(null!==(e=r[l])&&void 0!==e?e:0)+r[c]-o[c]}};n.offsets.target=Object.assign(Object.assign({},o),{[l]:l===s?u.start[l]:u.end[l]})}return n}const BX=new class kX{position(e,t){return this.offset(e,t)}offset(e,t){return GI(t,e)}positionElements(e,t,i,s,r){const o=[LX,FX,NX,PX],l=function OX(n,e,t,i){if(!n||!e)return;const s=GI(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const r=!!t.match(/auto/g);let o=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const a=o.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return a&&(o=a[1]+(a[2]?` ${a[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(o)&&(o="auto"),o=HI(o,s,n,e,i?i.allowedPositions:void 0),{options:i||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:wb(n,s,o),host:s,arrow:void 0},positionFixed:!1,placement:o,placementAuto:r}}(t,e,Jp[i],r);if(l)return o.reduce((c,u)=>u(c),l)}};function UX(n,e,t,i,s,r){const o=BX.positionElements(n,e,t,i,s);if(!o)return;const a=function AX(n){var e,t,i,s;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(i=n.offsets.target.bottom)&&void 0!==i?i:0),right:Math.floor(null!==(s=n.offsets.target.right)&&void 0!==s?s:0)}}(o);jI(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${a.left}px, ${a.top}px, 0px)`},r),o.instance.arrow&&jI(o.instance.arrow,o.offsets.arrow,r),function IX(n,e){const t=n.instance.target;let i=t.className;const s=Lh().isBs5?Fh[n.placement]:n.placement;n.placementAuto&&(i=i.replace(/bs-popover-auto/g,`bs-popover-${s}`),i=i.replace(/ms-2|me-2|mb-2|mt-2/g,""),i=i.replace(/bs-tooltip-auto/g,`bs-tooltip-${s}`),i=i.replace(/\sauto/g,` ${s}`),-1!==i.indexOf("popover")&&(i=i+" "+function RX(n){return Lh().isBs5?tm(n,"end")?"ms-2":tm(n,"start")?"me-2":tm(n,"top")?"mb-2":tm(n,"bottom")?"mt-2":"":""}(s)),-1!==i.indexOf("popover")&&-1===i.indexOf("popover-auto")&&(i+=" popover-auto"),-1!==i.indexOf("tooltip")&&-1===i.indexOf("tooltip-auto")&&(i+=" tooltip-auto")),i=i.replace(/left|right|top|bottom|end|start/g,`${s.split(" ")[0]}`),e?e.setAttribute(t,"class",i):t.className=i}(o,r)}let Eb=(()=>{class n{constructor(t,i,s){this.update$$=new sr,this.positionElements=new Map,this.isDisabled=!1,J1(s)&&t.runOutsideAngular(()=>{this.triggerEvent$=jE(Kp(window,"scroll",{passive:!0}),Kp(window,"resize",{passive:!0}),tt(0,xX),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(r=>{UX(nm(r.target),nm(r.element),r.attachment,r.appendToBody,this.options,i.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(nm(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(nm(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(pe(rn),pe(ga),pe(dc))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nm(n){return"string"==typeof n?document.querySelector(n):n instanceof kn?n.nativeElement:null!=n?n:null}class Bh{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}class VX{constructor(e,t,i,s,r,o,a,l){this._viewContainerRef=e,this._renderer=t,this._elementRef=i,this._injector=s,this._componentFactoryResolver=r,this._ngZone=o,this._applicationRef=a,this._posService=l,this.onBeforeShow=new gt,this.onShown=new gt,this.onBeforeHide=new gt,this.onHidden=new gt,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=Nn.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof kn&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const i=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!i)return;i.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,i,s,r,o,a;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const l=this._componentRef.location.nativeElement;return null===(t=l.parentNode)||void 0===t||t.removeChild(l),null===(s=null===(i=this._contentRef)||void 0===i?void 0:i.componentRef)||void 0===s||s.destroy(),this._viewContainerRef&&(null===(r=this._contentRef)||void 0===r?void 0:r.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(a=null===(o=this._contentRef)||void 0===o?void 0:o.viewRef)||void 0===a||a.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const i=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),s=this._listenOpts.show=o=>{e.show?e.show(o):this.show(o),o()};return this._renderer&&(this._unregisterListenersFn=function Gq(n,e){const t=function wI(n,e=zq){const t=(n||"").trim();if(0===t.length)return[];const i=t.split(/\s+/).map(r=>r.split(":")).map(r=>{const o=e[r[0]]||r;return new Hq(o[0],o[1])}),s=i.filter(r=>r.isManual());if(s.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===s.length&&i.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return i}(e.triggers),i=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const s=[],r=[],o=()=>{r.forEach(a=>s.push(a())),r.length=0};return t.forEach(a=>{const l=a.open===a.close,c=l?e.toggle:e.show;if(!l&&a.close&&e.hide){const u=n.listen(i,a.close,e.hide);r.push(()=>u)}c&&s.push(n.listen(i,a.open,()=>c(o)))}),()=>{s.forEach(a=>a())}}(this._renderer,{target:e.target,triggers:e.triggers,show:s,hide:i,toggle:o=>{this.isShown?i():s(o)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function Wq(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(i=>i.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function jq(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(i=>i.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,i){if(!e)return new Bh([]);if(e instanceof pr){if(this._viewContainerRef){const o=this._viewContainerRef.createEmbeddedView(e,t);return o.markForCheck(),new Bh([o.rootNodes],o)}const r=e.createEmbeddedView({});return this._applicationRef.attachView(r),new Bh([r.rootNodes],r)}if("function"==typeof e){const r=this._componentFactoryResolver.resolveComponentFactory(e),o=Nn.create({providers:this._providers,parent:this._injector}),a=r.create(o);return Object.assign(a.instance,i),this._applicationRef.attachView(a.hostView),new Bh([[a.location.nativeElement]],a.hostView,a)}const s=this._renderer?[this._renderer.createText(`${e}`)]:[];return new Bh([s])}}let Sb=(()=>{class n{constructor(t,i,s,r,o){this._componentFactoryResolver=t,this._ngZone=i,this._injector=s,this._posService=r,this._applicationRef=o}createLoader(t,i,s){return new VX(i,s,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(pe(lc),pe(rn),pe(Nn),pe(Eb),pe(dp))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HX=["*"];let $I=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),qI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const im={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},zX=new nt("override-default-config");let GX=(()=>{class n{constructor(t,i,s){this._element=i,this._renderer=s,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,vc()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var i;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var i,s;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(i=this.bsModalService)||void 0===i?void 0:i.getModalsCount())&&(null===(s=this.bsModalService)||void 0===s||s.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,vc()?"in":"show"),setTimeout(()=>{var t,i;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(i=this.bsModalService)||void 0===i||i.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(J(qI),J(kn),J(Ws))},n.\u0275cmp=Ls({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,i){1&t&&Kt("mousedown",function(r){return i.onClickStarted(r)})("click",function(r){return i.onClickStop(r)})("popstate",function(){return i.onPopState()},!1,Ny)("keydown.esc",function(r){return i.onEsc(r)},!1,Ny),2&t&&Vs("aria-modal",!0)("aria-labelledby",i.config.ariaLabelledBy)("aria-describedby",i.config.ariaDescribedby)},ngContentSelectors:HX,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,i){1&t&&(function eC(n){const e=ie()[16][6];if(!e.projection){const i=e.projection=Hu(n?n.length:1,null),s=i.slice();let r=e.child;for(;null!==r;){const o=n?GG(r,n):0;null!==o&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}(),Be(0,"div",0)(1,"div",1),function tC(n,e=0,t){const i=ie(),s=At(),r=Hl(s,20+n,16,null,t||null);null===r.projection&&(r.projection=e),ay(),64!=(64&r.flags)&&function WH(n,e,t){TA(e[11],0,e,t,_A(n,t,e),xA(t.parent||e[6],t,e))}(s,i,r)}(2),Pe()()),2&t&&yC("modal-dialog"+(i.config.class?" "+i.config.class:""))},directives:[cX],encapsulation:2}),n})(),WX=(()=>{class n{constructor(t,i){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=i}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),vc()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class Xq{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=en),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function qq(){const n=Lh(),e=Object.keys(n).find(t=>n[t]);return Yp[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(J(kn),J(Ws))},n.\u0275cmp=Ls({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),jX=1,rm=(()=>{class n{constructor(t,i,s){this.clf=i,this.modalDefaultOption=s,this.onShow=new gt,this.onShown=new gt,this.onHide=new gt,this.onHidden=new gt,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=s?Object.assign({},im,s):im}show(t,i){this.modalsCount++,this._createLoaders();const s=(null==i?void 0:i.id)||jX++;return this.config=this.modalDefaultOption?Object.assign({},im,this.modalDefaultOption,i):Object.assign({},im,i),this.config.id=s,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,i=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&i&&(this._backdropLoader.attach(WX).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var i;const s=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const a of this.config.providers)s.provide(a);const r=new $I,o=s.provide({provide:qI,useValue:this.config}).provide({provide:$I,useValue:r}).attach(GX).to("body");return r.hide=()=>{var a;return null===(a=o.instance)||void 0===a?void 0:a.hide()},r.setClass=a=>{o.instance&&(o.instance.config.class=a)},r.onHidden=new gt,r.onHide=new gt,this.copyEvent(s.onBeforeHide,r.onHide),this.copyEvent(s.onHidden,r.onHidden),o.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),o.instance&&(o.instance.level=this.getModalsCount(),r.content=s.getInnerComponent(),r.id=null===(i=o.instance.config)||void 0===i?void 0:i.id),r}_hideModal(t){if(null!=t){const i=this.loaders.findIndex(r=>{var o;return(null===(o=r.instance)||void 0===o?void 0:o.config.id)===t}),s=this.loaders[i];s&&s.hide(t)}else this.loaders.forEach(i=>{i.instance&&i.hide(i.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const i=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),i}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const i=this.loaders.findIndex(s=>{var r;return(null===(r=s.instance)||void 0===r?void 0:r.config.id)===t});i>=0&&(this.loaders.splice(i,1),this.loaders.forEach((s,r)=>{s.instance&&(s.instance.level=r+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,i){t.subscribe(s=>{i.emit(this.lastDismissReason||s)})}}return n.\u0275fac=function(t){return new(t||n)(pe(ga),pe(Sb),pe(zX,8))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();II.forRoot();let $X=(()=>{class n{static forRoot(){return{ngModule:n,providers:[rm,Sb,Eb]}}static forChild(){return{ngModule:n,providers:[rm,Sb,Eb]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({imports:[[II]]}),n})();class XI{}class YI{}class Xr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const s=t.slice(0,i),r=s.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const s=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(s,i),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Xr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Xr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...i),this.headers.set(t,s);break;case"d":const r=e.value;if(r){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class qX{encodeKey(e){return KI(e)}encodeValue(e){return KI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const YX=/%(\d[a-f0-9])/gi,KX={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function KI(n){return encodeURIComponent(n).replace(YX,(e,t)=>{var i;return null!==(i=KX[t])&&void 0!==i?i:e})}function ZI(n){return`${n}`}class Po{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function XX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,r)),e.decodeValue(s.slice(r+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const s=e[i];Array.isArray(s)?s.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Po({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ZI(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const s=i.indexOf(ZI(e.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ZX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function JI(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function QI(n){return"undefined"!=typeof Blob&&n instanceof Blob}function eP(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Uh{constructor(e,t,i,s){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function JX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new Xr),this.context||(this.context=new ZX),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Po,this.urlWithParams=t}serializeBody(){return null===this.body?null:JI(this.body)||QI(this.body)||eP(this.body)||function QX(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Po?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||eP(this.body)?null:QI(this.body)?this.body.type||null:JI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Po?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,s=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,f)=>d.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((d,f)=>d.set(f,e.setParams[f]),u)),new Uh(i,s,o,{params:u,headers:c,context:h,reportProgress:l,responseType:r,withCredentials:a})}}var Cn=(()=>((Cn=Cn||{})[Cn.Sent=0]="Sent",Cn[Cn.UploadProgress=1]="UploadProgress",Cn[Cn.ResponseHeader=2]="ResponseHeader",Cn[Cn.DownloadProgress=3]="DownloadProgress",Cn[Cn.Response=4]="Response",Cn[Cn.User=5]="User",Cn))();class Tb{constructor(e,t=200,i="OK"){this.headers=e.headers||new Xr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Cb extends Tb{constructor(e={}){super(e),this.type=Cn.ResponseHeader}clone(e={}){return new Cb({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class om extends Tb{constructor(e={}){super(e),this.type=Cn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new om({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class tP extends Tb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Db(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let nP=(()=>{class n{constructor(t){this.handler=t}request(t,i,s={}){let r;if(t instanceof Uh)r=t;else{let l,c;l=s.headers instanceof Xr?s.headers:new Xr(s.headers),s.params&&(c=s.params instanceof Po?s.params:new Po({fromObject:s.params})),r=new Uh(t,i,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=tt(r).pipe(pc(l=>this.handler.handle(l)));if(t instanceof Uh||"events"===s.observe)return o;const a=o.pipe(ba(l=>l instanceof om));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(It(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(It(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(It(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(It(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Po).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,s={}){return this.request("PATCH",t,Db(s,i))}post(t,i,s={}){return this.request("POST",t,Db(s,i))}put(t,i,s={}){return this.request("PUT",t,Db(s,i))}}return n.\u0275fac=function(t){return new(t||n)(pe(XI))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();class iP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const sP=new nt("HTTP_INTERCEPTORS");let e9=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const t9=/^\)\]\}',?\n/;let rP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ln(i=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((f,p)=>s.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&s.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();s.responseType="json"!==f?f:"text"}const r=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=s.statusText||"OK",p=new Xr(s.getAllResponseHeaders()),g=function n9(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return o=new Cb({headers:p,status:s.status,statusText:f,url:g}),o},l=()=>{let{headers:f,status:p,statusText:g,url:_}=a(),m=null;204!==p&&(m=void 0===s.response?s.responseText:s.response),0===p&&(p=m?200:0);let y=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof m){const v=m;m=m.replace(t9,"");try{m=""!==m?JSON.parse(m):null}catch(b){m=v,y&&(y=!1,m={error:b,text:m})}}y?(i.next(new om({body:m,headers:f,status:p,statusText:g,url:_||void 0})),i.complete()):i.error(new tP({error:m,headers:f,status:p,statusText:g,url:_||void 0}))},c=f=>{const{url:p}=a(),g=new tP({error:f,status:s.status||0,statusText:s.statusText||"Unknown Error",url:p||void 0});i.error(g)};let u=!1;const h=f=>{u||(i.next(a()),u=!0);let p={type:Cn.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!s.responseText&&(p.partialText=s.responseText),i.next(p)},d=f=>{let p={type:Cn.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return s.addEventListener("load",l),s.addEventListener("error",c),s.addEventListener("timeout",c),s.addEventListener("abort",c),t.reportProgress&&(s.addEventListener("progress",h),null!==r&&s.upload&&s.upload.addEventListener("progress",d)),s.send(r),i.next({type:Cn.Sent}),()=>{s.removeEventListener("error",c),s.removeEventListener("abort",c),s.removeEventListener("load",l),s.removeEventListener("timeout",c),t.reportProgress&&(s.removeEventListener("progress",h),null!==r&&s.upload&&s.upload.removeEventListener("progress",d)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(pe(eR))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const Rb=new nt("XSRF_COOKIE_NAME"),Ib=new nt("XSRF_HEADER_NAME");class oP{}let i9=(()=>{class n{constructor(t,i,s){this.doc=t,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=W1(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(pe(Jn),pe(dc),pe(Rb))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),Pb=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return i.handle(t);const r=this.tokenService.getToken();return null!==r&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,r)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(pe(oP),pe(Ib))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),s9=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(sP,[]);this.chain=i.reduceRight((s,r)=>new iP(s,r),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(pe(YI),pe(Nn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),r9=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Pb,useClass:e9}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Rb,useValue:t.cookieName}:[],t.headerName?{provide:Ib,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({providers:[Pb,{provide:sP,useExisting:Pb,multi:!0},{provide:oP,useClass:i9},{provide:Rb,useValue:"XSRF-TOKEN"},{provide:Ib,useValue:"X-XSRF-TOKEN"}]}),n})(),o9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({providers:[nP,{provide:XI,useClass:s9},rP,{provide:YI,useExisting:rP}],imports:[[r9.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Lb=(()=>{class n{constructor(t){this.http=t}getRepositories(t){return this.http.get(`https://api.github.com/search/repositories?q=${t}`)}getIssues(t){return this.http.get(`https://api.github.com/repos/${t}/issues?state=all`)}getClosedIssues(t){return this.http.get(`https://api.github.com/repos/${t}/issues?state=closed`)}}return n.\u0275fac=function(t){return new(t||n)(pe(nP))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aP=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(J(Ws),J(kn))},n.\u0275dir=ze({type:n}),n})(),Ta=(()=>{class n extends aP{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=function si(n){return vo(()=>{const e=n.prototype.constructor,t=e[kr]||_y(e),i=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==i;){const r=s[kr]||_y(s);if(r&&r!==t)return r;s=Object.getPrototypeOf(s)}return r=>new r})}(n)))(i||n)}}(),n.\u0275dir=ze({type:n,features:[Lt]}),n})();const yr=new nt("NgValueAccessor"),c9={provide:yr,useExisting:Gt(()=>am),multi:!0},h9=new nt("CompositionEventMode");let am=(()=>{class n extends aP{constructor(t,i,s){super(t,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function u9(){const n=mr()?mr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(J(Ws),J(kn),J(h9,8))},n.\u0275dir=ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Kt("input",function(r){return i._handleInput(r.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(r){return i._compositionEnd(r.target.value)})},features:[Qt([c9]),Lt]}),n})();const ci=new nt("NgValidators"),Oo=new nt("NgAsyncValidators");function yP(n){return null!=n}function vP(n){const e=rh(n)?Kn(n):n;return Pv(e),e}function bP(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function xP(n,e){return e.map(t=>t(n))}function MP(n){return n.map(e=>function f9(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ob(n){return null!=n?function wP(n){if(!n)return null;const e=n.filter(yP);return 0==e.length?null:function(t){return bP(xP(t,e))}}(MP(n)):null}function Nb(n){return null!=n?function EP(n){if(!n)return null;const e=n.filter(yP);return 0==e.length?null:function(t){return function a9(...n){const e=HE(n),{args:t,keys:i}=pR(n),s=new ln(r=>{const{length:o}=t;if(!o)return void r.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;ls(t[u]).subscribe(In(r,d=>{h||(h=!0,c--),a[u]=d},()=>l--,void 0,()=>{(!l||!h)&&(c||r.next(i?mR(i,a):a),r.complete())}))}});return e?s.pipe(W0(e)):s}(xP(t,e).map(vP)).pipe(It(bP))}}(MP(n)):null}function SP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Fb(n){return n?Array.isArray(n)?n:[n]:[]}function cm(n,e){return Array.isArray(n)?n.includes(e):n===e}function CP(n,e){const t=Fb(e);return Fb(n).forEach(s=>{cm(t,s)||t.push(s)}),t}function DP(n,e){return Fb(e).filter(t=>!cm(n,t))}class RP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ob(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Nb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class No extends RP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ti extends RP{get formDirective(){return null}get path(){return null}}let PP=(()=>{class n extends class IP{constructor(e){this._cd=e}is(e){var t,i,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===s?void 0:s[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(J(No,2))},n.\u0275dir=ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Zf("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Lt]}),n})();function Vh(n,e){(function Ub(n,e){const t=function AP(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(SP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function TP(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(SP(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const s=()=>n.updateValueAndValidity();fm(e._rawValidators,s),fm(e._rawAsyncValidators,s)})(n,e),e.valueAccessor.writeValue(n.value),function M9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&OP(n,e)})}(n,e),function E9(n,e){const t=(i,s)=>{e.valueAccessor.writeValue(i),s&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function w9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&OP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function x9(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function OP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Hh="VALID",mm="INVALID",bc="PENDING",zh="DISABLED";function Wb(n){return(gm(n)?n.validators:n)||null}function BP(n){return Array.isArray(n)?Ob(n):n||null}function jb(n,e){return(gm(e)?e.asyncValidators:n)||null}function UP(n){return Array.isArray(n)?Nb(n):n||null}function gm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const $b=n=>n instanceof Xb;function HP(n){return(n=>n instanceof WP)(n)?n.value:n.getRawValue()}function zP(n,e){const t=$b(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new Ae(1e3,"");if(!i[e])throw new Ae(1001,"")}function GP(n,e){$b(n),n._forEachChild((i,s)=>{if(void 0===e[s])throw new Ae(1002,"")})}class qb{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=BP(this._rawValidators),this._composedAsyncValidatorFn=UP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Hh}get invalid(){return this.status===mm}get pending(){return this.status==bc}get disabled(){return this.status===zh}get enabled(){return this.status!==zh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=BP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=UP(e)}addValidators(e){this.setValidators(CP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(DP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(DP(e,this._rawAsyncValidators))}hasValidator(e){return cm(this._rawValidators,e)}hasAsyncValidator(e){return cm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zh,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hh,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hh||this.status===bc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zh:Hh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bc,this._hasOwnPendingAsyncValidator=!0;const t=vP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function C9(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(s=>{i=$b(i)?i.controls.hasOwnProperty(s)?i.controls[s]:null:(n=>n instanceof R9)(i)&&i.at(s)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?zh:this.errors?mm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bc)?bc:this._anyControlsHaveStatus(mm)?mm:Hh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class WP extends qb{constructor(e=null,t,i){super(Wb(t),jb(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gm(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Xb extends qb{constructor(e,t,i){super(Wb(t),jb(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){GP(this,e),Object.keys(e).forEach(i=>{zP(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,s)=>{i.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=HP(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((s,r)=>{i=t(i,s,r)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class R9 extends qb{constructor(e,t,i){super(Wb(t),jb(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){GP(this,e),e.forEach((i,s)=>{zP(this,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,s)=>{i.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>HP(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const L9={provide:No,useExisting:Gt(()=>Kb)},qP=(()=>Promise.resolve(null))();let Kb=(()=>{class n extends No{constructor(t,i,s,r,o){super(),this._changeDetectorRef=o,this.control=new WP,this._registered=!1,this.update=new gt,this._parent=t,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function Hb(n,e){if(!e)return null;let t,i,s;return Array.isArray(e),e.forEach(r=>{r.constructor===am?t=r:function T9(n){return Object.getPrototypeOf(n.constructor)===Ta}(r)?i=r:s=r}),s||i||t||null}(0,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Vb(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){qP.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,s=""===i||i&&"false"!==i;qP.then(()=>{var r;s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_getPath(t){return this._parent?function hm(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(J(Ti,9),J(ci,10),J(Oo,10),J(yr,10),J(fp,8))},n.\u0275dir=ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qt([L9]),Lt,Fi]}),n})(),YP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({}),n})(),r7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({imports:[[YP]]}),n})(),o7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({imports:[r7]}),n})(),fL=(()=>{class n{constructor(t,i){this.githubService=t,this.helperService=i,this.searchText="",this.label="Search"}ngOnInit(){this.helperService.$clearText.subscribe(t=>{t&&(this.searchText="")})}captcherText(t){this.helperService.setSearchText(t)}}return n.\u0275fac=function(t){return new(t||n)(J(Lb),J(pb))},n.\u0275cmp=Ls({type:n,selectors:[["tx-search"]],inputs:{label:"label"},decls:4,vars:2,consts:[[1,"search","search-container","d-flex","flex-column","w-100"],["type","email","id","search-text","aria-describedby","search-text","placeholder","Search through open issues...","autofocus","",1,"form-control","w-100",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(Be(0,"div",0)(1,"label"),qe(2),Pe(),Be(3,"input",1),Kt("ngModelChange",function(r){return i.searchText=r})("ngModelChange",function(r){return i.captcherText(r)}),Pe()()),2&t&&(ot(2),li(" ",i.label,""),ot(1),sn("ngModel",i.searchText))},directives:[am,PP,Kb],styles:[".search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#8e949b}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none!important}"]}),n})(),a7=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ls({type:n,selectors:[["tx-repo-card"]],inputs:{data:"data"},decls:11,vars:3,consts:[[1,"card","h-100"],[1,"card__avatar-wrapper"],["alt","Avatar",1,"card__img-top",3,"src"],[1,"card__body"],[1,"card__title"],[1,"card__text"],[1,"card__footer"],[1,"text-body-secondary"]],template:function(t,i){1&t&&(Be(0,"div",0)(1,"div",1),Hs(2,"img",2),Pe(),Be(3,"div",3)(4,"h2",4),qe(5),Pe(),Be(6,"p",5),qe(7),Pe()(),Be(8,"div",6)(9,"small",7),qe(10,"View More"),Pe()()()),2&t&&(ot(2),sc("src",i.data.owner.avatar_url,ha),ot(3),pa(i.data.full_name),ot(2),pa(i.data.description))},styles:[".card[_ngcontent-%COMP%]{border:1px solid #8E949B;border-radius:8px;margin:50px 20px;position:relative;overflow:visible;min-height:450px;transition:all .25s ease-in-out}.card[_ngcontent-%COMP%]:hover{box-shadow:8px 8px 15px -3px #ffffff1a;cursor:pointer}.card__avatar-wrapper[_ngcontent-%COMP%]{background-color:transparent!important;position:absolute;top:-70px;width:100%}.card__img-top[_ngcontent-%COMP%]{background-color:#212529;box-shadow:8px 8px 15px -3px #ffffff1a;border-radius:100px;display:block;max-height:180px;margin:0 auto}.card__body[_ngcontent-%COMP%]{margin-top:150px;padding:15px}.card__footer[_ngcontent-%COMP%]{bottom:30px;padding:15px;position:absolute}.card__footer[_ngcontent-%COMP%]   .text-body-secondary[_ngcontent-%COMP%]{color:#6edff6!important}"]}),n})();function pL(n,e,t,i,s,r,o){try{var a=n[r](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,s)}const Ia=1e3,ui=1001,vn=1003,dn=1006,Jr=1008,Pa=1009,La=1014,ko=1015,qh=1016,Sc=1020,vs=1023,Oa=1026,Ac=1027,Xh=2300,Tc=2301,Na=3001,Xe="srgb",br="srgb-linear",ZL="display-p3";class Ba{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const s=this._listeners[e];if(void 0!==s){const r=s.indexOf(t);-1!==r&&s.splice(r,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}const hi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Ua=Math.PI/180,Rc=180/Math.PI;function Qi(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(hi[255&n]+hi[n>>8&255]+hi[n>>16&255]+hi[n>>24&255]+"-"+hi[255&e]+hi[e>>8&255]+"-"+hi[e>>16&15|64]+hi[e>>24&255]+"-"+hi[63&t|128]+hi[t>>8&255]+"-"+hi[t>>16&255]+hi[t>>24&255]+hi[255&i]+hi[i>>8&255]+hi[i>>16&255]+hi[i>>24&255]).toLowerCase()}function fn(n,e,t){return Math.max(e,Math.min(t,n))}function _x(n,e){return(n%e+e)%e}function Yh(n,e,t){return(1-t)*n+t*e}function yx(n){return 0==(n&n-1)&&0!==n}function eO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tO(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function es(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ct(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const bY_radToDeg=function yY(n){return n*Rc};class te{constructor(e=0,t=0){te.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xt{constructor(){xt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=t,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],d=i[2],f=i[5],p=i[8],g=s[0],_=s[3],m=s[6],y=s[1],v=s[4],b=s[7],x=s[2],w=s[5],E=s[8];return r[0]=o*g+a*y+l*x,r[3]=o*_+a*v+l*w,r[6]=o*m+a*b+l*E,r[1]=c*g+u*y+h*x,r[4]=c*_+u*v+h*w,r[7]=c*m+u*b+h*E,r[2]=d*g+f*y+p*x,r[5]=d*_+f*v+p*w,r[8]=d*m+f*b+p*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*r*u+i*a*l+s*r*c-s*o*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*r,f=c*r-o*l,p=t*h+i*d+s*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=h*g,e[1]=(s*c-u*i)*g,e[2]=(a*i-s*o)*g,e[3]=d*g,e[4]=(u*t-s*l)*g,e[5]=(s*r-a*t)*g,e[6]=f*g,e[7]=(i*l-c*t)*g,e[8]=(o*t-i*r)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(vx.makeScale(e,t)),this}rotate(e){return this.premultiply(vx.makeRotation(-e)),this}translate(e,t){return this.premultiply(vx.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const vx=new xt;function nO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Kh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const iO={};function Zh(n){n in iO||(iO[n]=!0,console.warn(n))}function Pc(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function bx(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}const MY=(new xt).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),wY=(new xt).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),AY={[br]:n=>n,[Xe]:n=>n.convertSRGBToLinear(),[ZL]:function EY(n){return n.convertSRGBToLinear().applyMatrix3(wY)}},TY={[br]:n=>n,[Xe]:n=>n.convertLinearToSRGB(),[ZL]:function SY(n){return n.applyMatrix3(MY).convertLinearToSRGB()}},Ys={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return br},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(!1===this.enabled||e===t||!e||!t)return n;const i=AY[e],s=TY[t];if(void 0===i||void 0===s)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Lc;class sO{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Lc&&(Lc=Kh("canvas")),Lc.width=e.width,Lc.height=e.height;const i=Lc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Lc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Kh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=255*Pc(r[o]/255);return i.putImageData(s,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Pc(t[i]/255)):Pc(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Oc{constructor(e=null){this.isSource=!0,this.uuid=Qi(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(null!==s){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)r.push(xx(s[o].isDataTexture?s[o].image:s[o]))}else r=xx(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function xx(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?sO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let CY=0,Ks=(()=>{class n extends Ba{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,s=ui,r=ui,o=dn,a=Jr,l=vs,c=Pa,u=n.DEFAULT_ANISOTROPY,h=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CY++}),this.uuid=Qi(),this.name="",this.source=new Oc(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=s,this.wrapT=r,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new te(0,0),this.repeat=new te(1,1),this.center=new te(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof h?this.colorSpace=h:(Zh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Na?Xe:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),i||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ia:t.x=t.x-Math.floor(t.x);break;case ui:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ia:t.y=t.y-Math.floor(t.y);break;case ui:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Zh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Xe?Na:3e3}set encoding(t){Zh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Na?Xe:""}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class Ft{constructor(e=0,t=0,i=0,s=1){Ft.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],p=l[9],g=l[2],_=l[6],m=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-g)<.01&&Math.abs(p-_)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+g)<.1&&Math.abs(p+_)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,b=(f+1)/2,x=(m+1)/2,w=(u+d)/4,E=(h+g)/4,A=(p+_)/4;return v>b&&v>x?v<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(v),s=w/i,r=E/i):b>x?b<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(b),i=w/s,r=A/s):x<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(x),i=E/r,s=A/r),this.set(i,s,r,t),this}let y=Math.sqrt((_-p)*(_-p)+(h-g)*(h-g)+(d-u)*(d-u));return Math.abs(y)<.001&&(y=1),this.x=(_-p)/y,this.y=(h-g)/y,this.z=(d-u)/y,this.w=Math.acos((c+f+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Va extends Ba{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ft(0,0,e,t),this.scissorTest=!1,this.viewport=new Ft(0,0,e,t);const s={width:e,height:t,depth:1};void 0!==i.encoding&&(Zh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Na?Xe:""),this.texture=new Ks(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:dn,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Oc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Mx extends Ks{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=vn,this.minFilter=vn,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rO extends Ks{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=vn,this.minFilter=vn,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ei{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],h=i[s+3];const d=r[o+0],f=r[o+1],p=r[o+2],g=r[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=h);if(1===a)return e[t+0]=d,e[t+1]=f,e[t+2]=p,void(e[t+3]=g);if(h!==g||l!==d||c!==f||u!==p){let _=1-a;const m=l*d+c*f+u*p+h*g,y=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){const x=Math.sqrt(v),w=Math.atan2(x,m*y);_=Math.sin(_*w)/x,a=Math.sin(a*w)/x}const b=a*y;if(l=l*_+d*b,c=c*_+f*b,u=u*_+p*b,h=h*_+g*b,_===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=x,c*=x,u*=x,h*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],h=r[o],d=r[o+1],f=r[o+2],p=r[o+3];return e[t]=a*p+u*h+l*f-c*d,e[t+1]=l*p+u*d+c*h-a*f,e[t+2]=c*p+u*f+a*d-l*h,e[t+3]=u*p-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),h=a(r/2),d=l(i/2),f=l(s/2),p=l(r/2);switch(o){case"XYZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"YZX":this._x=d*u*h+c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h-d*f*p;break;case"XZY":this._x=d*u*h-c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=i+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(r-c)*f,this._z=(o-s)*f}else if(i>a&&i>h){const f=2*Math.sqrt(1+i-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-i-h);this._w=(r-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-i-a);this._w=(o-s)/f,this._x=(r+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=i*h+this._x*d,this._y=s*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(r),i*Math.cos(r),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class C{constructor(e=0,t=0,i=0){C.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(oO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(oO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*s-a*i,u=l*i+a*t-r*s,h=l*s+r*i-o*t,d=-r*t-o*i-a*s;return this.x=c*l+d*-r+u*-a-h*-o,this.y=u*l+d*-o+h*-r-c*-a,this.z=h*l+d*-a+c*-o-u*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return wx.copy(this).projectOnVector(e),this.sub(wx)}reflect(e){return this.sub(wx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const wx=new C,oO=new ei;class xr{constructor(e=new C(1/0,1/0,1/0),t=new C(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(eo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(eo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=eo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Nc.copy(e.boundingBox),Nc.applyMatrix4(e.matrixWorld),this.union(Nc);else{const s=e.geometry;if(void 0!==s)if(t&&void 0!==s.attributes&&void 0!==s.attributes.position){const r=s.attributes.position;for(let o=0,a=r.count;o<a;o++)eo.fromBufferAttribute(r,o).applyMatrix4(e.matrixWorld),this.expandByPoint(eo)}else null===s.boundingBox&&s.computeBoundingBox(),Nc.copy(s.boundingBox),Nc.applyMatrix4(e.matrixWorld),this.union(Nc)}const i=e.children;for(let s=0,r=i.length;s<r;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,eo),eo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jh),wm.subVectors(this.max,Jh),Fc.subVectors(e.a,Jh),kc.subVectors(e.b,Jh),Bc.subVectors(e.c,Jh),Bo.subVectors(kc,Fc),Uo.subVectors(Bc,kc),Ha.subVectors(Fc,Bc);let t=[0,-Bo.z,Bo.y,0,-Uo.z,Uo.y,0,-Ha.z,Ha.y,Bo.z,0,-Bo.x,Uo.z,0,-Uo.x,Ha.z,0,-Ha.x,-Bo.y,Bo.x,0,-Uo.y,Uo.x,0,-Ha.y,Ha.x,0];return!(!Ex(t,Fc,kc,Bc,wm)||(t=[1,0,0,0,1,0,0,0,1],!Ex(t,Fc,kc,Bc,wm)))&&(Em.crossVectors(Bo,Uo),t=[Em.x,Em.y,Em.z],Ex(t,Fc,kc,Bc,wm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,eo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(eo).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Qr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Qr=[new C,new C,new C,new C,new C,new C,new C,new C],eo=new C,Nc=new xr,Fc=new C,kc=new C,Bc=new C,Bo=new C,Uo=new C,Ha=new C,Jh=new C,wm=new C,Em=new C,za=new C;function Ex(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){za.fromArray(n,r);const a=s.x*Math.abs(za.x)+s.y*Math.abs(za.y)+s.z*Math.abs(za.z),l=e.dot(za),c=t.dot(za),u=i.dot(za);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const DY=new xr,Qh=new C,Sx=new C;class Mr{constructor(e=new C,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):DY.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qh.subVectors(e,this.center);const t=Qh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=.5*(i-this.radius);this.center.addScaledVector(Qh,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Sx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qh.copy(e.center).add(Sx)),this.expandByPoint(Qh.copy(e.center).sub(Sx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const to=new C,Ax=new C,Sm=new C,Vo=new C,Tx=new C,Am=new C,Cx=new C;class Tm{constructor(e=new C,t=new C(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,to)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=to.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(to.copy(this.origin).addScaledVector(this.direction,t),to.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Ax.copy(e).add(t).multiplyScalar(.5),Sm.copy(t).sub(e).normalize(),Vo.copy(this.origin).sub(Ax);const r=.5*e.distanceTo(t),o=-this.direction.dot(Sm),a=Vo.dot(this.direction),l=-Vo.dot(Sm),c=Vo.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*l-a,d=o*a-l,p=r*u,h>=0)if(d>=-p)if(d<=p){const g=1/u;h*=g,d*=g,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-p?(h=Math.max(0,-(-o*r+a)),d=h>0?-r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c):d<=p?(h=0,d=Math.min(Math.max(-r,-l),r),f=d*(d+2*l)+c):(h=Math.max(0,-(o*r+a)),d=h>0?r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c);else d=o>0?-r:r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),s&&s.copy(Ax).addScaledVector(Sm,d),f}intersectSphere(e,t){to.subVectors(e.center,this.origin);const i=to.dot(this.direction),s=to.dot(to)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,s=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,s=(e.min.x-d.x)*c),u>=0?(r=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||a>s)||((a>i||i!=i)&&(i=a),(l<s||s!=s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return null!==this.intersectBox(e,to)}intersectTriangle(e,t,i,s,r){Tx.subVectors(t,e),Am.subVectors(i,e),Cx.crossVectors(Tx,Am);let a,o=this.direction.dot(Cx);if(o>0){if(s)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Vo.subVectors(this.origin,e);const l=a*this.direction.dot(Am.crossVectors(Vo,Am));if(l<0)return null;const c=a*this.direction.dot(Tx.cross(Vo));if(c<0||l+c>o)return null;const u=-a*Vo.dot(Cx);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ye{constructor(){Ye.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,r,o,a,l,c,u,h,d,f,p,g,_){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=s,m[1]=r,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=h,m[14]=d,m[3]=f,m[7]=p,m[11]=g,m[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ye).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Uc.setFromMatrixColumn(e,0).length(),r=1/Uc.setFromMatrixColumn(e,1).length(),o=1/Uc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),h=Math.sin(r);if("XYZ"===e.order){const d=o*u,f=o*h,p=a*u,g=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+p*c,t[5]=d-g*c,t[9]=-a*l,t[2]=g-d*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const d=l*u,f=l*h,p=c*u,g=c*h;t[0]=d+g*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=g+d*a,t[10]=o*l}else if("ZXY"===e.order){const d=l*u,f=l*h,p=c*u,g=c*h;t[0]=d-g*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=g-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const d=o*u,f=o*h,p=a*u,g=a*h;t[0]=l*u,t[4]=p*c-f,t[8]=d*c+g,t[1]=l*h,t[5]=g*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const d=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=g-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+p,t[10]=d-g*h}else if("XZY"===e.order){const d=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+g,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=g*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(RY,e,IY)}lookAt(e,t,i){const s=this.elements;return ts.subVectors(e,t),0===ts.lengthSq()&&(ts.z=1),ts.normalize(),Ho.crossVectors(i,ts),0===Ho.lengthSq()&&(1===Math.abs(i.z)?ts.x+=1e-4:ts.z+=1e-4,ts.normalize(),Ho.crossVectors(i,ts)),Ho.normalize(),Cm.crossVectors(ts,Ho),s[0]=Ho.x,s[4]=Cm.x,s[8]=ts.x,s[1]=Ho.y,s[5]=Cm.y,s[9]=ts.y,s[2]=Ho.z,s[6]=Cm.z,s[10]=ts.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],d=i[9],f=i[13],p=i[2],g=i[6],_=i[10],m=i[14],y=i[3],v=i[7],b=i[11],x=i[15],w=s[0],E=s[4],A=s[8],M=s[12],S=s[1],F=s[5],U=s[9],I=s[13],B=s[2],O=s[6],L=s[10],k=s[14],H=s[3],j=s[7],Y=s[11],fe=s[15];return r[0]=o*w+a*S+l*B+c*H,r[4]=o*E+a*F+l*O+c*j,r[8]=o*A+a*U+l*L+c*Y,r[12]=o*M+a*I+l*k+c*fe,r[1]=u*w+h*S+d*B+f*H,r[5]=u*E+h*F+d*O+f*j,r[9]=u*A+h*U+d*L+f*Y,r[13]=u*M+h*I+d*k+f*fe,r[2]=p*w+g*S+_*B+m*H,r[6]=p*E+g*F+_*O+m*j,r[10]=p*A+g*U+_*L+m*Y,r[14]=p*M+g*I+_*k+m*fe,r[3]=y*w+v*S+b*B+x*H,r[7]=y*E+v*F+b*O+x*j,r[11]=y*A+v*U+b*L+x*Y,r[15]=y*M+v*I+b*k+x*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14];return e[3]*(+r*l*h-s*c*h-r*a*d+i*c*d+s*a*f-i*l*f)+e[7]*(+t*l*f-t*c*d+r*o*d-s*o*f+s*c*u-r*l*u)+e[11]*(+t*c*h-t*a*f-r*o*h+i*o*f+r*a*u-i*c*u)+e[15]*(-s*a*u-t*l*h+t*a*d+s*o*h-i*o*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],_=e[14],m=e[15],y=h*_*c-g*d*c+g*l*f-a*_*f-h*l*m+a*d*m,v=p*d*c-u*_*c-p*l*f+o*_*f+u*l*m-o*d*m,b=u*g*c-p*h*c+p*a*f-o*g*f-u*a*m+o*h*m,x=p*h*l-u*g*l-p*a*d+o*g*d+u*a*_-o*h*_,w=t*y+i*v+s*b+r*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/w;return e[0]=y*E,e[1]=(g*d*r-h*_*r-g*s*f+i*_*f+h*s*m-i*d*m)*E,e[2]=(a*_*r-g*l*r+g*s*c-i*_*c-a*s*m+i*l*m)*E,e[3]=(h*l*r-a*d*r-h*s*c+i*d*c+a*s*f-i*l*f)*E,e[4]=v*E,e[5]=(u*_*r-p*d*r+p*s*f-t*_*f-u*s*m+t*d*m)*E,e[6]=(p*l*r-o*_*r-p*s*c+t*_*c+o*s*m-t*l*m)*E,e[7]=(o*d*r-u*l*r+u*s*c-t*d*c-o*s*f+t*l*f)*E,e[8]=b*E,e[9]=(p*h*r-u*g*r-p*i*f+t*g*f+u*i*m-t*h*m)*E,e[10]=(o*g*r-p*a*r+p*i*c-t*g*c-o*i*m+t*a*m)*E,e[11]=(u*a*r-o*h*r-u*i*c+t*h*c+o*i*f-t*a*f)*E,e[12]=x*E,e[13]=(u*g*s-p*h*s+p*i*d-t*g*d-u*i*_+t*h*_)*E,e[14]=(p*a*s-o*g*s-p*i*l+t*g*l+o*i*_-t*a*_)*E,e[15]=(o*h*s-u*a*s+u*i*l-t*h*l-o*i*d+t*a*d)*E,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,c=r+r,u=o+o,h=a+a,d=r*c,f=r*u,p=r*h,g=o*u,_=o*h,m=a*h,y=l*c,v=l*u,b=l*h,x=i.x,w=i.y,E=i.z;return s[0]=(1-(g+m))*x,s[1]=(f+b)*x,s[2]=(p-v)*x,s[3]=0,s[4]=(f-b)*w,s[5]=(1-(d+m))*w,s[6]=(_+y)*w,s[7]=0,s[8]=(p+v)*E,s[9]=(_-y)*E,s[10]=(1-(d+g))*E,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=Uc.set(s[0],s[1],s[2]).length();const o=Uc.set(s[4],s[5],s[6]).length(),a=Uc.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Zs.copy(this);const c=1/r,u=1/o,h=1/a;return Zs.elements[0]*=c,Zs.elements[1]*=c,Zs.elements[2]*=c,Zs.elements[4]*=u,Zs.elements[5]*=u,Zs.elements[6]*=u,Zs.elements[8]*=h,Zs.elements[9]*=h,Zs.elements[10]*=h,t.setFromRotationMatrix(Zs),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o){const a=this.elements,c=2*r/(i-s),u=(t+e)/(t-e),h=(i+s)/(i-s),d=-(o+r)/(o-r),f=-2*o*r/(o-r);return a[0]=2*r/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,s,r,o){const a=this.elements,l=1/(t-e),c=1/(i-s),u=1/(o-r),h=(t+e)*l,d=(i+s)*c,f=(o+r)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Uc=new C,Zs=new Ye,RY=new C(0,0,0),IY=new C(1,1,1),Ho=new C,Cm=new C,ts=new C,aO=new Ye,lO=new ei;let PY=(()=>{class n{constructor(t=0,i=0,s=0,r=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=s,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,s,r=this._order){return this._x=t,this._y=i,this._z=s,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,s=!0){const r=t.elements,o=r[0],a=r[4],l=r[8],c=r[1],u=r[5],h=r[9],d=r[2],f=r[6],p=r[10];switch(i){case"XYZ":this._y=Math.asin(fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(fn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-fn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(fn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-fn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,i,s){return aO.makeRotationFromQuaternion(t),this.setFromRotationMatrix(aO,i,s)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return lO.setFromEuler(this),this.setFromQuaternion(lO,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class Dx{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let LY=0;const cO=new C,Vc=new ei,no=new Ye,Dm=new C,ed=new C,OY=new C,NY=new ei,uO=new C(1,0,0),hO=new C(0,1,0),dO=new C(0,0,1),FY={type:"added"},fO={type:"removed"};let jn=(()=>{class n extends Ba{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:LY++}),this.uuid=Qi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new C,i=new PY,s=new ei,r=new C(1,1,1);i._onChange(function o(){s.setFromEuler(i,!1)}),s._onChange(function a(){i.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ye},normalMatrix:{value:new xt}}),this.matrix=new Ye,this.matrixWorld=new Ye,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Dx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Vc.setFromAxisAngle(t,i),this.quaternion.multiply(Vc),this}rotateOnWorldAxis(t,i){return Vc.setFromAxisAngle(t,i),this.quaternion.premultiply(Vc),this}rotateX(t){return this.rotateOnAxis(uO,t)}rotateY(t){return this.rotateOnAxis(hO,t)}rotateZ(t){return this.rotateOnAxis(dO,t)}translateOnAxis(t,i){return cO.copy(t).applyQuaternion(this.quaternion),this.position.add(cO.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(uO,t)}translateY(t){return this.translateOnAxis(hO,t)}translateZ(t){return this.translateOnAxis(dO,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(no.copy(this.matrixWorld).invert())}lookAt(t,i,s){t.isVector3?Dm.copy(t):Dm.set(t,i,s);const r=this.parent;this.updateWorldMatrix(!0,!1),ed.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?no.lookAt(ed,Dm,this.up):no.lookAt(Dm,ed,this.up),this.quaternion.setFromRotationMatrix(no),r&&(no.extractRotation(r.matrixWorld),Vc.setFromRotationMatrix(no),this.quaternion.premultiply(Vc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(FY)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(fO)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(fO)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),no.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),no.multiply(t.parent.matrixWorld)),t.applyMatrix4(no),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let s=0,r=this.children.length;s<r;s++){const a=this.children[s].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i){let s=[];this[t]===i&&s.push(this);for(let r=0,o=this.children.length;r<o;r++){const a=this.children[r].getObjectsByProperty(t,i);a.length>0&&(s=s.concat(a))}return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ed,t,OY),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ed,NY,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let s=0,r=i.length;s<r;s++){const o=i[s];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const s=this.parent;if(!0===t&&null!==s&&!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const r=this.children;for(let o=0,a=r.length;o<a;o++){const l=r[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,s={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));r.material=l}else r.material=o(t.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++)r.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),h=a(t.images),d=a(t.shapes),f=a(t.skeletons),p=a(t.animations),g=a(t.nodes);l.length>0&&(s.geometries=l),c.length>0&&(s.materials=c),u.length>0&&(s.textures=u),h.length>0&&(s.images=h),d.length>0&&(s.shapes=d),f.length>0&&(s.skeletons=f),p.length>0&&(s.animations=p),g.length>0&&(s.nodes=g)}return s.object=r,s;function a(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let s=0;s<t.children.length;s++)this.add(t.children[s].clone());return this}}return n.DEFAULT_UP=new C(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Js=new C,io=new C,Rx=new C,so=new C,Hc=new C,zc=new C,pO=new C,Ix=new C,Px=new C,Lx=new C;let Rm=!1;class ns{constructor(e=new C,t=new C,i=new C){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Js.subVectors(e,t),s.cross(Js);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){Js.subVectors(s,t),io.subVectors(i,t),Rx.subVectors(e,t);const o=Js.dot(Js),a=Js.dot(io),l=Js.dot(Rx),c=io.dot(io),u=io.dot(Rx),h=o*c-a*a;if(0===h)return r.set(-2,-1,-1);const d=1/h,f=(c*l-a*u)*d,p=(o*u-a*l)*d;return r.set(1-f-p,p,f)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,so),so.x>=0&&so.y>=0&&so.x+so.y<=1}static getUV(e,t,i,s,r,o,a,l){return!1===Rm&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Rm=!0),this.getInterpolation(e,t,i,s,r,o,a,l)}static getInterpolation(e,t,i,s,r,o,a,l){return this.getBarycoord(e,t,i,s,so),l.setScalar(0),l.addScaledVector(r,so.x),l.addScaledVector(o,so.y),l.addScaledVector(a,so.z),l}static isFrontFacing(e,t,i,s){return Js.subVectors(i,t),io.subVectors(e,t),Js.cross(io).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Js.subVectors(this.c,this.b),io.subVectors(this.a,this.b),.5*Js.cross(io).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ns.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ns.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,r){return!1===Rm&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Rm=!0),ns.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}getInterpolation(e,t,i,s,r){return ns.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return ns.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ns.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;Hc.subVectors(s,i),zc.subVectors(r,i),Ix.subVectors(e,i);const l=Hc.dot(Ix),c=zc.dot(Ix);if(l<=0&&c<=0)return t.copy(i);Px.subVectors(e,s);const u=Hc.dot(Px),h=zc.dot(Px);if(u>=0&&h<=u)return t.copy(s);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Hc,o);Lx.subVectors(e,r);const f=Hc.dot(Lx),p=zc.dot(Lx);if(p>=0&&f<=p)return t.copy(r);const g=f*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(zc,a);const _=u*p-f*h;if(_<=0&&h-u>=0&&f-p>=0)return pO.subVectors(r,s),a=(h-u)/(h-u+(f-p)),t.copy(s).addScaledVector(pO,a);const m=1/(_+g+d);return o=g*m,a=d*m,t.copy(i).addScaledVector(Hc,o).addScaledVector(zc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let kY=0;class Qs extends Ba{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kY++}),this.uuid=Qi(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];void 0!==s?s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const mO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},er={h:0,s:0,l:0},Im={h:0,s:0,l:0};function Ox(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class ve{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xe){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ys.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Ys.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ys.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Ys.workingColorSpace){if(e=_x(e,1),t=fn(t,0,1),i=fn(i,0,1),0===t)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=Ox(o,r,e+1/3),this.g=Ox(o,r,e),this.b=Ox(o,r,e-1/3)}return Ys.toWorkingColorSpace(this,s),this}setStyle(e,t=Xe){function i(r){void 0!==r&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[2];switch(s[1]){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(3===o)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xe){const i=mO[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pc(e.r),this.g=Pc(e.g),this.b=Pc(e.b),this}copyLinearToSRGB(e){return this.r=bx(e.r),this.g=bx(e.g),this.b=bx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xe){return Ys.fromWorkingColorSpace(di.copy(this),e),65536*Math.round(fn(255*di.r,0,255))+256*Math.round(fn(255*di.g,0,255))+Math.round(fn(255*di.b,0,255))}getHexString(e=Xe){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ys.workingColorSpace){Ys.fromWorkingColorSpace(di.copy(this),t);const i=di.r,s=di.g,r=di.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(s-r)/h+(s<r?6:0);break;case s:l=(r-i)/h+2;break;case r:l=(i-s)/h+4}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ys.workingColorSpace){return Ys.fromWorkingColorSpace(di.copy(this),t),e.r=di.r,e.g=di.g,e.b=di.b,e}getStyle(e=Xe){Ys.fromWorkingColorSpace(di.copy(this),e);const t=di.r,i=di.g,s=di.b;return e!==Xe?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*s)})`}offsetHSL(e,t,i){return this.getHSL(er),er.h+=e,er.s+=t,er.l+=i,this.setHSL(er.h,er.s,er.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(er),e.getHSL(Im);const i=Yh(er.h,Im.h,t),s=Yh(er.s,Im.s,t),r=Yh(er.l,Im.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const di=new ve;ve.NAMES=mO;class bs extends Qs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Dn=new C,Pm=new te;class pn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Pm.fromBufferAttribute(this,t),Pm.applyMatrix3(e),this.setXY(t,Pm.x,Pm.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix3(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix4(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyNormalMatrix(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.transformDirection(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=es(t,this.array)),t}setX(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=es(t,this.array)),t}setY(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=es(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=es(t,this.array)),t}setW(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),s=ct(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),s=ct(s,this.array),r=ct(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class gO extends pn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class _O extends pn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Re extends pn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let UY=0;const xs=new Ye,Nx=new jn,Gc=new C,is=new xr,nd=new xr,$n=new C;class pt extends Ba{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:UY++}),this.uuid=Qi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(nO(e)?_O:gO)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const r=(new xt).getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(e),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return xs.makeRotationFromQuaternion(e),this.applyMatrix4(xs),this}rotateX(e){return xs.makeRotationX(e),this.applyMatrix4(xs),this}rotateY(e){return xs.makeRotationY(e),this.applyMatrix4(xs),this}rotateZ(e){return xs.makeRotationZ(e),this.applyMatrix4(xs),this}translate(e,t,i){return xs.makeTranslation(e,t,i),this.applyMatrix4(xs),this}scale(e,t,i){return xs.makeScale(e,t,i),this.applyMatrix4(xs),this}lookAt(e){return Nx.lookAt(e),Nx.updateMatrix(),this.applyMatrix4(Nx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gc).negate(),this.translate(Gc.x,Gc.y,Gc.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Re(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new xr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++)is.setFromBufferAttribute(t[i]),this.morphTargetsRelative?($n.addVectors(this.boundingBox.min,is.min),this.boundingBox.expandByPoint($n),$n.addVectors(this.boundingBox.max,is.max),this.boundingBox.expandByPoint($n)):(this.boundingBox.expandByPoint(is.min),this.boundingBox.expandByPoint(is.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Mr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new C,1/0);if(e){const i=this.boundingSphere.center;if(is.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++)nd.setFromBufferAttribute(t[r]),this.morphTargetsRelative?($n.addVectors(is.min,nd.min),is.expandByPoint($n),$n.addVectors(is.max,nd.max),is.expandByPoint($n)):(is.expandByPoint(nd.min),is.expandByPoint(nd.max));is.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)$n.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared($n));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)$n.fromBufferAttribute(a,c),l&&(Gc.fromBufferAttribute(e,c),$n.add(Gc)),s=Math.max(s,i.distanceToSquared($n))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,s=t.position.array,r=t.normal.array,o=t.uv.array,a=s.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new pn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let S=0;S<a;S++)c[S]=new C,u[S]=new C;const h=new C,d=new C,f=new C,p=new te,g=new te,_=new te,m=new C,y=new C;function v(S,F,U){h.fromArray(s,3*S),d.fromArray(s,3*F),f.fromArray(s,3*U),p.fromArray(o,2*S),g.fromArray(o,2*F),_.fromArray(o,2*U),d.sub(h),f.sub(h),g.sub(p),_.sub(p);const I=1/(g.x*_.y-_.x*g.y);!isFinite(I)||(m.copy(d).multiplyScalar(_.y).addScaledVector(f,-g.y).multiplyScalar(I),y.copy(f).multiplyScalar(g.x).addScaledVector(d,-_.x).multiplyScalar(I),c[S].add(m),c[F].add(m),c[U].add(m),u[S].add(y),u[F].add(y),u[U].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let S=0,F=b.length;S<F;++S){const U=b[S],I=U.start;for(let O=I,L=I+U.count;O<L;O+=3)v(i[O+0],i[O+1],i[O+2])}const x=new C,w=new C,E=new C,A=new C;function M(S){E.fromArray(r,3*S),A.copy(E);const F=c[S];x.copy(F),x.sub(E.multiplyScalar(E.dot(F))).normalize(),w.crossVectors(A,F);const I=w.dot(u[S])<0?-1:1;l[4*S]=x.x,l[4*S+1]=x.y,l[4*S+2]=x.z,l[4*S+3]=I}for(let S=0,F=b.length;S<F;++S){const U=b[S],I=U.start;for(let O=I,L=I+U.count;O<L;O+=3)M(i[O+0]),M(i[O+1]),M(i[O+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new pn(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const s=new C,r=new C,o=new C,a=new C,l=new C,c=new C,u=new C,h=new C;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),g=e.getX(d+1),_=e.getX(d+2);s.fromBufferAttribute(t,p),r.fromBufferAttribute(t,g),o.fromBufferAttribute(t,_),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,_),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)s.fromBufferAttribute(t,d+0),r.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)$n.fromBufferAttribute(e,t),$n.normalize(),e.setXYZ(t,$n.x,$n.y,$n.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,p=0;for(let g=0,_=l.length;g<_;g++){f=a.isInterleavedBufferAttribute?l[g]*a.data.stride+a.offset:l[g]*u;for(let m=0;m<u;m++)d[p++]=c[f++]}return new pn(d,u,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new pt,i=this.index.array,s=this.attributes;for(const a in s){const c=e(s[a],i);t.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let u=0,h=c.length;u<h;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++)u.push(c[h].toJSON(e.data));u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const s=e.attributes;for(const c in s)this.setAttribute(c,s[c].clone(t));const r=e.morphAttributes;for(const c in r){const u=[],h=r[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const yO=new Ye,wr=new Tm,Lm=new Mr,vO=new C,Wc=new C,jc=new C,$c=new C,Fx=new C,Om=new C,Nm=new te,Fm=new te,km=new te,bO=new C,xO=new C,MO=new C,Bm=new C,Um=new C;class fi extends jn{constructor(e=new pt,t=new bs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(r&&a){Om.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=a[l],h=r[l];0!==u&&(Fx.fromBufferAttribute(h,e),Om.addScaledVector(o?Fx:Fx.sub(t),u))}t.add(Om)}return t}raycast(e,t){const i=this.geometry,r=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),Lm.copy(i.boundingSphere),Lm.applyMatrix4(r),wr.copy(e.ray).recast(e.near),(!1!==Lm.containsPoint(wr.origin)||!(null===wr.intersectSphere(Lm,vO)||wr.origin.distanceToSquared(vO)>(e.far-e.near)**2))&&(yO.copy(r).invert(),wr.copy(e.ray).applyMatrix4(yO),(null===i.boundingBox||!1!==wr.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let i;const s=this.geometry,r=this.material,o=s.index,a=s.attributes.position,l=s.attributes.uv,c=s.attributes.uv1,u=s.attributes.normal,h=s.groups,d=s.drawRange;if(null!==o)if(Array.isArray(r))for(let f=0,p=h.length;f<p;f++){const g=h[f],_=r[g.materialIndex];for(let v=Math.max(g.start,d.start),b=Math.min(o.count,Math.min(g.start+g.count,d.start+d.count));v<b;v+=3){const x=o.getX(v),w=o.getX(v+1),E=o.getX(v+2);i=Vm(this,_,e,wr,l,c,u,x,w,E),i&&(i.faceIndex=Math.floor(v/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else for(let g=Math.max(0,d.start),_=Math.min(o.count,d.start+d.count);g<_;g+=3){const m=o.getX(g),y=o.getX(g+1),v=o.getX(g+2);i=Vm(this,r,e,wr,l,c,u,m,y,v),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}else if(void 0!==a)if(Array.isArray(r))for(let f=0,p=h.length;f<p;f++){const g=h[f],_=r[g.materialIndex];for(let v=Math.max(g.start,d.start),b=Math.min(a.count,Math.min(g.start+g.count,d.start+d.count));v<b;v+=3)i=Vm(this,_,e,wr,l,c,u,v,v+1,v+2),i&&(i.faceIndex=Math.floor(v/3),i.face.materialIndex=g.materialIndex,t.push(i))}else for(let g=Math.max(0,d.start),_=Math.min(a.count,d.start+d.count);g<_;g+=3)i=Vm(this,r,e,wr,l,c,u,g,g+1,g+2),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}function Vm(n,e,t,i,s,r,o,a,l,c){n.getVertexPosition(a,Wc),n.getVertexPosition(l,jc),n.getVertexPosition(c,$c);const u=function VY(n,e,t,i,s,r,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,r,s,!0,a):i.intersectTriangle(s,r,o,0===e.side,a),null===l)return null;Um.copy(a),Um.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Um);return c<t.near||c>t.far?null:{distance:c,point:Um.clone(),object:n}}(n,e,t,i,Wc,jc,$c,Bm);if(u){s&&(Nm.fromBufferAttribute(s,a),Fm.fromBufferAttribute(s,l),km.fromBufferAttribute(s,c),u.uv=ns.getInterpolation(Bm,Wc,jc,$c,Nm,Fm,km,new te)),r&&(Nm.fromBufferAttribute(r,a),Fm.fromBufferAttribute(r,l),km.fromBufferAttribute(r,c),u.uv1=ns.getInterpolation(Bm,Wc,jc,$c,Nm,Fm,km,new te),u.uv2=u.uv1),o&&(bO.fromBufferAttribute(o,a),xO.fromBufferAttribute(o,l),MO.fromBufferAttribute(o,c),u.normal=ns.getInterpolation(Bm,Wc,jc,$c,bO,xO,MO,new C),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new C,materialIndex:0};ns.getNormal(Wc,jc,$c,h.normal),u.face=h}return u}class qc extends pt{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;function p(g,_,m,y,v,b,x,w,E,A,M){const S=b/E,F=x/A,U=b/2,I=x/2,B=w/2,O=E+1,L=A+1;let k=0,H=0;const j=new C;for(let Y=0;Y<L;Y++){const fe=Y*F-I;for(let le=0;le<O;le++)j[g]=(le*S-U)*y,j[_]=fe*v,j[m]=B,c.push(j.x,j.y,j.z),j[g]=0,j[_]=0,j[m]=w>0?1:-1,u.push(j.x,j.y,j.z),h.push(le/E),h.push(1-Y/A),k+=1}for(let Y=0;Y<A;Y++)for(let fe=0;fe<E;fe++){const G=d+fe+O*(Y+1),$=d+(fe+1)+O*(Y+1),ce=d+(fe+1)+O*Y;l.push(d+fe+O*Y,G,ce),l.push(G,$,ce),H+=6}a.addGroup(f,H,M),f+=H,d+=k}p("z","y","x",-1,-1,i,t,e,o,r,0),p("z","y","x",1,-1,i,t,-e,o,r,1),p("x","z","y",1,1,e,i,t,s,o,2),p("x","z","y",1,-1,e,i,-t,s,o,3),p("x","y","z",1,-1,e,t,i,s,r,4),p("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new Re(c,3)),this.setAttribute("normal",new Re(u,3)),this.setAttribute("uv",new Re(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():e[t][i]=Array.isArray(s)?s.slice():s}}return e}function Ci(n){const e={};for(let t=0;t<n.length;t++){const i=Xc(n[t]);for(const s in i)e[s]=i[s]}return e}function wO(n){return null===n.getRenderTarget()?n.outputColorSpace:br}const zY={clone:Xc,merge:Ci};class zo extends Qs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xc(e.uniforms),this.uniformsGroups=function HY(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;t.uniforms[s]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)!0===this.extensions[s]&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class kx extends jn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ye,this.projectionMatrix=new Ye,this.projectionMatrixInverse=new Ye}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class qn extends kx{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Rc*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ua*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Rc*Math.atan(Math.tan(.5*Ua*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ua*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class jY extends jn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const s=new qn(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(1,0,0),this.add(s);const r=new qn(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const o=new qn(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new qn(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new qn(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new qn(-90,1,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[s,r,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,r),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class Hm extends Ks{constructor(e,t,i,s,r,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,s,r,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $Y extends Va{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];void 0!==t.encoding&&(Zh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Na?Xe:""),this.texture=new Hm(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:dn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new qc(5,5,5),r=new zo({name:"CubemapFromEquirect",uniforms:Xc(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const o=new fi(s,r),a=t.minFilter;return t.minFilter===Jr&&(t.minFilter=dn),new jY(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}const Bx=new C,qY=new C,XY=new xt;class Ga{constructor(e=new C(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=Bx.subVectors(i,t).cross(qY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Bx),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||XY.getNormalMatrix(e),s=this.coplanarPoint(Bx).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Wa=new Mr,zm=new C;class Ux{constructor(e=new Ga,t=new Ga,i=new Ga,s=new Ga,r=new Ga,o=new Ga){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],g=i[11],_=i[12],m=i[13],y=i[14],v=i[15];return t[0].setComponents(a-s,h-l,g-d,v-_).normalize(),t[1].setComponents(a+s,h+l,g+d,v+_).normalize(),t[2].setComponents(a+r,h+c,g+f,v+m).normalize(),t[3].setComponents(a-r,h-c,g-f,v-m).normalize(),t[4].setComponents(a-o,h-u,g-p,v-y).normalize(),t[5].setComponents(a+o,h+u,g+p,v+y).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Wa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Wa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Wa)}intersectsSprite(e){return Wa.center.set(0,0,0),Wa.radius=.7071067811865476,Wa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wa)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(zm.x=s.normal.x>0?e.max.x:e.min.x,zm.y=s.normal.y>0?e.max.y:e.min.y,zm.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(zm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function EO(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function YY(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const d=i.get(c);return void((!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);void 0===h?i.set(c,function s(c,u){const h=c.array,d=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,h,d),c.onUploadCallback(),h instanceof Float32Array)p=n.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=n.HALF_FLOAT}else p=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)p=n.SHORT;else if(h instanceof Uint32Array)p=n.UNSIGNED_INT;else if(h instanceof Int32Array)p=n.INT;else if(h instanceof Int8Array)p=n.BYTE;else if(h instanceof Uint8Array)p=n.UNSIGNED_BYTE;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);p=n.UNSIGNED_BYTE}return{buffer:f,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}(c,u)):h.version<c.version&&(function r(c,u,h){const d=u.array,f=u.updateRange;n.bindBuffer(h,c),-1===f.count?n.bufferSubData(h,0,d):(t?n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}(h.buffer,c,u),h.version=c.version)}}}class Gm extends pt{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),l=Math.floor(s),c=a+1,u=l+1,h=e/a,d=t/l,f=[],p=[],g=[],_=[];for(let m=0;m<u;m++){const y=m*d-o;for(let v=0;v<c;v++)p.push(v*h-r,-y,0),g.push(0,0,1),_.push(v/a),_.push(1-m/l)}for(let m=0;m<l;m++)for(let y=0;y<a;y++){const b=y+c*(m+1),x=y+1+c*(m+1),w=y+1+c*m;f.push(y+c*m,b,w),f.push(b,x,w)}this.setIndex(f),this.setAttribute("position",new Re(p,3)),this.setAttribute("normal",new Re(g,3)),this.setAttribute("uv",new Re(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gm(e.width,e.height,e.widthSegments,e.heightSegments)}}const ut={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ge={common:{diffuse:{value:new ve(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xt},alphaMap:{value:null},alphaMapTransform:{value:new xt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xt},normalScale:{value:new te(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xt}},sprite:{diffuse:{value:new ve(16777215)},opacity:{value:1},center:{value:new te(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xt},alphaMap:{value:null},alphaTest:{value:0}}},Er={basic:{uniforms:Ci([ge.common,ge.specularmap,ge.envmap,ge.aomap,ge.lightmap,ge.fog]),vertexShader:ut.meshbasic_vert,fragmentShader:ut.meshbasic_frag},lambert:{uniforms:Ci([ge.common,ge.specularmap,ge.envmap,ge.aomap,ge.lightmap,ge.emissivemap,ge.bumpmap,ge.normalmap,ge.displacementmap,ge.fog,ge.lights,{emissive:{value:new ve(0)}}]),vertexShader:ut.meshlambert_vert,fragmentShader:ut.meshlambert_frag},phong:{uniforms:Ci([ge.common,ge.specularmap,ge.envmap,ge.aomap,ge.lightmap,ge.emissivemap,ge.bumpmap,ge.normalmap,ge.displacementmap,ge.fog,ge.lights,{emissive:{value:new ve(0)},specular:{value:new ve(1118481)},shininess:{value:30}}]),vertexShader:ut.meshphong_vert,fragmentShader:ut.meshphong_frag},standard:{uniforms:Ci([ge.common,ge.envmap,ge.aomap,ge.lightmap,ge.emissivemap,ge.bumpmap,ge.normalmap,ge.displacementmap,ge.roughnessmap,ge.metalnessmap,ge.fog,ge.lights,{emissive:{value:new ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag},toon:{uniforms:Ci([ge.common,ge.aomap,ge.lightmap,ge.emissivemap,ge.bumpmap,ge.normalmap,ge.displacementmap,ge.gradientmap,ge.fog,ge.lights,{emissive:{value:new ve(0)}}]),vertexShader:ut.meshtoon_vert,fragmentShader:ut.meshtoon_frag},matcap:{uniforms:Ci([ge.common,ge.bumpmap,ge.normalmap,ge.displacementmap,ge.fog,{matcap:{value:null}}]),vertexShader:ut.meshmatcap_vert,fragmentShader:ut.meshmatcap_frag},points:{uniforms:Ci([ge.points,ge.fog]),vertexShader:ut.points_vert,fragmentShader:ut.points_frag},dashed:{uniforms:Ci([ge.common,ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ut.linedashed_vert,fragmentShader:ut.linedashed_frag},depth:{uniforms:Ci([ge.common,ge.displacementmap]),vertexShader:ut.depth_vert,fragmentShader:ut.depth_frag},normal:{uniforms:Ci([ge.common,ge.bumpmap,ge.normalmap,ge.displacementmap,{opacity:{value:1}}]),vertexShader:ut.meshnormal_vert,fragmentShader:ut.meshnormal_frag},sprite:{uniforms:Ci([ge.sprite,ge.fog]),vertexShader:ut.sprite_vert,fragmentShader:ut.sprite_frag},background:{uniforms:{uvTransform:{value:new xt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ut.background_vert,fragmentShader:ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ut.backgroundCube_vert,fragmentShader:ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ut.cube_vert,fragmentShader:ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ut.equirect_vert,fragmentShader:ut.equirect_frag},distanceRGBA:{uniforms:Ci([ge.common,ge.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ut.distanceRGBA_vert,fragmentShader:ut.distanceRGBA_frag},shadow:{uniforms:Ci([ge.lights,ge.fog,{color:{value:new ve(0)},opacity:{value:1}}]),vertexShader:ut.shadow_vert,fragmentShader:ut.shadow_frag}};Er.physical={uniforms:Ci([Er.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xt},clearcoatNormalScale:{value:new te(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xt},sheen:{value:0},sheenColor:{value:new ve(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xt},transmissionSamplerSize:{value:new te},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xt},attenuationDistance:{value:0},attenuationColor:{value:new ve(0)},specularColor:{value:new ve(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xt}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag};const Wm={r:0,b:0,g:0};function jZ(n,e,t,i,s,r,o){const a=new ve(0);let c,u,l=!0===r?0:1,h=null,d=0,f=null;function g(_,m){_.getRGB(Wm,wO(n)),i.buffers.color.setClear(Wm.r,Wm.g,Wm.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(_,m=1){a.set(_),l=m,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:function p(_,m){let y=!1,v=!0===m.isScene?m.background:null;switch(v&&v.isTexture&&(v=(m.backgroundBlurriness>0?t:e).get(v)),null===v?g(a,l):v&&v.isColor&&(g(v,1),y=!0),n.xr.getEnvironmentBlendMode()){case"opaque":y=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),y=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),y=!0}(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===u&&(u=new fi(new qc(1,1,1),new zo({name:"BackgroundCubeMaterial",uniforms:Xc(Er.backgroundCube.uniforms),vertexShader:Er.backgroundCube.vertexShader,fragmentShader:Er.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,E,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=v.colorSpace!==Xe,(h!==v||d!==v.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=v,d=v.version,f=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(void 0===c&&(c=new fi(new Gm(2,2),new zo({name:"BackgroundMaterial",uniforms:Xc(Er.background.uniforms),vertexShader:Er.background.vertexShader,fragmentShader:Er.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=v,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=v.colorSpace!==Xe,!0===v.matrixAutoUpdate&&v.updateMatrix(),c.material.uniforms.uvTransform.value.copy(v.matrix),(h!==v||d!==v.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=v,d=v.version,f=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}}}function $Z(n,e,t,i){const s=n.getParameter(n.MAX_VERTEX_ATTRIBS),r=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==r,a={},l=_(null);let c=l,u=!1;function f(B){return i.isWebGL2?n.bindVertexArray(B):r.bindVertexArrayOES(B)}function p(B){return i.isWebGL2?n.deleteVertexArray(B):r.deleteVertexArrayOES(B)}function _(B){const O=[],L=[],k=[];for(let H=0;H<s;H++)O[H]=0,L[H]=0,k[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:L,attributeDivisors:k,object:B,attributes:{},index:null}}function v(){const B=c.newAttributes;for(let O=0,L=B.length;O<L;O++)B[O]=0}function b(B){x(B,0)}function x(B,O){const k=c.enabledAttributes,H=c.attributeDivisors;c.newAttributes[B]=1,0===k[B]&&(n.enableVertexAttribArray(B),k[B]=1),H[B]!==O&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,O),H[B]=O)}function w(){const B=c.newAttributes,O=c.enabledAttributes;for(let L=0,k=O.length;L<k;L++)O[L]!==B[L]&&(n.disableVertexAttribArray(L),O[L]=0)}function E(B,O,L,k,H,j){!0!==i.isWebGL2||L!==n.INT&&L!==n.UNSIGNED_INT?n.vertexAttribPointer(B,O,L,k,H,j):n.vertexAttribIPointer(B,O,L,H,j)}function U(){I(),u=!0,c!==l&&(c=l,f(c.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function h(B,O,L,k,H){let j=!1;if(o){const Y=function g(B,O,L){const k=!0===L.wireframe;let H=a[B.id];void 0===H&&(H={},a[B.id]=H);let j=H[O.id];void 0===j&&(j={},H[O.id]=j);let Y=j[k];return void 0===Y&&(Y=_(function d(){return i.isWebGL2?n.createVertexArray():r.createVertexArrayOES()}()),j[k]=Y),Y}(k,L,O);c!==Y&&(c=Y,f(c.object)),j=function m(B,O,L,k){const H=c.attributes,j=O.attributes;let Y=0;const fe=L.getAttributes();for(const le in fe)if(fe[le].location>=0){const $=H[le];let ce=j[le];if(void 0===ce&&("instanceMatrix"===le&&B.instanceMatrix&&(ce=B.instanceMatrix),"instanceColor"===le&&B.instanceColor&&(ce=B.instanceColor)),void 0===$||$.attribute!==ce||ce&&$.data!==ce.data)return!0;Y++}return c.attributesNum!==Y||c.index!==k}(B,k,L,H),j&&function y(B,O,L,k){const H={},j=O.attributes;let Y=0;const fe=L.getAttributes();for(const le in fe)if(fe[le].location>=0){let $=j[le];void 0===$&&("instanceMatrix"===le&&B.instanceMatrix&&($=B.instanceMatrix),"instanceColor"===le&&B.instanceColor&&($=B.instanceColor));const ce={};ce.attribute=$,$&&$.data&&(ce.data=$.data),H[le]=ce,Y++}c.attributes=H,c.attributesNum=Y,c.index=k}(B,k,L,H)}else{const Y=!0===O.wireframe;(c.geometry!==k.id||c.program!==L.id||c.wireframe!==Y)&&(c.geometry=k.id,c.program=L.id,c.wireframe=Y,j=!0)}null!==H&&t.update(H,n.ELEMENT_ARRAY_BUFFER),(j||u)&&(u=!1,function A(B,O,L,k){if(!1===i.isWebGL2&&(B.isInstancedMesh||k.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;v();const H=k.attributes,j=L.getAttributes(),Y=O.defaultAttributeValues;for(const fe in j){const le=j[fe];if(le.location>=0){let G=H[fe];if(void 0===G&&("instanceMatrix"===fe&&B.instanceMatrix&&(G=B.instanceMatrix),"instanceColor"===fe&&B.instanceColor&&(G=B.instanceColor)),void 0!==G){const $=G.normalized,ce=G.itemSize,de=t.get(G);if(void 0===de)continue;const P=de.buffer,Ce=de.type,De=de.bytesPerElement;if(G.isInterleavedBufferAttribute){const se=G.data,Me=se.stride,oe=G.offset;if(se.isInstancedInterleavedBuffer){for(let Q=0;Q<le.locationSize;Q++)x(le.location+Q,se.meshPerAttribute);!0!==B.isInstancedMesh&&void 0===k._maxInstanceCount&&(k._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Q=0;Q<le.locationSize;Q++)b(le.location+Q);n.bindBuffer(n.ARRAY_BUFFER,P);for(let Q=0;Q<le.locationSize;Q++)E(le.location+Q,ce/le.locationSize,Ce,$,Me*De,(oe+ce/le.locationSize*Q)*De)}else{if(G.isInstancedBufferAttribute){for(let se=0;se<le.locationSize;se++)x(le.location+se,G.meshPerAttribute);!0!==B.isInstancedMesh&&void 0===k._maxInstanceCount&&(k._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let se=0;se<le.locationSize;se++)b(le.location+se);n.bindBuffer(n.ARRAY_BUFFER,P);for(let se=0;se<le.locationSize;se++)E(le.location+se,ce/le.locationSize,Ce,$,ce*De,ce/le.locationSize*se*De)}}else if(void 0!==Y){const $=Y[fe];if(void 0!==$)switch($.length){case 2:n.vertexAttrib2fv(le.location,$);break;case 3:n.vertexAttrib3fv(le.location,$);break;case 4:n.vertexAttrib4fv(le.location,$);break;default:n.vertexAttrib1fv(le.location,$)}}}}w()}(B,O,L,k),null!==H&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(H).buffer))},reset:U,resetDefaultState:I,dispose:function M(){U();for(const B in a){const O=a[B];for(const L in O){const k=O[L];for(const H in k)p(k[H].object),delete k[H];delete O[L]}delete a[B]}},releaseStatesOfGeometry:function S(B){if(void 0===a[B.id])return;const O=a[B.id];for(const L in O){const k=O[L];for(const H in k)p(k[H].object),delete k[H];delete O[L]}delete a[B.id]},releaseStatesOfProgram:function F(B){for(const O in a){const L=a[O];if(void 0===L[B.id])continue;const k=L[B.id];for(const H in k)p(k[H].object),delete k[H];delete L[B.id]}},initAttributes:v,enableAttribute:b,disableUnusedAttributes:w}}function qZ(n,e,t,i){const s=i.isWebGL2;let r;this.setMode=function o(c){r=c},this.render=function a(c,u){n.drawArrays(r,c,u),t.update(u,r,1)},this.renderInstances=function l(c,u,h){if(0===h)return;let d,f;if(s)d=n,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===d)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[f](r,c,u,h),t.update(u,r,h)}}function XZ(n,e,t){let i;function r(E){if("highp"===E){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return"mediump"===E&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),m=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),v=d>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function s(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const E=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:_,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:o?n.getParameter(n.MAX_SAMPLES):0}}function YZ(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new Ga,a=new xt,l={value:null,needsUpdate:!1};function u(h,d,f,p){const g=null!==h?h.length:0;let _=null;if(0!==g){if(_=l.value,!0!==p||null===_){const m=f+4*g,y=d.matrixWorldInverse;a.getNormalMatrix(y),(null===_||_.length<m)&&(_=new Float32Array(m));for(let v=0,b=f;v!==g;++v,b+=4)o.copy(h[v]).applyMatrix4(y,a),o.normal.toArray(_,b),_[b+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,_}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=0!==h.length||d||0!==i||s;return s=d,i=h.length,f},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,g=h.clipIntersection,_=h.clipShadows,m=n.get(h);if(!s||null===p||0===p.length||r&&!_)r?u(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const y=r?0:i,v=4*y;let b=m.clippingState||null;l.value=b,b=u(p,d,v,f);for(let x=0;x!==v;++x)b[x]=t[x];m.clippingState=b,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}}}function KZ(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new $Y(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",s),t(c.texture,o.mapping)}return null}}}return o},dispose:function r(){e=new WeakMap}}}class jm extends kx{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,l=s-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const SO=[.125,.215,.35,.446,.526,.582],Vx=new jm,AO=new ve;let Hx=null;const $a=(1+Math.sqrt(5))/2,Jc=1/$a,TO=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,$a,Jc),new C(0,$a,-Jc),new C(Jc,0,$a),new C(-Jc,0,$a),new C($a,Jc,0),new C(-$a,Jc,0)];class CO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){Hx=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=IO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=RO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Hx),e.scissorTest=!1,$m(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),Hx=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:dn,minFilter:dn,generateMipmaps:!1,type:qh,format:vs,colorSpace:br,depthBuffer:!1},s=DO(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=DO(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function ZZ(n){const e=[],t=[],i=[];let s=n;const r=n-4+1+SO.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>n-4?l=SO[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,p=6,g=3,_=2,m=1,y=new Float32Array(g*p*f),v=new Float32Array(_*p*f),b=new Float32Array(m*p*f);for(let w=0;w<f;w++){const E=w%3*2/3-1,A=w>2?0:-1;y.set([E,A,0,E+2/3,A,0,E+2/3,A+1,0,E,A,0,E+2/3,A+1,0,E,A+1,0],g*p*w),v.set(d,_*p*w),b.set([w,w,w,w,w,w],m*p*w)}const x=new pt;x.setAttribute("position",new pn(y,g)),x.setAttribute("uv",new pn(v,_)),x.setAttribute("faceIndex",new pn(b,m)),e.push(x),s>4&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(r)),this._blurMaterial=function JZ(n,e,t){const i=new Float32Array(20),s=new C(0,1,0);return new zo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return s}_compileMaterial(e){const t=new fi(this._lodPlanes[0],e);this._renderer.compile(t,Vx)}_sceneToCubeUV(e,t,i,s){const a=new qn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(AO),u.toneMapping=0,u.autoClear=!1;const f=new bs({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new fi(new qc,f);let g=!1;const _=e.background;_?_.isColor&&(f.color.copy(_),e.background=null,g=!0):(f.color.copy(AO),g=!0);for(let m=0;m<6;m++){const y=m%3;0===y?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):1===y?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const v=this._cubeSize;$m(s,y*v,m>2?v:0,v,v),u.setRenderTarget(s),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,s=301===e.mapping||302===e.mapping;s?(null===this._cubemapMaterial&&(this._cubemapMaterial=IO()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=RO());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new fi(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const l=this._cubeSize;$m(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Vx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,r,TO[(s-1)%TO.length])}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new fi(this._lodPlanes[s],c),d=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(r)?Math.PI/(2*f):2*Math.PI/39,g=r/p,_=isFinite(r)?1+Math.floor(3*g):20;_>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const m=[];let y=0;for(let E=0;E<20;++E){const A=E/g,M=Math.exp(-A*A/2);m.push(M),0===E?y+=M:E<_&&(y+=2*M)}for(let E=0;E<m.length;E++)m[E]=m[E]/y;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=m,d.latitudinal.value="latitudinal"===o,a&&(d.poleAxis.value=a);const{_lodMax:v}=this;d.dTheta.value=p,d.mipInt.value=v-i;const b=this._sizeLods[s];$m(t,3*b*(s>v-4?s-v+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(t),l.render(h,Vx)}}function DO(n,e,t){const i=new Va(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function $m(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function RO(){return new zo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function IO(){return new zo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function QZ(n){let e=new WeakMap,t=null;function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let h=e.get(a);return null===t&&(t=new CO(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&function s(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(h)){null===t&&(t=new CO(n));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",r),d.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function eJ(n){const e={};function t(i){if(void 0!==e[i])return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return null===s&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function tJ(n,e,t,i){const s={},r=new WeakMap;function o(h){const d=h.target;null!==d.index&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete s[d.id];const f=r.get(d);f&&(e.remove(f),r.delete(d)),i.releaseStatesOfGeometry(d),!0===d.isInstancedBufferGeometry&&delete d._maxInstanceCount,t.memory.geometries--}function c(h){const d=[],f=h.index,p=h.attributes.position;let g=0;if(null!==f){const y=f.array;g=f.version;for(let v=0,b=y.length;v<b;v+=3){const x=y[v+0],w=y[v+1],E=y[v+2];d.push(x,w,w,E,E,x)}}else{g=p.version;for(let v=0,b=p.array.length/3-1;v<b;v+=3){const x=v+0,w=v+1,E=v+2;d.push(x,w,w,E,E,x)}}const _=new(nO(d)?_O:gO)(d,1);_.version=g;const m=r.get(h);m&&e.remove(m),r.set(h,_)}return{get:function a(h,d){return!0===s[d.id]||(d.addEventListener("dispose",o),s[d.id]=!0,t.memory.geometries++),d},update:function l(h){const d=h.attributes;for(const p in d)e.update(d[p],n.ARRAY_BUFFER);const f=h.morphAttributes;for(const p in f){const g=f[p];for(let _=0,m=g.length;_<m;_++)e.update(g[_],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(h){const d=r.get(h);if(d){const f=h.index;null!==f&&d.version<f.version&&c(h)}else c(h);return r.get(h)}}}function nJ(n,e,t,i){const s=i.isWebGL2;let r,a,l;this.setMode=function o(d){r=d},this.setIndex=function c(d){a=d.type,l=d.bytesPerElement},this.render=function u(d,f){n.drawElements(r,f,a,d*l),t.update(f,r,1)},this.renderInstances=function h(d,f,p){if(0===p)return;let g,_;if(s)g=n,_="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",null===g)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[_](r,f,a,d*l,p),t.update(f,r,p)}}function iJ(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(r,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(r/3);break;case n.LINES:t.lines+=a*(r/2);break;case n.LINE_STRIP:t.lines+=a*(r-1);break;case n.LINE_LOOP:t.lines+=a*r;break;case n.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function sJ(n,e){return n[0]-e[0]}function rJ(n,e){return Math.abs(e[1])-Math.abs(n[1])}function oJ(n,e,t){const i={},s=new Float32Array(8),r=new WeakMap,o=new Ft,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,h){const d=c.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0;let g=r.get(u);if(void 0===g||g.count!==p){let B=function(){U.dispose(),r.delete(u),u.removeEventListener("dispose",B)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,v=void 0!==u.morphAttributes.normal,b=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],w=u.morphAttributes.normal||[],E=u.morphAttributes.color||[];let A=0;!0===y&&(A=1),!0===v&&(A=2),!0===b&&(A=3);let M=u.attributes.position.count*A,S=1;M>e.maxTextureSize&&(S=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const F=new Float32Array(M*S*4*p),U=new Mx(F,M,S,p);U.type=ko,U.needsUpdate=!0;const I=4*A;for(let O=0;O<p;O++){const L=x[O],k=w[O],H=E[O],j=M*S*4*O;for(let Y=0;Y<L.count;Y++){const fe=Y*I;!0===y&&(o.fromBufferAttribute(L,Y),F[j+fe+0]=o.x,F[j+fe+1]=o.y,F[j+fe+2]=o.z,F[j+fe+3]=0),!0===v&&(o.fromBufferAttribute(k,Y),F[j+fe+4]=o.x,F[j+fe+5]=o.y,F[j+fe+6]=o.z,F[j+fe+7]=0),!0===b&&(o.fromBufferAttribute(H,Y),F[j+fe+8]=o.x,F[j+fe+9]=o.y,F[j+fe+10]=o.z,F[j+fe+11]=4===H.itemSize?o.w:1)}}g={count:p,texture:U,size:new te(M,S)},r.set(u,g),u.addEventListener("dispose",B)}let _=0;for(let y=0;y<d.length;y++)_+=d[y];const m=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",m),h.getUniforms().setValue(n,"morphTargetInfluences",d),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const f=void 0===d?0:d.length;let p=i[u.id];if(void 0===p||p.length!==f){p=[];for(let v=0;v<f;v++)p[v]=[v,0];i[u.id]=p}for(let v=0;v<f;v++){const b=p[v];b[0]=v,b[1]=d[v]}p.sort(rJ);for(let v=0;v<8;v++)v<f&&p[v][1]?(a[v][0]=p[v][0],a[v][1]=p[v][1]):(a[v][0]=Number.MAX_SAFE_INTEGER,a[v][1]=0);a.sort(sJ);const g=u.morphAttributes.position,_=u.morphAttributes.normal;let m=0;for(let v=0;v<8;v++){const b=a[v],x=b[0],w=b[1];x!==Number.MAX_SAFE_INTEGER&&w?(g&&u.getAttribute("morphTarget"+v)!==g[x]&&u.setAttribute("morphTarget"+v,g[x]),_&&u.getAttribute("morphNormal"+v)!==_[x]&&u.setAttribute("morphNormal"+v,_[x]),s[v]=w,m+=w):(g&&!0===u.hasAttribute("morphTarget"+v)&&u.deleteAttribute("morphTarget"+v),_&&!0===u.hasAttribute("morphNormal"+v)&&u.deleteAttribute("morphNormal"+v),s[v]=0)}const y=u.morphTargetsRelative?1:1-m;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",s)}}}}function aJ(n,e,t,i){let s=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function r(l){const c=i.render.frame,h=e.get(l,l.geometry);return s.get(h)!==c&&(e.update(h),s.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER)),h},dispose:function o(){s=new WeakMap}}}const PO=new Ks,LO=new Mx,OO=new rO,NO=new Hm,FO=[],kO=[],BO=new Float32Array(16),UO=new Float32Array(9),VO=new Float32Array(4);function Qc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=FO[s];if(void 0===r&&(r=new Float32Array(s),FO[s]=r),0!==e){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function Un(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Vn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function qm(n,e){let t=kO[e];void 0===t&&(t=new Int32Array(e),kO[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function lJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function cJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2fv(this.addr,e),Vn(t,e)}}function uJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Un(t,e))return;n.uniform3fv(this.addr,e),Vn(t,e)}}function hJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4fv(this.addr,e),Vn(t,e)}}function dJ(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Un(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Vn(t,e)}else{if(Un(t,i))return;VO.set(i),n.uniformMatrix2fv(this.addr,!1,VO),Vn(t,i)}}function fJ(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Un(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Vn(t,e)}else{if(Un(t,i))return;UO.set(i),n.uniformMatrix3fv(this.addr,!1,UO),Vn(t,i)}}function pJ(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Un(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Vn(t,e)}else{if(Un(t,i))return;BO.set(i),n.uniformMatrix4fv(this.addr,!1,BO),Vn(t,i)}}function mJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function gJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2iv(this.addr,e),Vn(t,e)}}function _J(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3iv(this.addr,e),Vn(t,e)}}function yJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4iv(this.addr,e),Vn(t,e)}}function vJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function bJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2uiv(this.addr,e),Vn(t,e)}}function xJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3uiv(this.addr,e),Vn(t,e)}}function MJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4uiv(this.addr,e),Vn(t,e)}}function wJ(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||PO,s)}function EJ(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||OO,s)}function SJ(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||NO,s)}function AJ(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||LO,s)}function CJ(n,e){n.uniform1fv(this.addr,e)}function DJ(n,e){const t=Qc(e,this.size,2);n.uniform2fv(this.addr,t)}function RJ(n,e){const t=Qc(e,this.size,3);n.uniform3fv(this.addr,t)}function IJ(n,e){const t=Qc(e,this.size,4);n.uniform4fv(this.addr,t)}function PJ(n,e){const t=Qc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function LJ(n,e){const t=Qc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function OJ(n,e){const t=Qc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function NJ(n,e){n.uniform1iv(this.addr,e)}function FJ(n,e){n.uniform2iv(this.addr,e)}function kJ(n,e){n.uniform3iv(this.addr,e)}function BJ(n,e){n.uniform4iv(this.addr,e)}function UJ(n,e){n.uniform1uiv(this.addr,e)}function VJ(n,e){n.uniform2uiv(this.addr,e)}function HJ(n,e){n.uniform3uiv(this.addr,e)}function zJ(n,e){n.uniform4uiv(this.addr,e)}function GJ(n,e,t){const i=this.cache,s=e.length,r=qm(t,s);Un(i,r)||(n.uniform1iv(this.addr,r),Vn(i,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||PO,r[o])}function WJ(n,e,t){const i=this.cache,s=e.length,r=qm(t,s);Un(i,r)||(n.uniform1iv(this.addr,r),Vn(i,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||OO,r[o])}function jJ(n,e,t){const i=this.cache,s=e.length,r=qm(t,s);Un(i,r)||(n.uniform1iv(this.addr,r),Vn(i,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||NO,r[o])}function $J(n,e,t){const i=this.cache,s=e.length,r=qm(t,s);Un(i,r)||(n.uniform1iv(this.addr,r),Vn(i,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||LO,r[o])}class XJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function TJ(n){switch(n){case 5126:return lJ;case 35664:return cJ;case 35665:return uJ;case 35666:return hJ;case 35674:return dJ;case 35675:return fJ;case 35676:return pJ;case 5124:case 35670:return mJ;case 35667:case 35671:return gJ;case 35668:case 35672:return _J;case 35669:case 35673:return yJ;case 5125:return vJ;case 36294:return bJ;case 36295:return xJ;case 36296:return MJ;case 35678:case 36198:case 36298:case 36306:case 35682:return wJ;case 35679:case 36299:case 36307:return EJ;case 35680:case 36300:case 36308:case 36293:return SJ;case 36289:case 36303:case 36311:case 36292:return AJ}}(t.type)}}class YJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function qJ(n){switch(n){case 5126:return CJ;case 35664:return DJ;case 35665:return RJ;case 35666:return IJ;case 35674:return PJ;case 35675:return LJ;case 35676:return OJ;case 5124:case 35670:return NJ;case 35667:case 35671:return FJ;case 35668:case 35672:return kJ;case 35669:case 35673:return BJ;case 5125:return UJ;case 36294:return VJ;case 36295:return HJ;case 36296:return zJ;case 35678:case 36198:case 36298:case 36306:case 35682:return GJ;case 35679:case 36299:case 36307:return WJ;case 35680:case 36300:case 36308:case 36293:return jJ;case 36289:case 36303:case 36311:case 36292:return $J}}(t.type)}}class KJ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const Gx=/(\w+)(\])?(\[|\.)?/g;function HO(n,e){n.seq.push(e),n.map[e.id]=e}function ZJ(n,e,t){const i=n.name,s=i.length;for(Gx.lastIndex=0;;){const r=Gx.exec(i),o=Gx.lastIndex;let a=r[1];const c=r[3];if("]"===r[2]&&(a|=0),void 0===c||"["===c&&o+2===s){HO(t,void 0===c?new XJ(a,n,e):new YJ(a,n,e));break}{let h=t.map[a];void 0===h&&(h=new KJ(a),HO(t,h)),t=h}}}class Xm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s);ZJ(r,e.getUniformLocation(t,r.name),this)}}setValue(e,t,i,s){const r=this.map[t];void 0!==r&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];void 0!==s&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function zO(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let JJ=0;function GO(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&""===s)return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+"\n\n"+s+"\n\n"+function QJ(n,e){const t=n.split("\n"),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return s}function tQ(n,e){const t=function eQ(n){switch(n){case br:return["Linear","( value )"];case Xe:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function nQ(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function id(n){return""!==n}function WO(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jO(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oQ=/^[ \t]*#include +<([\w\d./]+)>/gm;function Wx(n){return n.replace(oQ,aQ)}function aQ(n,e){const t=ut[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Wx(t)}const lQ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $O(n){return n.replace(lQ,cQ)}function cQ(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function qO(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function mQ(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function uQ(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function hQ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function dQ(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),h=function fQ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),d=function pQ(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function iQ(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(id).join("\n")}(t),p=function sQ(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(r),g=s.createProgram();let _,m,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(_=[p].filter(id).join("\n"),_.length>0&&(_+="\n"),m=[f,p].filter(id).join("\n"),m.length>0&&(m+="\n")):(_=[qO(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(id).join("\n"),m=[f,qO(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?ut.tonemapping_pars_fragment:"",0!==t.toneMapping?nQ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ut.encodings_pars_fragment,tQ("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(id).join("\n")),o=Wx(o),o=WO(o,t),o=jO(o,t),a=Wx(a),a=WO(a,t),a=jO(a,t),o=$O(o),a=$O(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,m=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+m);const b=y+m+a,x=zO(s,s.VERTEX_SHADER,y+_+o),w=zO(s,s.FRAGMENT_SHADER,b);if(s.attachShader(g,x),s.attachShader(g,w),void 0!==t.index0AttributeName?s.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&s.bindAttribLocation(g,0,"position"),s.linkProgram(g),n.debug.checkShaderErrors){const M=s.getProgramInfoLog(g).trim(),S=s.getShaderInfoLog(x).trim(),F=s.getShaderInfoLog(w).trim();let U=!0,I=!0;if(!1===s.getProgramParameter(g,s.LINK_STATUS))if(U=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(s,g,x,w);else{const B=GO(s,x,"vertex"),O=GO(s,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(g,s.VALIDATE_STATUS)+"\n\nProgram Info Log: "+M+"\n"+B+"\n"+O)}else""!==M?console.warn("THREE.WebGLProgram: Program Info Log:",M):(""===S||""===F)&&(I=!1);I&&(this.diagnostics={runnable:U,programLog:M,vertexShader:{log:S,prefix:_},fragmentShader:{log:F,prefix:m}})}let E,A;return s.deleteShader(x),s.deleteShader(w),this.getUniforms=function(){return void 0===E&&(E=new Xm(s,g)),E},this.getAttributes=function(){return void 0===A&&(A=function rQ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;r.type===n.FLOAT_MAT2&&(a=2),r.type===n.FLOAT_MAT3&&(a=3),r.type===n.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(s,g)),A},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=JJ++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=x,this.fragmentShader=w,this}let gQ=0;class _Q{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,s=this._getShaderStage(e.vertexShader),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(s)&&(o.add(s),s.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new yQ(e),t.set(e,i)),i}}class yQ{constructor(e){this.id=gQ++,this.code=e,this.usedTimes=0}}function vQ(n,e,t,i,s,r,o){const a=new Dx,l=new _Q,c=[],u=s.isWebGL2,h=s.logarithmicDepthBuffer,d=s.vertexTextures;let f=s.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(M){return 1===M?"uv1":2===M?"uv2":3===M?"uv3":"uv"}return{getParameters:function _(M,S,F,U,I){const B=U.fog,O=I.geometry,k=(M.isMeshStandardMaterial?t:e).get(M.envMap||(M.isMeshStandardMaterial?U.environment:null)),H=k&&306===k.mapping?k.image.height:null,j=p[M.type];null!==M.precision&&(f=s.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const Y=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,fe=void 0!==Y?Y.length:0;let G,$,ce,de,le=0;if(void 0!==O.morphAttributes.position&&(le=1),void 0!==O.morphAttributes.normal&&(le=2),void 0!==O.morphAttributes.color&&(le=3),j){const Ht=Er[j];G=Ht.vertexShader,$=Ht.fragmentShader}else G=M.vertexShader,$=M.fragmentShader,l.update(M),ce=l.getVertexShaderID(M),de=l.getFragmentShaderID(M);const P=n.getRenderTarget(),Ce=!0===I.isInstancedMesh,De=!!M.map,Me=!!k,oe=!!M.aoMap,Q=!!M.lightMap,re=!!M.bumpMap,Ee=!!M.normalMap,me=!!M.displacementMap,Ve=!!M.emissiveMap,He=!!M.metalnessMap,Fe=!!M.roughnessMap,it=M.clearcoat>0,Ct=M.iridescence>0,R=M.sheen>0,T=M.transmission>0,X=it&&!!M.clearcoatMap,ae=it&&!!M.clearcoatNormalMap,ue=it&&!!M.clearcoatRoughnessMap,_e=Ct&&!!M.iridescenceMap,N=Ct&&!!M.iridescenceThicknessMap,ne=R&&!!M.sheenColorMap,q=R&&!!M.sheenRoughnessMap,ye=!!M.specularMap,Te=!!M.specularColorMap,Oe=!!M.specularIntensityMap,we=T&&!!M.transmissionMap,Le=T&&!!M.thicknessMap,mt=!!M.alphaMap,V=!!M.extensions,K=!!O.attributes.uv1,he=!!O.attributes.uv2,Se=!!O.attributes.uv3;return{isWebGL2:u,shaderID:j,shaderName:M.type,vertexShader:G,fragmentShader:$,defines:M.defines,customVertexShaderID:ce,customFragmentShaderID:de,isRawShaderMaterial:!0===M.isRawShaderMaterial,glslVersion:M.glslVersion,precision:f,instancing:Ce,instancingColor:Ce&&null!==I.instanceColor,supportsVertexTextures:d,outputColorSpace:null===P?n.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:br,map:De,matcap:!!M.matcap,envMap:Me,envMapMode:Me&&k.mapping,envMapCubeUVHeight:H,aoMap:oe,lightMap:Q,bumpMap:re,normalMap:Ee,displacementMap:d&&me,emissiveMap:Ve,normalMapObjectSpace:Ee&&1===M.normalMapType,normalMapTangentSpace:Ee&&0===M.normalMapType,metalnessMap:He,roughnessMap:Fe,clearcoat:it,clearcoatMap:X,clearcoatNormalMap:ae,clearcoatRoughnessMap:ue,iridescence:Ct,iridescenceMap:_e,iridescenceThicknessMap:N,sheen:R,sheenColorMap:ne,sheenRoughnessMap:q,specularMap:ye,specularColorMap:Te,specularIntensityMap:Oe,transmission:T,transmissionMap:we,thicknessMap:Le,gradientMap:!!M.gradientMap,opaque:!1===M.transparent&&1===M.blending,alphaMap:mt,alphaTest:M.alphaTest>0,combine:M.combine,mapUv:De&&g(M.map.channel),aoMapUv:oe&&g(M.aoMap.channel),lightMapUv:Q&&g(M.lightMap.channel),bumpMapUv:re&&g(M.bumpMap.channel),normalMapUv:Ee&&g(M.normalMap.channel),displacementMapUv:me&&g(M.displacementMap.channel),emissiveMapUv:Ve&&g(M.emissiveMap.channel),metalnessMapUv:He&&g(M.metalnessMap.channel),roughnessMapUv:Fe&&g(M.roughnessMap.channel),clearcoatMapUv:X&&g(M.clearcoatMap.channel),clearcoatNormalMapUv:ae&&g(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ue&&g(M.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&g(M.iridescenceMap.channel),iridescenceThicknessMapUv:N&&g(M.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&g(M.sheenColorMap.channel),sheenRoughnessMapUv:q&&g(M.sheenRoughnessMap.channel),specularMapUv:ye&&g(M.specularMap.channel),specularColorMapUv:Te&&g(M.specularColorMap.channel),specularIntensityMapUv:Oe&&g(M.specularIntensityMap.channel),transmissionMapUv:we&&g(M.transmissionMap.channel),thicknessMapUv:Le&&g(M.thicknessMap.channel),alphaMapUv:mt&&g(M.alphaMap.channel),vertexTangents:Ee&&!!O.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:!0===M.vertexColors&&!!O.attributes.color&&4===O.attributes.color.itemSize,vertexUv1s:K,vertexUv2s:he,vertexUv3s:Se,pointsUvs:!0===I.isPoints&&!!O.attributes.uv&&(De||mt),fog:!!B,useFog:!0===M.fog,fogExp2:B&&B.isFogExp2,flatShading:!0===M.flatShading,sizeAttenuation:!0===M.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===I.isSkinnedMesh,morphTargets:void 0!==O.morphAttributes.position,morphNormals:void 0!==O.morphAttributes.normal,morphColors:void 0!==O.morphAttributes.color,morphTargetsCount:fe,morphTextureStride:le,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:M.toneMapped?n.toneMapping:0,useLegacyLights:n.useLegacyLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:2===M.side,flipSided:1===M.side,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:V&&!0===M.extensions.derivatives,extensionFragDepth:V&&!0===M.extensions.fragDepth,extensionDrawBuffers:V&&!0===M.extensions.drawBuffers,extensionShaderTextureLOD:V&&!0===M.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}},getProgramCacheKey:function m(M){const S=[];if(M.shaderID?S.push(M.shaderID):(S.push(M.customVertexShaderID),S.push(M.customFragmentShaderID)),void 0!==M.defines)for(const F in M.defines)S.push(F),S.push(M.defines[F]);return!1===M.isRawShaderMaterial&&(function y(M,S){M.push(S.precision),M.push(S.outputColorSpace),M.push(S.envMapMode),M.push(S.envMapCubeUVHeight),M.push(S.mapUv),M.push(S.alphaMapUv),M.push(S.lightMapUv),M.push(S.aoMapUv),M.push(S.bumpMapUv),M.push(S.normalMapUv),M.push(S.displacementMapUv),M.push(S.emissiveMapUv),M.push(S.metalnessMapUv),M.push(S.roughnessMapUv),M.push(S.clearcoatMapUv),M.push(S.clearcoatNormalMapUv),M.push(S.clearcoatRoughnessMapUv),M.push(S.iridescenceMapUv),M.push(S.iridescenceThicknessMapUv),M.push(S.sheenColorMapUv),M.push(S.sheenRoughnessMapUv),M.push(S.specularMapUv),M.push(S.specularColorMapUv),M.push(S.specularIntensityMapUv),M.push(S.transmissionMapUv),M.push(S.thicknessMapUv),M.push(S.combine),M.push(S.fogExp2),M.push(S.sizeAttenuation),M.push(S.morphTargetsCount),M.push(S.morphAttributeCount),M.push(S.numDirLights),M.push(S.numPointLights),M.push(S.numSpotLights),M.push(S.numSpotLightMaps),M.push(S.numHemiLights),M.push(S.numRectAreaLights),M.push(S.numDirLightShadows),M.push(S.numPointLightShadows),M.push(S.numSpotLightShadows),M.push(S.numSpotLightShadowsWithMaps),M.push(S.shadowMapType),M.push(S.toneMapping),M.push(S.numClippingPlanes),M.push(S.numClipIntersection),M.push(S.depthPacking)}(S,M),function v(M,S){a.disableAll(),S.isWebGL2&&a.enable(0),S.supportsVertexTextures&&a.enable(1),S.instancing&&a.enable(2),S.instancingColor&&a.enable(3),S.matcap&&a.enable(4),S.envMap&&a.enable(5),S.normalMapObjectSpace&&a.enable(6),S.normalMapTangentSpace&&a.enable(7),S.clearcoat&&a.enable(8),S.iridescence&&a.enable(9),S.alphaTest&&a.enable(10),S.vertexColors&&a.enable(11),S.vertexAlphas&&a.enable(12),S.vertexUv1s&&a.enable(13),S.vertexUv2s&&a.enable(14),S.vertexUv3s&&a.enable(15),S.vertexTangents&&a.enable(16),M.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.useLegacyLights&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.transmission&&a.enable(15),S.sheen&&a.enable(16),S.opaque&&a.enable(17),S.pointsUvs&&a.enable(18),M.push(a.mask)}(S,M),S.push(n.outputColorSpace)),S.push(M.customProgramCacheKey),S.join()},getUniforms:function b(M){const S=p[M.type];let F;return F=S?zY.clone(Er[S].uniforms):M.uniforms,F},acquireProgram:function x(M,S){let F;for(let U=0,I=c.length;U<I;U++){const B=c[U];if(B.cacheKey===S){F=B,++F.usedTimes;break}}return void 0===F&&(F=new mQ(n,S,M,r),c.push(F)),F},releaseProgram:function w(M){if(0==--M.usedTimes){const S=c.indexOf(M);c[S]=c[c.length-1],c.pop(),M.destroy()}},releaseShaderCache:function E(M){l.remove(M)},programs:c,dispose:function A(){l.dispose()}}}function bQ(){let n=new WeakMap;return{get:function e(r){let o=n.get(r);return void 0===o&&(o={},n.set(r,o)),o},remove:function t(r){n.delete(r)},update:function i(r,o,a){n.get(r)[o]=a},dispose:function s(){n=new WeakMap}}}function xQ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function XO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function YO(){const n=[];let e=0;const t=[],i=[],s=[];function o(h,d,f,p,g,_){let m=n[e];return void 0===m?(m={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:g,group:_},n[e]=m):(m.id=h.id,m.object=h,m.geometry=d,m.material=f,m.groupOrder=p,m.renderOrder=h.renderOrder,m.z=g,m.group=_),e++,m}return{opaque:t,transmissive:i,transparent:s,init:function r(){e=0,t.length=0,i.length=0,s.length=0},push:function a(h,d,f,p,g,_){const m=o(h,d,f,p,g,_);f.transmission>0?i.push(m):!0===f.transparent?s.push(m):t.push(m)},unshift:function l(h,d,f,p,g,_){const m=o(h,d,f,p,g,_);f.transmission>0?i.unshift(m):!0===f.transparent?s.unshift(m):t.unshift(m)},finish:function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(h,d){t.length>1&&t.sort(h||xQ),i.length>1&&i.sort(d||XO),s.length>1&&s.sort(d||XO)}}}function MQ(){let n=new WeakMap;return{get:function e(i,s){const r=n.get(i);let o;return void 0===r?(o=new YO,n.set(i,[o])):s>=r.length?(o=new YO,r.push(o)):o=r[s],o},dispose:function t(){n=new WeakMap}}}function wQ(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new C,color:new ve};break;case"SpotLight":t={position:new C,direction:new C,color:new ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new C,color:new ve,distance:0,decay:0};break;case"HemisphereLight":t={direction:new C,skyColor:new ve,groundColor:new ve};break;case"RectAreaLight":t={color:new ve,position:new C,halfWidth:new C,halfHeight:new C}}return n[e.id]=t,t}}}let SQ=0;function AQ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function TQ(n,e){const t=new wQ,i=function EQ(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new te};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new te,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)s.probe.push(new C);const r=new C,o=new Ye,a=new Ye;return{setup:function l(u,h){let d=0,f=0,p=0;for(let F=0;F<9;F++)s.probe[F].set(0,0,0);let g=0,_=0,m=0,y=0,v=0,b=0,x=0,w=0,E=0,A=0;u.sort(AQ);const M=!0===h?Math.PI:1;for(let F=0,U=u.length;F<U;F++){const I=u[F],B=I.color,O=I.intensity,L=I.distance,k=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=B.r*O*M,f+=B.g*O*M,p+=B.b*O*M;else if(I.isLightProbe)for(let H=0;H<9;H++)s.probe[H].addScaledVector(I.sh.coefficients[H],O);else if(I.isDirectionalLight){const H=t.get(I);if(H.color.copy(I.color).multiplyScalar(I.intensity*M),I.castShadow){const j=I.shadow,Y=i.get(I);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,s.directionalShadow[g]=Y,s.directionalShadowMap[g]=k,s.directionalShadowMatrix[g]=I.shadow.matrix,b++}s.directional[g]=H,g++}else if(I.isSpotLight){const H=t.get(I);H.position.setFromMatrixPosition(I.matrixWorld),H.color.copy(B).multiplyScalar(O*M),H.distance=L,H.coneCos=Math.cos(I.angle),H.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),H.decay=I.decay,s.spot[m]=H;const j=I.shadow;if(I.map&&(s.spotLightMap[E]=I.map,E++,j.updateMatrices(I),I.castShadow&&A++),s.spotLightMatrix[m]=j.matrix,I.castShadow){const Y=i.get(I);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,s.spotShadow[m]=Y,s.spotShadowMap[m]=k,w++}m++}else if(I.isRectAreaLight){const H=t.get(I);H.color.copy(B).multiplyScalar(O),H.halfWidth.set(.5*I.width,0,0),H.halfHeight.set(0,.5*I.height,0),s.rectArea[y]=H,y++}else if(I.isPointLight){const H=t.get(I);if(H.color.copy(I.color).multiplyScalar(I.intensity*M),H.distance=I.distance,H.decay=I.decay,I.castShadow){const j=I.shadow,Y=i.get(I);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,Y.shadowCameraNear=j.camera.near,Y.shadowCameraFar=j.camera.far,s.pointShadow[_]=Y,s.pointShadowMap[_]=k,s.pointShadowMatrix[_]=I.shadow.matrix,x++}s.point[_]=H,_++}else if(I.isHemisphereLight){const H=t.get(I);H.skyColor.copy(I.color).multiplyScalar(O*M),H.groundColor.copy(I.groundColor).multiplyScalar(O*M),s.hemi[v]=H,v++}}y>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(s.rectAreaLTC1=ge.LTC_FLOAT_1,s.rectAreaLTC2=ge.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=ge.LTC_HALF_1,s.rectAreaLTC2=ge.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=d,s.ambient[1]=f,s.ambient[2]=p;const S=s.hash;(S.directionalLength!==g||S.pointLength!==_||S.spotLength!==m||S.rectAreaLength!==y||S.hemiLength!==v||S.numDirectionalShadows!==b||S.numPointShadows!==x||S.numSpotShadows!==w||S.numSpotMaps!==E)&&(s.directional.length=g,s.spot.length=m,s.rectArea.length=y,s.point.length=_,s.hemi.length=v,s.directionalShadow.length=b,s.directionalShadowMap.length=b,s.pointShadow.length=x,s.pointShadowMap.length=x,s.spotShadow.length=w,s.spotShadowMap.length=w,s.directionalShadowMatrix.length=b,s.pointShadowMatrix.length=x,s.spotLightMatrix.length=w+E-A,s.spotLightMap.length=E,s.numSpotLightShadowsWithMaps=A,S.directionalLength=g,S.pointLength=_,S.spotLength=m,S.rectAreaLength=y,S.hemiLength=v,S.numDirectionalShadows=b,S.numPointShadows=x,S.numSpotShadows=w,S.numSpotMaps=E,s.version=SQ++)},setupView:function c(u,h){let d=0,f=0,p=0,g=0,_=0;const m=h.matrixWorldInverse;for(let y=0,v=u.length;y<v;y++){const b=u[y];if(b.isDirectionalLight){const x=s.directional[d];x.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(m),d++}else if(b.isSpotLight){const x=s.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(m),x.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(m),p++}else if(b.isRectAreaLight){const x=s.rectArea[g];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(m),a.identity(),o.copy(b.matrixWorld),o.premultiply(m),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),g++}else if(b.isPointLight){const x=s.point[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(m),f++}else if(b.isHemisphereLight){const x=s.hemi[_];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(m),_++}}},state:s}}function KO(n,e){const t=new TQ(n,e),i=[],s=[];return{init:function r(){i.length=0,s.length=0},state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:function l(h){t.setup(i,h)},setupLightsView:function c(h){t.setupView(i,h)},pushLight:function o(h){i.push(h)},pushShadow:function a(h){s.push(h)}}}function CQ(n,e){let t=new WeakMap;return{get:function i(r,o=0){const a=t.get(r);let l;return void 0===a?(l=new KO(n,e),t.set(r,[l])):o>=a.length?(l=new KO(n,e),a.push(l)):l=a[o],l},dispose:function s(){t=new WeakMap}}}class ZO extends Qs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class JO extends Qs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function IQ(n,e,t){let i=new Ux;const s=new te,r=new te,o=new Ft,a=new ZO({depthPacking:3201}),l=new JO,c={},u=t.maxTextureSize,h={0:1,1:0,2:2},d=new zo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new te},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new pt;p.setAttribute("position",new pn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new fi(p,d),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let m=this.type;function y(x,w){const E=e.update(g);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===x.mapPass&&(x.mapPass=new Va(s.x,s.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(w,null,E,d,g,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(w,null,E,f,g,null)}function v(x,w,E,A){let M=null;const S=!0===E.isPointLight?x.customDistanceMaterial:x.customDepthMaterial;if(void 0!==S)M=S;else if(M=!0===E.isPointLight?l:a,n.localClippingEnabled&&!0===w.clipShadows&&Array.isArray(w.clippingPlanes)&&0!==w.clippingPlanes.length||w.displacementMap&&0!==w.displacementScale||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const F=M.uuid,U=w.uuid;let I=c[F];void 0===I&&(I={},c[F]=I);let B=I[U];void 0===B&&(B=M.clone(),I[U]=B),M=B}return M.visible=w.visible,M.wireframe=w.wireframe,M.side=3===A?null!==w.shadowSide?w.shadowSide:w.side:null!==w.shadowSide?w.shadowSide:h[w.side],M.alphaMap=w.alphaMap,M.alphaTest=w.alphaTest,M.map=w.map,M.clipShadows=w.clipShadows,M.clippingPlanes=w.clippingPlanes,M.clipIntersection=w.clipIntersection,M.displacementMap=w.displacementMap,M.displacementScale=w.displacementScale,M.displacementBias=w.displacementBias,M.wireframeLinewidth=w.wireframeLinewidth,M.linewidth=w.linewidth,!0===E.isPointLight&&!0===M.isMeshDistanceMaterial&&(n.properties.get(M).light=E),M}function b(x,w,E,A,M){if(!1===x.visible)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&3===M)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,x.matrixWorld);const U=e.update(x),I=x.material;if(Array.isArray(I)){const B=U.groups;for(let O=0,L=B.length;O<L;O++){const k=B[O],H=I[k.materialIndex];if(H&&H.visible){const j=v(x,H,A,M);n.renderBufferDirect(E,null,U,j,x,k)}}}else if(I.visible){const B=v(x,I,A,M);n.renderBufferDirect(E,null,U,B,x,null)}}const F=x.children;for(let U=0,I=F.length;U<I;U++)b(F[U],w,E,A,M)}this.render=function(x,w,E){if(!1===_.enabled||!1===_.autoUpdate&&!1===_.needsUpdate||0===x.length)return;const A=n.getRenderTarget(),M=n.getActiveCubeFace(),S=n.getActiveMipmapLevel(),F=n.state;F.setBlending(0),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const U=3!==m&&3===this.type,I=3===m&&3!==this.type;for(let B=0,O=x.length;B<O;B++){const L=x[B],k=L.shadow;if(void 0===k){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(!1===k.autoUpdate&&!1===k.needsUpdate)continue;s.copy(k.mapSize);const H=k.getFrameExtents();if(s.multiply(H),r.copy(k.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/H.x),s.x=r.x*H.x,k.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/H.y),s.y=r.y*H.y,k.mapSize.y=r.y)),null===k.map||!0===U||!0===I){const Y=3!==this.type?{minFilter:vn,magFilter:vn}:{};null!==k.map&&k.map.dispose(),k.map=new Va(s.x,s.y,Y),k.map.texture.name=L.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const j=k.getViewportCount();for(let Y=0;Y<j;Y++){const fe=k.getViewport(Y);o.set(r.x*fe.x,r.y*fe.y,r.x*fe.z,r.y*fe.w),F.viewport(o),k.updateMatrices(L,Y),i=k.getFrustum(),b(w,E,k.camera,L,this.type)}!0!==k.isPointLightShadow&&3===this.type&&y(k,E),k.needsUpdate=!1}m=this.type,_.needsUpdate=!1,n.setRenderTarget(A,M,S)}}function PQ(n,e,t){const i=t.isWebGL2,a=new function s(){let V=!1;const K=new Ft;let he=null;const Se=new Ft(0,0,0,0);return{setMask:function(Ne){he!==Ne&&!V&&(n.colorMask(Ne,Ne,Ne,Ne),he=Ne)},setLocked:function(Ne){V=Ne},setClear:function(Ne,Ht,zt,_i,ia){!0===ia&&(Ne*=_i,Ht*=_i,zt*=_i),K.set(Ne,Ht,zt,_i),!1===Se.equals(K)&&(n.clearColor(Ne,Ht,zt,_i),Se.copy(K))},reset:function(){V=!1,he=null,Se.set(-1,0,0,0)}}},l=new function r(){let V=!1,K=null,he=null,Se=null;return{setTest:function(Ne){Ne?P(n.DEPTH_TEST):Ce(n.DEPTH_TEST)},setMask:function(Ne){K!==Ne&&!V&&(n.depthMask(Ne),K=Ne)},setFunc:function(Ne){if(he!==Ne){switch(Ne){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}he=Ne}},setLocked:function(Ne){V=Ne},setClear:function(Ne){Se!==Ne&&(n.clearDepth(Ne),Se=Ne)},reset:function(){V=!1,K=null,he=null,Se=null}}},c=new function o(){let V=!1,K=null,he=null,Se=null,Ne=null,Ht=null,zt=null,_i=null,ia=null;return{setTest:function(wn){V||(wn?P(n.STENCIL_TEST):Ce(n.STENCIL_TEST))},setMask:function(wn){K!==wn&&!V&&(n.stencilMask(wn),K=wn)},setFunc:function(wn,Rs,Lr){(he!==wn||Se!==Rs||Ne!==Lr)&&(n.stencilFunc(wn,Rs,Lr),he=wn,Se=Rs,Ne=Lr)},setOp:function(wn,Rs,Lr){(Ht!==wn||zt!==Rs||_i!==Lr)&&(n.stencilOp(wn,Rs,Lr),Ht=wn,zt=Rs,_i=Lr)},setLocked:function(wn){V=wn},setClear:function(wn){ia!==wn&&(n.clearStencil(wn),ia=wn)},reset:function(){V=!1,K=null,he=null,Se=null,Ne=null,Ht=null,zt=null,_i=null,ia=null}}},u=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,g=[],_=null,m=!1,y=null,v=null,b=null,x=null,w=null,E=null,A=null,M=!1,S=null,F=null,U=null,I=null,B=null;const O=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,k=0;const H=n.getParameter(n.VERSION);-1!==H.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(H)[1]),L=k>=1):-1!==H.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),L=k>=2);let j=null,Y={};const fe=n.getParameter(n.SCISSOR_BOX),le=n.getParameter(n.VIEWPORT),G=(new Ft).fromArray(fe),$=(new Ft).fromArray(le);function ce(V,K,he,Se){const Ne=new Uint8Array(4),Ht=n.createTexture();n.bindTexture(V,Ht),n.texParameteri(V,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(V,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let zt=0;zt<he;zt++)!i||V!==n.TEXTURE_3D&&V!==n.TEXTURE_2D_ARRAY?n.texImage2D(K+zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ne):n.texImage3D(K,0,n.RGBA,1,1,Se,0,n.RGBA,n.UNSIGNED_BYTE,Ne);return Ht}const de={};function P(V){!0!==d[V]&&(n.enable(V),d[V]=!0)}function Ce(V){!1!==d[V]&&(n.disable(V),d[V]=!1)}de[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),de[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(de[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),de[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),P(n.DEPTH_TEST),l.setFunc(3),me(!1),Ve(1),P(n.CULL_FACE),re(0);const oe={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(i)oe[103]=n.MIN,oe[104]=n.MAX;else{const V=e.get("EXT_blend_minmax");null!==V&&(oe[103]=V.MIN_EXT,oe[104]=V.MAX_EXT)}const Q={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA};function re(V,K,he,Se,Ne,Ht,zt,_i){if(0!==V){if(!1===m&&(P(n.BLEND),m=!0),5===V)Ne=Ne||K,Ht=Ht||he,zt=zt||Se,(K!==v||Ne!==w)&&(n.blendEquationSeparate(oe[K],oe[Ne]),v=K,w=Ne),(he!==b||Se!==x||Ht!==E||zt!==A)&&(n.blendFuncSeparate(Q[he],Q[Se],Q[Ht],Q[zt]),b=he,x=Se,E=Ht,A=zt),y=V,M=!1;else if(V!==y||_i!==M){if((100!==v||100!==w)&&(n.blendEquation(n.FUNC_ADD),v=100,w=100),_i)switch(V){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}else switch(V){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}b=null,x=null,E=null,A=null,y=V,M=_i}}else!0===m&&(Ce(n.BLEND),m=!1)}function me(V){S!==V&&(n.frontFace(V?n.CW:n.CCW),S=V)}function Ve(V){0!==V?(P(n.CULL_FACE),V!==F&&n.cullFace(1===V?n.BACK:2===V?n.FRONT:n.FRONT_AND_BACK)):Ce(n.CULL_FACE),F=V}function Fe(V,K,he){V?(P(n.POLYGON_OFFSET_FILL),(I!==K||B!==he)&&(n.polygonOffset(K,he),I=K,B=he)):Ce(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:l,stencil:c},enable:P,disable:Ce,bindFramebuffer:function De(V,K){return f[V]!==K&&(n.bindFramebuffer(V,K),f[V]=K,i&&(V===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=K),V===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=K)),!0)},drawBuffers:function se(V,K){let he=g,Se=!1;if(V)if(he=p.get(K),void 0===he&&(he=[],p.set(K,he)),V.isWebGLMultipleRenderTargets){const Ne=V.texture;if(he.length!==Ne.length||he[0]!==n.COLOR_ATTACHMENT0){for(let Ht=0,zt=Ne.length;Ht<zt;Ht++)he[Ht]=n.COLOR_ATTACHMENT0+Ht;he.length=Ne.length,Se=!0}}else he[0]!==n.COLOR_ATTACHMENT0&&(he[0]=n.COLOR_ATTACHMENT0,Se=!0);else he[0]!==n.BACK&&(he[0]=n.BACK,Se=!0);Se&&(t.isWebGL2?n.drawBuffers(he):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(he))},useProgram:function Me(V){return _!==V&&(n.useProgram(V),_=V,!0)},setBlending:re,setMaterial:function Ee(V,K){2===V.side?Ce(n.CULL_FACE):P(n.CULL_FACE);let he=1===V.side;K&&(he=!he),me(he),1===V.blending&&!1===V.transparent?re(0):re(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.premultipliedAlpha),l.setFunc(V.depthFunc),l.setTest(V.depthTest),l.setMask(V.depthWrite),a.setMask(V.colorWrite);const Se=V.stencilWrite;c.setTest(Se),Se&&(c.setMask(V.stencilWriteMask),c.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),c.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),Fe(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),!0===V.alphaToCoverage?P(n.SAMPLE_ALPHA_TO_COVERAGE):Ce(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:me,setCullFace:Ve,setLineWidth:function He(V){V!==U&&(L&&n.lineWidth(V),U=V)},setPolygonOffset:Fe,setScissorTest:function it(V){V?P(n.SCISSOR_TEST):Ce(n.SCISSOR_TEST)},activeTexture:function Ct(V){void 0===V&&(V=n.TEXTURE0+O-1),j!==V&&(n.activeTexture(V),j=V)},bindTexture:function R(V,K,he){void 0===he&&(he=null===j?n.TEXTURE0+O-1:j);let Se=Y[he];void 0===Se&&(Se={type:void 0,texture:void 0},Y[he]=Se),(Se.type!==V||Se.texture!==K)&&(j!==he&&(n.activeTexture(he),j=he),n.bindTexture(V,K||de[V]),Se.type=V,Se.texture=K)},unbindTexture:function T(){const V=Y[j];void 0!==V&&void 0!==V.type&&(n.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)},compressedTexImage2D:function X(){try{n.compressedTexImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},compressedTexImage3D:function ae(){try{n.compressedTexImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage2D:function Te(){try{n.texImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage3D:function Oe(){try{n.texImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},updateUBOMapping:function Je(V,K){let he=h.get(K);void 0===he&&(he=new WeakMap,h.set(K,he));let Se=he.get(V);void 0===Se&&(Se=n.getUniformBlockIndex(K,V.name),he.set(V,Se))},uniformBlockBinding:function mt(V,K){const Se=h.get(K).get(V);u.get(K)!==Se&&(n.uniformBlockBinding(K,Se,V.__bindingPointIndex),u.set(K,Se))},texStorage2D:function q(){try{n.texStorage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texStorage3D:function ye(){try{n.texStorage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texSubImage2D:function ue(){try{n.texSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texSubImage3D:function _e(){try{n.texSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},compressedTexSubImage2D:function N(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},compressedTexSubImage3D:function ne(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},scissor:function we(V){!1===G.equals(V)&&(n.scissor(V.x,V.y,V.z,V.w),G.copy(V))},viewport:function Le(V){!1===$.equals(V)&&(n.viewport(V.x,V.y,V.z,V.w),$.copy(V))},reset:function Mn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},j=null,Y={},f={},p=new WeakMap,g=[],_=null,m=!1,y=null,v=null,b=null,x=null,w=null,E=null,A=null,M=!1,S=null,F=null,U=null,I=null,B=null,G.set(0,0,n.canvas.width,n.canvas.height),$.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function LQ(n,e,t,i,s,r,o){const a=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,u=s.maxTextureSize,h=s.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const _=new WeakMap;let m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(R){}function y(R,T){return m?new OffscreenCanvas(R,T):Kh("canvas")}function v(R,T,X,ae){let ue=1;if((R.width>ae||R.height>ae)&&(ue=ae/Math.max(R.width,R.height)),ue<1||!0===T){if("undefined"!=typeof HTMLImageElement&&R instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&R instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&R instanceof ImageBitmap){const _e=T?tO:Math.floor,N=_e(ue*R.width),ne=_e(ue*R.height);void 0===g&&(g=y(N,ne));const q=X?y(N,ne):g;return q.width=N,q.height=ne,q.getContext("2d").drawImage(R,0,0,N,ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+N+"x"+ne+")."),q}return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R}return R}function b(R){return yx(R.width)&&yx(R.height)}function w(R,T){return R.generateMipmaps&&T&&R.minFilter!==vn&&R.minFilter!==dn}function E(R){n.generateMipmap(R)}function A(R,T,X,ae,ue=!1){if(!1===a)return T;if(null!==R){if(void 0!==n[R])return n[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let _e=T;return T===n.RED&&(X===n.FLOAT&&(_e=n.R32F),X===n.HALF_FLOAT&&(_e=n.R16F),X===n.UNSIGNED_BYTE&&(_e=n.R8)),T===n.RG&&(X===n.FLOAT&&(_e=n.RG32F),X===n.HALF_FLOAT&&(_e=n.RG16F),X===n.UNSIGNED_BYTE&&(_e=n.RG8)),T===n.RGBA&&(X===n.FLOAT&&(_e=n.RGBA32F),X===n.HALF_FLOAT&&(_e=n.RGBA16F),X===n.UNSIGNED_BYTE&&(_e=ae===Xe&&!1===ue?n.SRGB8_ALPHA8:n.RGBA8),X===n.UNSIGNED_SHORT_4_4_4_4&&(_e=n.RGBA4),X===n.UNSIGNED_SHORT_5_5_5_1&&(_e=n.RGB5_A1)),(_e===n.R16F||_e===n.R32F||_e===n.RG16F||_e===n.RG32F||_e===n.RGBA16F||_e===n.RGBA32F)&&e.get("EXT_color_buffer_float"),_e}function M(R,T,X){return!0===w(R,X)||R.isFramebufferTexture&&R.minFilter!==vn&&R.minFilter!==dn?Math.log2(Math.max(T.width,T.height))+1:void 0!==R.mipmaps&&R.mipmaps.length>0?R.mipmaps.length:R.isCompressedTexture&&Array.isArray(R.image)?T.mipmaps.length:1}function S(R){return R===vn||1004===R||1005===R?n.NEAREST:n.LINEAR}function F(R){const T=R.target;T.removeEventListener("dispose",F),function I(R){const T=i.get(R);if(void 0===T.__webglInit)return;const X=R.source,ae=_.get(X);if(ae){const ue=ae[T.__cacheKey];ue.usedTimes--,0===ue.usedTimes&&B(R),0===Object.keys(ae).length&&_.delete(X)}i.remove(R)}(T),T.isVideoTexture&&p.delete(T)}function U(R){const T=R.target;T.removeEventListener("dispose",U),function O(R){const T=R.texture,X=i.get(R),ae=i.get(T);if(void 0!==ae.__webglTexture&&(n.deleteTexture(ae.__webglTexture),o.memory.textures--),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++)n.deleteFramebuffer(X.__webglFramebuffer[ue]),X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer[ue]);else{if(n.deleteFramebuffer(X.__webglFramebuffer),X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&n.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let ue=0;ue<X.__webglColorRenderbuffer.length;ue++)X.__webglColorRenderbuffer[ue]&&n.deleteRenderbuffer(X.__webglColorRenderbuffer[ue]);X.__webglDepthRenderbuffer&&n.deleteRenderbuffer(X.__webglDepthRenderbuffer)}if(R.isWebGLMultipleRenderTargets)for(let ue=0,_e=T.length;ue<_e;ue++){const N=i.get(T[ue]);N.__webglTexture&&(n.deleteTexture(N.__webglTexture),o.memory.textures--),i.remove(T[ue])}i.remove(T),i.remove(R)}(T)}function B(R){const T=i.get(R);n.deleteTexture(T.__webglTexture),delete _.get(R.source)[T.__cacheKey],o.memory.textures--}let L=0;function Y(R,T){const X=i.get(R);if(R.isVideoTexture&&function it(R){const T=o.render.frame;p.get(R)!==T&&(p.set(R,T),R.update())}(R),!1===R.isRenderTargetTexture&&R.version>0&&X.__version!==R.version){const ae=R.image;if(null===ae)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ae.complete)return void Ce(X,R,T);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,X.__webglTexture,n.TEXTURE0+T)}const $={[Ia]:n.REPEAT,[ui]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},ce={[vn]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[dn]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[Jr]:n.LINEAR_MIPMAP_LINEAR};function de(R,T,X){if(X?(n.texParameteri(R,n.TEXTURE_WRAP_S,$[T.wrapS]),n.texParameteri(R,n.TEXTURE_WRAP_T,$[T.wrapT]),(R===n.TEXTURE_3D||R===n.TEXTURE_2D_ARRAY)&&n.texParameteri(R,n.TEXTURE_WRAP_R,$[T.wrapR]),n.texParameteri(R,n.TEXTURE_MAG_FILTER,ce[T.magFilter]),n.texParameteri(R,n.TEXTURE_MIN_FILTER,ce[T.minFilter])):(n.texParameteri(R,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(R,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(R===n.TEXTURE_3D||R===n.TEXTURE_2D_ARRAY)&&n.texParameteri(R,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(T.wrapS!==ui||T.wrapT!==ui)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(R,n.TEXTURE_MAG_FILTER,S(T.magFilter)),n.texParameteri(R,n.TEXTURE_MIN_FILTER,S(T.minFilter)),T.minFilter!==vn&&T.minFilter!==dn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const ae=e.get("EXT_texture_filter_anisotropic");if(T.magFilter===vn||1005!==T.minFilter&&T.minFilter!==Jr||T.type===ko&&!1===e.has("OES_texture_float_linear")||!1===a&&T.type===qh&&!1===e.has("OES_texture_half_float_linear"))return;(T.anisotropy>1||i.get(T).__currentAnisotropy)&&(n.texParameterf(R,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,s.getMaxAnisotropy())),i.get(T).__currentAnisotropy=T.anisotropy)}}function P(R,T){let X=!1;void 0===R.__webglInit&&(R.__webglInit=!0,T.addEventListener("dispose",F));const ae=T.source;let ue=_.get(ae);void 0===ue&&(ue={},_.set(ae,ue));const _e=function j(R){const T=[];return T.push(R.wrapS),T.push(R.wrapT),T.push(R.wrapR||0),T.push(R.magFilter),T.push(R.minFilter),T.push(R.anisotropy),T.push(R.internalFormat),T.push(R.format),T.push(R.type),T.push(R.generateMipmaps),T.push(R.premultiplyAlpha),T.push(R.flipY),T.push(R.unpackAlignment),T.push(R.colorSpace),T.join()}(T);if(_e!==R.__cacheKey){void 0===ue[_e]&&(ue[_e]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,X=!0),ue[_e].usedTimes++;const N=ue[R.__cacheKey];void 0!==N&&(ue[R.__cacheKey].usedTimes--,0===N.usedTimes&&B(T)),R.__cacheKey=_e,R.__webglTexture=ue[_e].texture}return X}function Ce(R,T,X){let ae=n.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(ae=n.TEXTURE_2D_ARRAY),T.isData3DTexture&&(ae=n.TEXTURE_3D);const ue=P(R,T),_e=T.source;t.bindTexture(ae,R.__webglTexture,n.TEXTURE0+X);const N=i.get(_e);if(_e.version!==N.__version||!0===ue){t.activeTexture(n.TEXTURE0+X),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,T.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,T.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const ne=function x(R){return!a&&(R.wrapS!==ui||R.wrapT!==ui||R.minFilter!==vn&&R.minFilter!==dn)}(T)&&!1===b(T.image);let q=v(T.image,ne,!1,u);q=Ct(T,q);const ye=b(q)||a,Te=r.convert(T.format,T.colorSpace);let Le,Oe=r.convert(T.type),we=A(T.internalFormat,Te,Oe,T.colorSpace);de(ae,T,ye);const Je=T.mipmaps,mt=a&&!0!==T.isVideoTexture,Mn=void 0===N.__version||!0===ue,V=M(T,q,ye);if(T.isDepthTexture)we=n.DEPTH_COMPONENT,a?we=T.type===ko?n.DEPTH_COMPONENT32F:T.type===La?n.DEPTH_COMPONENT24:T.type===Sc?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:T.type===ko&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),T.format===Oa&&we===n.DEPTH_COMPONENT&&1012!==T.type&&T.type!==La&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),T.type=La,Oe=r.convert(T.type)),T.format===Ac&&we===n.DEPTH_COMPONENT&&(we=n.DEPTH_STENCIL,T.type!==Sc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),T.type=Sc,Oe=r.convert(T.type))),Mn&&(mt?t.texStorage2D(n.TEXTURE_2D,1,we,q.width,q.height):t.texImage2D(n.TEXTURE_2D,0,we,q.width,q.height,0,Te,Oe,null));else if(T.isDataTexture)if(Je.length>0&&ye){mt&&Mn&&t.texStorage2D(n.TEXTURE_2D,V,we,Je[0].width,Je[0].height);for(let K=0,he=Je.length;K<he;K++)Le=Je[K],mt?t.texSubImage2D(n.TEXTURE_2D,K,0,0,Le.width,Le.height,Te,Oe,Le.data):t.texImage2D(n.TEXTURE_2D,K,we,Le.width,Le.height,0,Te,Oe,Le.data);T.generateMipmaps=!1}else mt?(Mn&&t.texStorage2D(n.TEXTURE_2D,V,we,q.width,q.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,q.width,q.height,Te,Oe,q.data)):t.texImage2D(n.TEXTURE_2D,0,we,q.width,q.height,0,Te,Oe,q.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){mt&&Mn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,V,we,Je[0].width,Je[0].height,q.depth);for(let K=0,he=Je.length;K<he;K++)Le=Je[K],T.format!==vs?null!==Te?mt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,K,0,0,0,Le.width,Le.height,q.depth,Te,Le.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,K,we,Le.width,Le.height,q.depth,0,Le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):mt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,K,0,0,0,Le.width,Le.height,q.depth,Te,Oe,Le.data):t.texImage3D(n.TEXTURE_2D_ARRAY,K,we,Le.width,Le.height,q.depth,0,Te,Oe,Le.data)}else{mt&&Mn&&t.texStorage2D(n.TEXTURE_2D,V,we,Je[0].width,Je[0].height);for(let K=0,he=Je.length;K<he;K++)Le=Je[K],T.format!==vs?null!==Te?mt?t.compressedTexSubImage2D(n.TEXTURE_2D,K,0,0,Le.width,Le.height,Te,Le.data):t.compressedTexImage2D(n.TEXTURE_2D,K,we,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):mt?t.texSubImage2D(n.TEXTURE_2D,K,0,0,Le.width,Le.height,Te,Oe,Le.data):t.texImage2D(n.TEXTURE_2D,K,we,Le.width,Le.height,0,Te,Oe,Le.data)}else if(T.isDataArrayTexture)mt?(Mn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,V,we,q.width,q.height,q.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,q.width,q.height,q.depth,Te,Oe,q.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,we,q.width,q.height,q.depth,0,Te,Oe,q.data);else if(T.isData3DTexture)mt?(Mn&&t.texStorage3D(n.TEXTURE_3D,V,we,q.width,q.height,q.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,q.width,q.height,q.depth,Te,Oe,q.data)):t.texImage3D(n.TEXTURE_3D,0,we,q.width,q.height,q.depth,0,Te,Oe,q.data);else if(T.isFramebufferTexture){if(Mn)if(mt)t.texStorage2D(n.TEXTURE_2D,V,we,q.width,q.height);else{let K=q.width,he=q.height;for(let Se=0;Se<V;Se++)t.texImage2D(n.TEXTURE_2D,Se,we,K,he,0,Te,Oe,null),K>>=1,he>>=1}}else if(Je.length>0&&ye){mt&&Mn&&t.texStorage2D(n.TEXTURE_2D,V,we,Je[0].width,Je[0].height);for(let K=0,he=Je.length;K<he;K++)Le=Je[K],mt?t.texSubImage2D(n.TEXTURE_2D,K,0,0,Te,Oe,Le):t.texImage2D(n.TEXTURE_2D,K,we,Te,Oe,Le);T.generateMipmaps=!1}else mt?(Mn&&t.texStorage2D(n.TEXTURE_2D,V,we,q.width,q.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Te,Oe,q)):t.texImage2D(n.TEXTURE_2D,0,we,Te,Oe,q);w(T,ye)&&E(ae),N.__version=_e.version,T.onUpdate&&T.onUpdate(T)}R.__version=T.version}function se(R,T,X,ae,ue){const _e=r.convert(X.format,X.colorSpace),N=r.convert(X.type),ne=A(X.internalFormat,_e,N,X.colorSpace);i.get(T).__hasExternalTextures||(ue===n.TEXTURE_3D||ue===n.TEXTURE_2D_ARRAY?t.texImage3D(ue,0,ne,T.width,T.height,T.depth,0,_e,N,null):t.texImage2D(ue,0,ne,T.width,T.height,0,_e,N,null)),t.bindFramebuffer(n.FRAMEBUFFER,R),Fe(T)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ae,ue,i.get(X).__webglTexture,0,He(T)):(ue===n.TEXTURE_2D||ue>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ue<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ae,ue,i.get(X).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Me(R,T,X){if(n.bindRenderbuffer(n.RENDERBUFFER,R),T.depthBuffer&&!T.stencilBuffer){let ae=n.DEPTH_COMPONENT16;if(X||Fe(T)){const ue=T.depthTexture;ue&&ue.isDepthTexture&&(ue.type===ko?ae=n.DEPTH_COMPONENT32F:ue.type===La&&(ae=n.DEPTH_COMPONENT24));const _e=He(T);Fe(T)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,ae,T.width,T.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,ae,T.width,T.height)}else n.renderbufferStorage(n.RENDERBUFFER,ae,T.width,T.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,R)}else if(T.depthBuffer&&T.stencilBuffer){const ae=He(T);X&&!1===Fe(T)?n.renderbufferStorageMultisample(n.RENDERBUFFER,ae,n.DEPTH24_STENCIL8,T.width,T.height):Fe(T)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ae,n.DEPTH24_STENCIL8,T.width,T.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,T.width,T.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,R)}else{const ae=!0===T.isWebGLMultipleRenderTargets?T.texture:[T.texture];for(let ue=0;ue<ae.length;ue++){const _e=ae[ue],N=r.convert(_e.format,_e.colorSpace),ne=r.convert(_e.type),q=A(_e.internalFormat,N,ne,_e.colorSpace),ye=He(T);X&&!1===Fe(T)?n.renderbufferStorageMultisample(n.RENDERBUFFER,ye,q,T.width,T.height):Fe(T)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ye,q,T.width,T.height):n.renderbufferStorage(n.RENDERBUFFER,q,T.width,T.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Q(R){const T=i.get(R),X=!0===R.isWebGLCubeRenderTarget;if(R.depthTexture&&!T.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");!function oe(R,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,R),!T.depthTexture||!T.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),Y(T.depthTexture,0);const ae=i.get(T.depthTexture).__webglTexture,ue=He(T);if(T.depthTexture.format===Oa)Fe(T)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ae,0,ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ae,0);else{if(T.depthTexture.format!==Ac)throw new Error("Unknown depthTexture format");Fe(T)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ae,0,ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ae,0)}}(T.__webglFramebuffer,R)}else if(X){T.__webglDepthbuffer=[];for(let ae=0;ae<6;ae++)t.bindFramebuffer(n.FRAMEBUFFER,T.__webglFramebuffer[ae]),T.__webglDepthbuffer[ae]=n.createRenderbuffer(),Me(T.__webglDepthbuffer[ae],R,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,T.__webglFramebuffer),T.__webglDepthbuffer=n.createRenderbuffer(),Me(T.__webglDepthbuffer,R,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(R){return Math.min(h,R.samples)}function Fe(R){const T=i.get(R);return a&&R.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==T.__useRenderToTexture}function Ct(R,T){const X=R.colorSpace,ae=R.format,ue=R.type;return!0===R.isCompressedTexture||1035===R.format||X!==br&&""!==X&&(X===Xe?!1===a?!0===e.has("EXT_sRGB")&&ae===vs?(R.format=1035,R.minFilter=dn,R.generateMipmaps=!1):T=sO.sRGBToLinear(T):(ae!==vs||ue!==Pa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",X)),T}this.allocateTextureUnit=function H(){const R=L;return R>=l&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+l),L+=1,R},this.resetTextureUnits=function k(){L=0},this.setTexture2D=Y,this.setTexture2DArray=function fe(R,T){const X=i.get(R);R.version>0&&X.__version!==R.version?Ce(X,R,T):t.bindTexture(n.TEXTURE_2D_ARRAY,X.__webglTexture,n.TEXTURE0+T)},this.setTexture3D=function le(R,T){const X=i.get(R);R.version>0&&X.__version!==R.version?Ce(X,R,T):t.bindTexture(n.TEXTURE_3D,X.__webglTexture,n.TEXTURE0+T)},this.setTextureCube=function G(R,T){const X=i.get(R);R.version>0&&X.__version!==R.version?function De(R,T,X){if(6!==T.image.length)return;const ae=P(R,T),ue=T.source;t.bindTexture(n.TEXTURE_CUBE_MAP,R.__webglTexture,n.TEXTURE0+X);const _e=i.get(ue);if(ue.version!==_e.__version||!0===ae){t.activeTexture(n.TEXTURE0+X),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,T.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,T.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const N=T.isCompressedTexture||T.image[0].isCompressedTexture,ne=T.image[0]&&T.image[0].isDataTexture,q=[];for(let K=0;K<6;K++)q[K]=N||ne?ne?T.image[K].image:T.image[K]:v(T.image[K],!1,!0,c),q[K]=Ct(T,q[K]);const ye=q[0],Te=b(ye)||a,Oe=r.convert(T.format,T.colorSpace),we=r.convert(T.type),Le=A(T.internalFormat,Oe,we,T.colorSpace),Je=a&&!0!==T.isVideoTexture,mt=void 0===_e.__version||!0===ae;let V,Mn=M(T,ye,Te);if(de(n.TEXTURE_CUBE_MAP,T,Te),N){Je&&mt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Mn,Le,ye.width,ye.height);for(let K=0;K<6;K++){V=q[K].mipmaps;for(let he=0;he<V.length;he++){const Se=V[he];T.format!==vs?null!==Oe?Je?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he,0,0,Se.width,Se.height,Oe,Se.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he,Le,Se.width,Se.height,0,Se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he,0,0,Se.width,Se.height,Oe,we,Se.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he,Le,Se.width,Se.height,0,Oe,we,Se.data)}}}else{V=T.mipmaps,Je&&mt&&(V.length>0&&Mn++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Mn,Le,q[0].width,q[0].height));for(let K=0;K<6;K++)if(ne){Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,0,0,q[K].width,q[K].height,Oe,we,q[K].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,Le,q[K].width,q[K].height,0,Oe,we,q[K].data);for(let he=0;he<V.length;he++){const Ne=V[he].image[K].image;Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he+1,0,0,Ne.width,Ne.height,Oe,we,Ne.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he+1,Le,Ne.width,Ne.height,0,Oe,we,Ne.data)}}else{Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,0,0,Oe,we,q[K]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,Le,Oe,we,q[K]);for(let he=0;he<V.length;he++){const Se=V[he];Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he+1,0,0,Oe,we,Se.image[K]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,he+1,Le,Oe,we,Se.image[K])}}}w(T,Te)&&E(n.TEXTURE_CUBE_MAP),_e.__version=ue.version,T.onUpdate&&T.onUpdate(T)}R.__version=T.version}(X,R,T):t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+T)},this.rebindTextures=function re(R,T,X){const ae=i.get(R);void 0!==T&&se(ae.__webglFramebuffer,R,R.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),void 0!==X&&Q(R)},this.setupRenderTarget=function Ee(R){const T=R.texture,X=i.get(R),ae=i.get(T);R.addEventListener("dispose",U),!0!==R.isWebGLMultipleRenderTargets&&(void 0===ae.__webglTexture&&(ae.__webglTexture=n.createTexture()),ae.__version=T.version,o.memory.textures++);const ue=!0===R.isWebGLCubeRenderTarget,_e=!0===R.isWebGLMultipleRenderTargets,N=b(R)||a;if(ue){X.__webglFramebuffer=[];for(let ne=0;ne<6;ne++)X.__webglFramebuffer[ne]=n.createFramebuffer()}else{if(X.__webglFramebuffer=n.createFramebuffer(),_e)if(s.drawBuffers){const ne=R.texture;for(let q=0,ye=ne.length;q<ye;q++){const Te=i.get(ne[q]);void 0===Te.__webglTexture&&(Te.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&R.samples>0&&!1===Fe(R)){const ne=_e?T:[T];X.__webglMultisampledFramebuffer=n.createFramebuffer(),X.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let q=0;q<ne.length;q++){const ye=ne[q];X.__webglColorRenderbuffer[q]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,X.__webglColorRenderbuffer[q]);const Te=r.convert(ye.format,ye.colorSpace),Oe=r.convert(ye.type),we=A(ye.internalFormat,Te,Oe,ye.colorSpace,!0===R.isXRRenderTarget),Le=He(R);n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,we,R.width,R.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+q,n.RENDERBUFFER,X.__webglColorRenderbuffer[q])}n.bindRenderbuffer(n.RENDERBUFFER,null),R.depthBuffer&&(X.__webglDepthRenderbuffer=n.createRenderbuffer(),Me(X.__webglDepthRenderbuffer,R,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ue){t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture),de(n.TEXTURE_CUBE_MAP,T,N);for(let ne=0;ne<6;ne++)se(X.__webglFramebuffer[ne],R,T,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ne);w(T,N)&&E(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(_e){const ne=R.texture;for(let q=0,ye=ne.length;q<ye;q++){const Te=ne[q],Oe=i.get(Te);t.bindTexture(n.TEXTURE_2D,Oe.__webglTexture),de(n.TEXTURE_2D,Te,N),se(X.__webglFramebuffer,R,Te,n.COLOR_ATTACHMENT0+q,n.TEXTURE_2D),w(Te,N)&&E(n.TEXTURE_2D)}t.unbindTexture()}else{let ne=n.TEXTURE_2D;(R.isWebGL3DRenderTarget||R.isWebGLArrayRenderTarget)&&(a?ne=R.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ne,ae.__webglTexture),de(ne,T,N),se(X.__webglFramebuffer,R,T,n.COLOR_ATTACHMENT0,ne),w(T,N)&&E(ne),t.unbindTexture()}R.depthBuffer&&Q(R)},this.updateRenderTargetMipmap=function me(R){const T=b(R)||a,X=!0===R.isWebGLMultipleRenderTargets?R.texture:[R.texture];for(let ae=0,ue=X.length;ae<ue;ae++){const _e=X[ae];if(w(_e,T)){const N=R.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ne=i.get(_e).__webglTexture;t.bindTexture(N,ne),E(N),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ve(R){if(a&&R.samples>0&&!1===Fe(R)){const T=R.isWebGLMultipleRenderTargets?R.texture:[R.texture],X=R.width,ae=R.height;let ue=n.COLOR_BUFFER_BIT;const _e=[],N=R.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ne=i.get(R),q=!0===R.isWebGLMultipleRenderTargets;if(q)for(let ye=0;ye<T.length;ye++)t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ne.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ne.__webglFramebuffer);for(let ye=0;ye<T.length;ye++){_e.push(n.COLOR_ATTACHMENT0+ye),R.depthBuffer&&_e.push(N);const Te=void 0!==ne.__ignoreDepthValues&&ne.__ignoreDepthValues;if(!1===Te&&(R.depthBuffer&&(ue|=n.DEPTH_BUFFER_BIT),R.stencilBuffer&&(ue|=n.STENCIL_BUFFER_BIT)),q&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ne.__webglColorRenderbuffer[ye]),!0===Te&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[N]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[N])),q){const Oe=i.get(T[ye]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Oe,0)}n.blitFramebuffer(0,0,X,ae,0,0,X,ae,ue,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,_e)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),q)for(let ye=0;ye<T.length;ye++){t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.RENDERBUFFER,ne.__webglColorRenderbuffer[ye]);const Te=i.get(T[ye]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.TEXTURE_2D,Te,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ne.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=se,this.useMultisampledRTT=Fe}function OQ(n,e,t){const i=t.isWebGL2;return{convert:function s(r,o=""){let a;if(r===Pa)return n.UNSIGNED_BYTE;if(1017===r)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===r)return n.BYTE;if(1011===r)return n.SHORT;if(1012===r)return n.UNSIGNED_SHORT;if(1013===r)return n.INT;if(r===La)return n.UNSIGNED_INT;if(r===ko)return n.FLOAT;if(r===qh)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===r)return n.ALPHA;if(r===vs)return n.RGBA;if(1024===r)return n.LUMINANCE;if(1025===r)return n.LUMINANCE_ALPHA;if(r===Oa)return n.DEPTH_COMPONENT;if(r===Ac)return n.DEPTH_STENCIL;if(1035===r)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===r)return n.RED;if(1029===r)return n.RED_INTEGER;if(1030===r)return n.RG;if(1031===r)return n.RG_INTEGER;if(1033===r)return n.RGBA_INTEGER;if(33776===r||33777===r||33778===r||33779===r)if(o===Xe){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===r)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===r)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===r||35841===r||35842===r||35843===r){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===r)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===r||37496===r){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===r)return o===Xe?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===r)return o===Xe?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===r){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===r)return o===Xe?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===r||36284===r||36285===r||36286===r){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===r)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===r)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===r)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===r)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return r===Sc?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[r]?n[r]:null}}}class NQ extends qn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Go extends jn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const FQ={type:"move"};class jx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Go,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Go,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Go,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const _=t.getJointPose(g,i),m=this._getHandJoint(c,g);null!==_&&(m.matrix.fromArray(_.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=_.radius),m.visible=null!==_}const d=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(s=t.getPose(e.targetRaySpace,i),null===s&&null!==r&&(s=r),null!==s&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(FQ)))}return null!==a&&(a.visible=null!==s),null!==l&&(l.visible=null!==r),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new Go;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class kQ extends Ks{constructor(e,t,i,s,r,o,a,l,c,u){if((u=void 0!==u?u:Oa)!==Oa&&u!==Ac)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Oa&&(i=La),void 0===i&&u===Ac&&(i=Sc),super(null,s,r,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:vn,this.minFilter=void 0!==l?l:vn,this.flipY=!1,this.generateMipmaps=!1}}class BQ extends Ba{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,p=null;const g=t.getContextAttributes();let _=null,m=null;const y=[],v=[],b=new Set,x=new Map,w=new qn;w.layers.enable(1),w.viewport=new Ft;const E=new qn;E.layers.enable(2),E.viewport=new Ft;const A=[w,E],M=new NQ;M.layers.enable(1),M.layers.enable(2);let S=null,F=null;function U(G){const $=v.indexOf(G.inputSource);if(-1===$)return;const ce=y[$];void 0!==ce&&(ce.update(G.inputSource,G.frame,c||o),ce.dispatchEvent({type:G.type,data:G.inputSource}))}function I(){s.removeEventListener("select",U),s.removeEventListener("selectstart",U),s.removeEventListener("selectend",U),s.removeEventListener("squeeze",U),s.removeEventListener("squeezestart",U),s.removeEventListener("squeezeend",U),s.removeEventListener("end",I),s.removeEventListener("inputsourceschange",B);for(let G=0;G<y.length;G++){const $=v[G];null!==$&&(v[G]=null,y[G].disconnect($))}S=null,F=null,e.setRenderTarget(_),f=null,d=null,h=null,s=null,m=null,le.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function B(G){for(let $=0;$<G.removed.length;$++){const ce=G.removed[$],de=v.indexOf(ce);de>=0&&(v[de]=null,y[de].disconnect(ce))}for(let $=0;$<G.added.length;$++){const ce=G.added[$];let de=v.indexOf(ce);if(-1===de){for(let Ce=0;Ce<y.length;Ce++){if(Ce>=v.length){v.push(ce),de=Ce;break}if(null===v[Ce]){v[Ce]=ce,de=Ce;break}}if(-1===de)break}const P=y[de];P&&P.connect(ce)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let $=y[G];return void 0===$&&($=new jx,y[G]=$),$.getTargetRaySpace()},this.getControllerGrip=function(G){let $=y[G];return void 0===$&&($=new jx,y[G]=$),$.getGripSpace()},this.getHand=function(G){let $=y[G];return void 0===$&&($=new jx,y[G]=$),$.getHandSpace()},this.setFramebufferScaleFactor=function(G){r=G,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){a=G,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(G){c=G},this.getBaseLayer=function(){return null!==d?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return s},this.setSession=function(){var G=function l7(n){return function(){var e=this,t=arguments;return new Promise(function(i,s){var r=n.apply(e,t);function o(l){pL(r,i,s,o,a,"next",l)}function a(l){pL(r,i,s,o,a,"throw",l)}o(void 0)})}}(function*($){if(s=$,null!==s){if(_=e.getRenderTarget(),s.addEventListener("select",U),s.addEventListener("selectstart",U),s.addEventListener("selectend",U),s.addEventListener("squeeze",U),s.addEventListener("squeezestart",U),s.addEventListener("squeezeend",U),s.addEventListener("end",I),s.addEventListener("inputsourceschange",B),!0!==g.xrCompatible&&(yield t.makeXRCompatible()),void 0===s.renderState.layers||!1===e.capabilities.isWebGL2)f=new XRWebGLLayer(s,t,{antialias:void 0!==s.renderState.layers||g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:r}),s.updateRenderState({baseLayer:f}),m=new Va(f.framebufferWidth,f.framebufferHeight,{format:vs,type:Pa,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil});else{let ce=null,de=null,P=null;g.depth&&(P=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ce=g.stencil?Ac:Oa,de=g.stencil?Sc:La);const Ce={colorFormat:t.RGBA8,depthFormat:P,scaleFactor:r};h=new XRWebGLBinding(s,t),d=h.createProjectionLayer(Ce),s.updateRenderState({layers:[d]}),m=new Va(d.textureWidth,d.textureHeight,{format:vs,type:Pa,depthTexture:new kQ(d.textureWidth,d.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,ce),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield s.requestReferenceSpace(a),le.setContext(s),le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function($){return G.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==s)return s.environmentBlendMode};const O=new C,L=new C;function H(G,$){null===$?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices($.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(null===s)return;M.near=E.near=w.near=G.near,M.far=E.far=w.far=G.far,(S!==M.near||F!==M.far)&&(s.updateRenderState({depthNear:M.near,depthFar:M.far}),S=M.near,F=M.far);const $=G.parent,ce=M.cameras;H(M,$);for(let de=0;de<ce.length;de++)H(ce[de],$);2===ce.length?function k(G,$,ce){O.setFromMatrixPosition($.matrixWorld),L.setFromMatrixPosition(ce.matrixWorld);const de=O.distanceTo(L),P=$.projectionMatrix.elements,Ce=ce.projectionMatrix.elements,De=P[14]/(P[10]-1),se=P[14]/(P[10]+1),Me=(P[9]+1)/P[5],oe=(P[9]-1)/P[5],Q=(P[8]-1)/P[0],re=(Ce[8]+1)/Ce[0],Ee=De*Q,me=De*re,Ve=de/(-Q+re),He=Ve*-Q;$.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(He),G.translateZ(Ve),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();const Fe=De+Ve,it=se+Ve;G.projectionMatrix.makePerspective(Ee-He,me+(de-He),Me*se/it*Fe,oe*se/it*Fe,Fe,it),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}(M,w,E):M.projectionMatrix.copy(w.projectionMatrix),function j(G,$,ce){null===ce?G.matrix.copy($.matrixWorld):(G.matrix.copy(ce.matrixWorld),G.matrix.invert(),G.matrix.multiply($.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0);const de=G.children;for(let P=0,Ce=de.length;P<Ce;P++)de[P].updateMatrixWorld(!0);G.projectionMatrix.copy($.projectionMatrix),G.projectionMatrixInverse.copy($.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=2*Rc*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}(G,M,$)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==d||null!==f)return l},this.setFoveation=function(G){l=G,null!==d&&(d.fixedFoveation=G),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=G)},this.getPlanes=function(){return b};let Y=null;const le=new EO;le.setAnimationLoop(function fe(G,$){if(u=$.getViewerPose(c||o),p=$,null!==u){const ce=u.views;null!==f&&(e.setRenderTargetFramebuffer(m,f.framebuffer),e.setRenderTarget(m));let de=!1;ce.length!==M.cameras.length&&(M.cameras.length=0,de=!0);for(let P=0;P<ce.length;P++){const Ce=ce[P];let De=null;if(null!==f)De=f.getViewport(Ce);else{const Me=h.getViewSubImage(d,Ce);De=Me.viewport,0===P&&(e.setRenderTargetTextures(m,Me.colorTexture,d.ignoreDepthValues?void 0:Me.depthStencilTexture),e.setRenderTarget(m))}let se=A[P];void 0===se&&(se=new qn,se.layers.enable(P),se.viewport=new Ft,A[P]=se),se.matrix.fromArray(Ce.transform.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale),se.projectionMatrix.fromArray(Ce.projectionMatrix),se.projectionMatrixInverse.copy(se.projectionMatrix).invert(),se.viewport.set(De.x,De.y,De.width,De.height),0===P&&(M.matrix.copy(se.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===de&&M.cameras.push(se)}}for(let ce=0;ce<y.length;ce++){const de=v[ce],P=y[ce];null!==de&&void 0!==P&&P.update(de,$,c||o)}if(Y&&Y(G,$),$.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:$.detectedPlanes});let ce=null;for(const de of b)$.detectedPlanes.has(de)||(null===ce&&(ce=[]),ce.push(de));if(null!==ce)for(const de of ce)b.delete(de),x.delete(de),i.dispatchEvent({type:"planeremoved",data:de});for(const de of $.detectedPlanes)if(b.has(de)){const P=x.get(de);de.lastChangedTime>P&&(x.set(de,de.lastChangedTime),i.dispatchEvent({type:"planechanged",data:de}))}else b.add(de),x.set(de,$.lastChangedTime),i.dispatchEvent({type:"planeadded",data:de})}p=null}),this.setAnimationLoop=function(G){Y=G},this.dispose=function(){}}}function UQ(n,e){function t(_,m){!0===_.matrixAutoUpdate&&_.updateMatrix(),m.value.copy(_.matrix)}function r(_,m){_.opacity.value=m.opacity,m.color&&_.diffuse.value.copy(m.color),m.emissive&&_.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.bumpMap&&(_.bumpMap.value=m.bumpMap,t(m.bumpMap,_.bumpMapTransform),_.bumpScale.value=m.bumpScale,1===m.side&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,t(m.normalMap,_.normalMapTransform),_.normalScale.value.copy(m.normalScale),1===m.side&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,t(m.displacementMap,_.displacementMapTransform),_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,_.emissiveMapTransform)),m.specularMap&&(_.specularMap.value=m.specularMap,t(m.specularMap,_.specularMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);const y=e.get(m).envMap;if(y&&(_.envMap.value=y,_.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,_.reflectivity.value=m.reflectivity,_.ior.value=m.ior,_.refractionRatio.value=m.refractionRatio),m.lightMap){_.lightMap.value=m.lightMap;const v=!0===n.useLegacyLights?Math.PI:1;_.lightMapIntensity.value=m.lightMapIntensity*v,t(m.lightMap,_.lightMapTransform)}m.aoMap&&(_.aoMap.value=m.aoMap,_.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,_.aoMapTransform))}return{refreshFogUniforms:function i(_,m){m.color.getRGB(_.fogColor.value,wO(n)),m.isFog?(_.fogNear.value=m.near,_.fogFar.value=m.far):m.isFogExp2&&(_.fogDensity.value=m.density)},refreshMaterialUniforms:function s(_,m,y,v,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(_,m):m.isMeshToonMaterial?(r(_,m),function h(_,m){m.gradientMap&&(_.gradientMap.value=m.gradientMap)}(_,m)):m.isMeshPhongMaterial?(r(_,m),function u(_,m){_.specular.value.copy(m.specular),_.shininess.value=Math.max(m.shininess,1e-4)}(_,m)):m.isMeshStandardMaterial?(r(_,m),function d(_,m){_.metalness.value=m.metalness,m.metalnessMap&&(_.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,_.metalnessMapTransform)),_.roughness.value=m.roughness,m.roughnessMap&&(_.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,_.roughnessMapTransform)),e.get(m).envMap&&(_.envMapIntensity.value=m.envMapIntensity)}(_,m),m.isMeshPhysicalMaterial&&function f(_,m,y){_.ior.value=m.ior,m.sheen>0&&(_.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),_.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(_.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,_.sheenColorMapTransform)),m.sheenRoughnessMap&&(_.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,_.sheenRoughnessMapTransform))),m.clearcoat>0&&(_.clearcoat.value=m.clearcoat,_.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(_.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,_.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(_.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),1===m.side&&_.clearcoatNormalScale.value.negate())),m.iridescence>0&&(_.iridescence.value=m.iridescence,_.iridescenceIOR.value=m.iridescenceIOR,_.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(_.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,_.iridescenceMapTransform)),m.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),m.transmission>0&&(_.transmission.value=m.transmission,_.transmissionSamplerMap.value=y.texture,_.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(_.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,_.transmissionMapTransform)),_.thickness.value=m.thickness,m.thicknessMap&&(_.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=m.attenuationDistance,_.attenuationColor.value.copy(m.attenuationColor)),_.specularIntensity.value=m.specularIntensity,_.specularColor.value.copy(m.specularColor),m.specularColorMap&&(_.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,_.specularColorMapTransform)),m.specularIntensityMap&&(_.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,_.specularIntensityMapTransform))}(_,m,b)):m.isMeshMatcapMaterial?(r(_,m),function p(_,m){m.matcap&&(_.matcap.value=m.matcap)}(_,m)):m.isMeshDepthMaterial?r(_,m):m.isMeshDistanceMaterial?(r(_,m),function g(_,m){const y=e.get(m).light;_.referencePosition.value.setFromMatrixPosition(y.matrixWorld),_.nearDistance.value=y.shadow.camera.near,_.farDistance.value=y.shadow.camera.far}(_,m)):m.isMeshNormalMaterial?r(_,m):m.isLineBasicMaterial?(function o(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform))}(_,m),m.isLineDashedMaterial&&function a(_,m){_.dashSize.value=m.dashSize,_.totalSize.value=m.dashSize+m.gapSize,_.scale.value=m.scale}(_,m)):m.isPointsMaterial?function l(_,m,y,v){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.size.value=m.size*y,_.scale.value=.5*v,m.map&&(_.map.value=m.map,t(m.map,_.uvTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}(_,m,y,v):m.isSpriteMaterial?function c(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.rotation.value=m.rotation,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}(_,m):m.isShadowMaterial?(_.color.value.copy(m.color),_.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function VQ(n,e,t,i){let s={},r={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(y,v,b){const x=y.value;if(void 0===b[v]){if("number"==typeof x)b[v]=x;else{const w=Array.isArray(x)?x:[x],E=[];for(let A=0;A<w.length;A++)E.push(w[A].clone());b[v]=E}return!0}if("number"==typeof x){if(b[v]!==x)return b[v]=x,!0}else{const w=Array.isArray(b[v])?b[v]:[b[v]],E=Array.isArray(x)?x:[x];for(let A=0;A<w.length;A++){const M=w[A];if(!1===M.equals(E[A]))return M.copy(E[A]),!0}}return!1}function g(y){const v={boundary:0,storage:0};return"number"==typeof y?(v.boundary=4,v.storage=4):y.isVector2?(v.boundary=8,v.storage=8):y.isVector3||y.isColor?(v.boundary=16,v.storage=12):y.isVector4?(v.boundary=16,v.storage=16):y.isMatrix3?(v.boundary=48,v.storage=48):y.isMatrix4?(v.boundary=64,v.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),v}function _(y){const v=y.target;v.removeEventListener("dispose",_);const b=o.indexOf(v.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(s[v.id]),delete s[v.id],delete r[v.id]}return{bind:function l(y,v){i.uniformBlockBinding(y,v.program)},update:function c(y,v){let b=s[y.id];void 0===b&&(function p(y){const v=y.uniforms;let b=0;let w=0;for(let E=0,A=v.length;E<A;E++){const M=v[E],S={boundary:0,storage:0},F=Array.isArray(M.value)?M.value:[M.value];for(let U=0,I=F.length;U<I;U++){const O=g(F[U]);S.boundary+=O.boundary,S.storage+=O.storage}if(M.__data=new Float32Array(S.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=b,E>0){w=b%16;const U=16-w;0!==w&&U-S.boundary<0&&(b+=16-w,M.__offset=b)}b+=S.storage}w=b%16,w>0&&(b+=16-w),y.__size=b,y.__cache={}}(y),b=function u(y){const v=function h(){for(let y=0;y<a;y++)if(-1===o.indexOf(y))return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();y.__bindingPointIndex=v;const b=n.createBuffer(),x=y.__size,w=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,x,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,b),b}(y),s[y.id]=b,y.addEventListener("dispose",_)),i.updateUBOMapping(y,v.program);const w=e.render.frame;r[y.id]!==w&&(function d(y){const b=y.uniforms,x=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,s[y.id]);for(let w=0,E=b.length;w<E;w++){const A=b[w];if(!0===f(A,w,x)){const M=A.__offset,S=Array.isArray(A.value)?A.value:[A.value];let F=0;for(let U=0;U<S.length;U++){const I=S[U],B=g(I);"number"==typeof I?(A.__data[0]=I,n.bufferSubData(n.UNIFORM_BUFFER,M+F,A.__data)):I.isMatrix3?(A.__data[0]=I.elements[0],A.__data[1]=I.elements[1],A.__data[2]=I.elements[2],A.__data[3]=I.elements[0],A.__data[4]=I.elements[3],A.__data[5]=I.elements[4],A.__data[6]=I.elements[5],A.__data[7]=I.elements[0],A.__data[8]=I.elements[6],A.__data[9]=I.elements[7],A.__data[10]=I.elements[8],A.__data[11]=I.elements[0]):(I.toArray(A.__data,F),F+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,M,A.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(y),r[y.id]=w)},dispose:function m(){for(const y in s)n.deleteBuffer(s[y]);o=[],s={},r={}}}}function HQ(){const n=Kh("canvas");return n.style.display="block",n}class QO{constructor(e={}){const{canvas:t=HQ(),context:i=null,depth:s=!0,stencil:r=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;let d;this.isWebGLRenderer=!0,d=null!==i?i.getContextAttributes().alpha:o;let f=null,p=null;const g=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Xe,this.useLegacyLights=!0,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let y=!1,v=0,b=0,x=null,w=-1,E=null;const A=new Ft,M=new Ft;let S=null,F=t.width,U=t.height,I=1,B=null,O=null;const L=new Ft(0,0,F,U),k=new Ft(0,0,F,U);let H=!1;const j=new Ux;let Y=!1,fe=!1,le=null;const G=new Ye,$=new C,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function de(){return null===x?I:1}let De,se,Me,oe,Q,re,Ee,me,Ve,He,Fe,it,Ct,R,T,X,ae,ue,_e,N,ne,q,ye,Te,P=i;function Ce(D,W){for(let Z=0;Z<D.length;Z++){const ee=t.getContext(D[Z],W);if(null!==ee)return ee}return null}try{const D={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r152"),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",Je,!1),t.addEventListener("webglcontextcreationerror",mt,!1),null===P){const W=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&W.shift(),P=Ce(W,D),null===P)throw Ce(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===P.getShaderPrecisionFormat&&(P.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}function Oe(){De=new eJ(P),se=new XZ(P,De,e),De.init(se),q=new OQ(P,De,se),Me=new PQ(P,De,se),oe=new iJ(P),Q=new bQ,re=new LQ(P,De,Me,Q,se,q,oe),Ee=new KZ(m),me=new QZ(m),Ve=new YY(P,se),ye=new $Z(P,De,Ve,se),He=new tJ(P,Ve,oe,ye),Fe=new aJ(P,He,Ve,oe),_e=new oJ(P,se,re),X=new YZ(Q),it=new vQ(m,Ee,me,De,se,ye,X),Ct=new UQ(m,Q),R=new MQ,T=new CQ(De,se),ue=new jZ(m,Ee,me,Me,Fe,d,l),ae=new IQ(m,Fe,se),Te=new VQ(P,oe,se,Me),N=new qZ(P,De,oe,se),ne=new nJ(P,De,oe,se),oe.programs=it.programs,m.capabilities=se,m.extensions=De,m.properties=Q,m.renderLists=R,m.shadowMap=ae,m.state=Me,m.info=oe}Oe();const we=new BQ(m,P);function Le(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Je(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const D=oe.autoReset,W=ae.enabled,Z=ae.autoUpdate,z=ae.needsUpdate,ee=ae.type;Oe(),oe.autoReset=D,ae.enabled=W,ae.autoUpdate=Z,ae.needsUpdate=z,ae.type=ee}function mt(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function Mn(D){const W=D.target;W.removeEventListener("dispose",Mn),function V(D){(function K(D){const W=Q.get(D).programs;void 0!==W&&(W.forEach(function(Z){it.releaseProgram(Z)}),D.isShaderMaterial&&it.releaseShaderCache(D))})(D),Q.remove(D)}(W)}this.xr=we,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){const D=De.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=De.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(D){void 0!==D&&(I=D,this.setSize(F,U,!1))},this.getSize=function(D){return D.set(F,U)},this.setSize=function(D,W,Z=!0){we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(F=D,U=W,t.width=Math.floor(D*I),t.height=Math.floor(W*I),!0===Z&&(t.style.width=D+"px",t.style.height=W+"px"),this.setViewport(0,0,D,W))},this.getDrawingBufferSize=function(D){return D.set(F*I,U*I).floor()},this.setDrawingBufferSize=function(D,W,Z){F=D,U=W,I=Z,t.width=Math.floor(D*Z),t.height=Math.floor(W*Z),this.setViewport(0,0,D,W)},this.getCurrentViewport=function(D){return D.copy(A)},this.getViewport=function(D){return D.copy(L)},this.setViewport=function(D,W,Z,z){D.isVector4?L.set(D.x,D.y,D.z,D.w):L.set(D,W,Z,z),Me.viewport(A.copy(L).multiplyScalar(I).floor())},this.getScissor=function(D){return D.copy(k)},this.setScissor=function(D,W,Z,z){D.isVector4?k.set(D.x,D.y,D.z,D.w):k.set(D,W,Z,z),Me.scissor(M.copy(k).multiplyScalar(I).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(D){Me.setScissorTest(H=D)},this.setOpaqueSort=function(D){B=D},this.setTransparentSort=function(D){O=D},this.getClearColor=function(D){return D.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(D=!0,W=!0,Z=!0){let z=0;D&&(z|=P.COLOR_BUFFER_BIT),W&&(z|=P.DEPTH_BUFFER_BIT),Z&&(z|=P.STENCIL_BUFFER_BIT),P.clear(z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",Je,!1),t.removeEventListener("webglcontextcreationerror",mt,!1),R.dispose(),T.dispose(),Q.dispose(),Ee.dispose(),me.dispose(),Fe.dispose(),ye.dispose(),Te.dispose(),it.dispose(),we.dispose(),we.removeEventListener("sessionstart",Ne),we.removeEventListener("sessionend",Ht),le&&(le.dispose(),le=null),zt.stop()},this.renderBufferDirect=function(D,W,Z,z,ee,ke){null===W&&(W=ce);const We=ee.isMesh&&ee.matrixWorld.determinant()<0,Qe=function Ofe(D,W,Z,z,ee){!0!==W.isScene&&(W=ce),re.resetTextureUnits();const ke=W.fog,Qe=null===x?m.outputColorSpace:!0===x.isXRRenderTarget?x.texture.colorSpace:br,ht=(z.isMeshStandardMaterial?me:Ee).get(z.envMap||(z.isMeshStandardMaterial?W.environment:null)),yt=!0===z.vertexColors&&!!Z.attributes.color&&4===Z.attributes.color.itemSize,vt=!!z.normalMap&&!!Z.attributes.tangent,St=!!Z.morphAttributes.position,Bt=!!Z.morphAttributes.normal,Pi=!!Z.morphAttributes.color,ir=z.toneMapped?m.toneMapping:0,yl=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,Rn=void 0!==yl?yl.length:0,Dt=Q.get(z),fE=p.state.lights;!0!==Y||!0!==fe&&D===E||X.setState(z,D,D===E&&z.id===w);let Yn=!1;z.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==fE.state.version||Dt.outputColorSpace!==Qe||ee.isInstancedMesh&&!1===Dt.instancing||!ee.isInstancedMesh&&!0===Dt.instancing||ee.isSkinnedMesh&&!1===Dt.skinning||!ee.isSkinnedMesh&&!0===Dt.skinning||Dt.envMap!==ht||!0===z.fog&&Dt.fog!==ke||void 0!==Dt.numClippingPlanes&&(Dt.numClippingPlanes!==X.numPlanes||Dt.numIntersection!==X.numIntersection)||Dt.vertexAlphas!==yt||Dt.vertexTangents!==vt||Dt.morphTargets!==St||Dt.morphNormals!==Bt||Dt.morphColors!==Pi||Dt.toneMapping!==ir||!0===se.isWebGL2&&Dt.morphTargetsCount!==Rn)&&(Yn=!0):(Yn=!0,Dt.__version=z.version);let vl=Dt.currentProgram;!0===Yn&&(vl=T_(z,W,ee));let sU=!1,sf=!1,pE=!1;const Li=vl.getUniforms(),bl=Dt.uniforms;if(Me.useProgram(vl.program)&&(sU=!0,sf=!0,pE=!0),z.id!==w&&(w=z.id,sf=!0),sU||E!==D){if(Li.setValue(P,"projectionMatrix",D.projectionMatrix),se.logarithmicDepthBuffer&&Li.setValue(P,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),E!==D&&(E=D,sf=!0,pE=!0),z.isShaderMaterial||z.isMeshPhongMaterial||z.isMeshToonMaterial||z.isMeshStandardMaterial||z.envMap){const as=Li.map.cameraPosition;void 0!==as&&as.setValue(P,$.setFromMatrixPosition(D.matrixWorld))}(z.isMeshPhongMaterial||z.isMeshToonMaterial||z.isMeshLambertMaterial||z.isMeshBasicMaterial||z.isMeshStandardMaterial||z.isShaderMaterial)&&Li.setValue(P,"isOrthographic",!0===D.isOrthographicCamera),(z.isMeshPhongMaterial||z.isMeshToonMaterial||z.isMeshLambertMaterial||z.isMeshBasicMaterial||z.isMeshStandardMaterial||z.isShaderMaterial||z.isShadowMaterial||ee.isSkinnedMesh)&&Li.setValue(P,"viewMatrix",D.matrixWorldInverse)}if(ee.isSkinnedMesh){Li.setOptional(P,ee,"bindMatrix"),Li.setOptional(P,ee,"bindMatrixInverse");const as=ee.skeleton;as&&(se.floatVertexTextures?(null===as.boneTexture&&as.computeBoneTexture(),Li.setValue(P,"boneTexture",as.boneTexture,re),Li.setValue(P,"boneTextureSize",as.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const mE=Z.morphAttributes;if((void 0!==mE.position||void 0!==mE.normal||void 0!==mE.color&&!0===se.isWebGL2)&&_e.update(ee,Z,vl),(sf||Dt.receiveShadow!==ee.receiveShadow)&&(Dt.receiveShadow=ee.receiveShadow,Li.setValue(P,"receiveShadow",ee.receiveShadow)),z.isMeshGouraudMaterial&&null!==z.envMap&&(bl.envMap.value=ht,bl.flipEnvMap.value=ht.isCubeTexture&&!1===ht.isRenderTargetTexture?-1:1),sf&&(Li.setValue(P,"toneMappingExposure",m.toneMappingExposure),Dt.needsLights&&function Nfe(D,W){D.ambientLightColor.needsUpdate=W,D.lightProbe.needsUpdate=W,D.directionalLights.needsUpdate=W,D.directionalLightShadows.needsUpdate=W,D.pointLights.needsUpdate=W,D.pointLightShadows.needsUpdate=W,D.spotLights.needsUpdate=W,D.spotLightShadows.needsUpdate=W,D.rectAreaLights.needsUpdate=W,D.hemisphereLights.needsUpdate=W}(bl,pE),ke&&!0===z.fog&&Ct.refreshFogUniforms(bl,ke),Ct.refreshMaterialUniforms(bl,z,I,U,le),Xm.upload(P,Dt.uniformsList,bl,re)),z.isShaderMaterial&&!0===z.uniformsNeedUpdate&&(Xm.upload(P,Dt.uniformsList,bl,re),z.uniformsNeedUpdate=!1),z.isSpriteMaterial&&Li.setValue(P,"center",ee.center),Li.setValue(P,"modelViewMatrix",ee.modelViewMatrix),Li.setValue(P,"normalMatrix",ee.normalMatrix),Li.setValue(P,"modelMatrix",ee.matrixWorld),z.isShaderMaterial||z.isRawShaderMaterial){const as=z.uniformsGroups;for(let gE=0,kfe=as.length;gE<kfe;gE++)if(se.isWebGL2){const rU=as[gE];Te.update(rU,vl),Te.bind(rU,vl)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return vl}(D,W,Z,z,ee);Me.setMaterial(z,We);let ht=Z.index,yt=1;!0===z.wireframe&&(ht=He.getWireframeAttribute(Z),yt=2);const vt=Z.drawRange,St=Z.attributes.position;let Bt=vt.start*yt,Pi=(vt.start+vt.count)*yt;null!==ke&&(Bt=Math.max(Bt,ke.start*yt),Pi=Math.min(Pi,(ke.start+ke.count)*yt)),null!==ht?(Bt=Math.max(Bt,0),Pi=Math.min(Pi,ht.count)):null!=St&&(Bt=Math.max(Bt,0),Pi=Math.min(Pi,St.count));const ir=Pi-Bt;if(ir<0||ir===1/0)return;ye.setup(ee,z,Qe,Z,ht);let yl,Rn=N;if(null!==ht&&(yl=Ve.get(ht),Rn=ne,Rn.setIndex(yl)),ee.isMesh)!0===z.wireframe?(Me.setLineWidth(z.wireframeLinewidth*de()),Rn.setMode(P.LINES)):Rn.setMode(P.TRIANGLES);else if(ee.isLine){let Dt=z.linewidth;void 0===Dt&&(Dt=1),Me.setLineWidth(Dt*de()),Rn.setMode(ee.isLineSegments?P.LINES:ee.isLineLoop?P.LINE_LOOP:P.LINE_STRIP)}else ee.isPoints?Rn.setMode(P.POINTS):ee.isSprite&&Rn.setMode(P.TRIANGLES);if(ee.isInstancedMesh)Rn.renderInstances(Bt,ir,ee.count);else if(Z.isInstancedBufferGeometry){const fE=Math.min(Z.instanceCount,void 0!==Z._maxInstanceCount?Z._maxInstanceCount:1/0);Rn.renderInstances(Bt,ir,fE)}else Rn.render(Bt,ir)},this.compile=function(D,W){function Z(z,ee,ke){!0===z.transparent&&2===z.side&&!1===z.forceSinglePass?(z.side=1,z.needsUpdate=!0,T_(z,ee,ke),z.side=0,z.needsUpdate=!0,T_(z,ee,ke),z.side=2):T_(z,ee,ke)}p=T.get(D),p.init(),_.push(p),D.traverseVisible(function(z){z.isLight&&z.layers.test(W.layers)&&(p.pushLight(z),z.castShadow&&p.pushShadow(z))}),p.setupLights(m.useLegacyLights),D.traverse(function(z){const ee=z.material;if(ee)if(Array.isArray(ee))for(let ke=0;ke<ee.length;ke++)Z(ee[ke],D,z);else Z(ee,D,z)}),_.pop(),p=null};let he=null;function Ne(){zt.stop()}function Ht(){zt.start()}const zt=new EO;function _i(D,W,Z,z){if(!1===D.visible)return;if(D.layers.test(W.layers))if(D.isGroup)Z=D.renderOrder;else if(D.isLOD)!0===D.autoUpdate&&D.update(W);else if(D.isLight)p.pushLight(D),D.castShadow&&p.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||j.intersectsSprite(D)){z&&$.setFromMatrixPosition(D.matrixWorld).applyMatrix4(G);const We=Fe.update(D),Qe=D.material;Qe.visible&&f.push(D,We,Qe,Z,$.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||j.intersectsObject(D))){D.isSkinnedMesh&&D.skeleton.frame!==oe.render.frame&&(D.skeleton.update(),D.skeleton.frame=oe.render.frame);const We=Fe.update(D),Qe=D.material;if(z&&(null===We.boundingSphere&&We.computeBoundingSphere(),$.copy(We.boundingSphere.center).applyMatrix4(D.matrixWorld).applyMatrix4(G)),Array.isArray(Qe)){const ht=We.groups;for(let yt=0,vt=ht.length;yt<vt;yt++){const St=ht[yt],Bt=Qe[St.materialIndex];Bt&&Bt.visible&&f.push(D,We,Bt,Z,$.z,St)}}else Qe.visible&&f.push(D,We,Qe,Z,$.z,null)}const ke=D.children;for(let We=0,Qe=ke.length;We<Qe;We++)_i(ke[We],W,Z,z)}function ia(D,W,Z,z){const ee=D.opaque,ke=D.transmissive,We=D.transparent;p.setupLightsView(Z),!0===Y&&X.setGlobalState(m.clippingPlanes,Z),ke.length>0&&function wn(D,W,Z,z){if(null===le){const Qe=se.isWebGL2;le=new Va(1024,1024,{generateMipmaps:!0,type:De.has("EXT_color_buffer_half_float")?qh:Pa,minFilter:Jr,samples:Qe&&!0===a?4:0})}const ee=m.getRenderTarget();m.setRenderTarget(le),m.clear();const ke=m.toneMapping;m.toneMapping=0,Rs(D,Z,z),re.updateMultisampleRenderTarget(le),re.updateRenderTargetMipmap(le);let We=!1;for(let Qe=0,ht=W.length;Qe<ht;Qe++){const yt=W[Qe],vt=yt.object,St=yt.geometry,Bt=yt.material,Pi=yt.group;if(2===Bt.side&&vt.layers.test(z.layers)){const ir=Bt.side;Bt.side=1,Bt.needsUpdate=!0,Lr(vt,Z,z,St,Bt,Pi),Bt.side=ir,Bt.needsUpdate=!0,We=!0}}!0===We&&(re.updateMultisampleRenderTarget(le),re.updateRenderTargetMipmap(le)),m.setRenderTarget(ee),m.toneMapping=ke}(ee,ke,W,Z),z&&Me.viewport(A.copy(z)),ee.length>0&&Rs(ee,W,Z),ke.length>0&&Rs(ke,W,Z),We.length>0&&Rs(We,W,Z),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function Rs(D,W,Z){const z=!0===W.isScene?W.overrideMaterial:null;for(let ee=0,ke=D.length;ee<ke;ee++){const We=D[ee],Qe=We.object,ht=We.geometry,yt=null===z?We.material:z,vt=We.group;Qe.layers.test(Z.layers)&&Lr(Qe,W,Z,ht,yt,vt)}}function Lr(D,W,Z,z,ee,ke){D.onBeforeRender(m,W,Z,z,ee,ke),D.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),ee.onBeforeRender(m,W,Z,z,D,ke),!0===ee.transparent&&2===ee.side&&!1===ee.forceSinglePass?(ee.side=1,ee.needsUpdate=!0,m.renderBufferDirect(Z,W,z,ee,D,ke),ee.side=0,ee.needsUpdate=!0,m.renderBufferDirect(Z,W,z,ee,D,ke),ee.side=2):m.renderBufferDirect(Z,W,z,ee,D,ke),D.onAfterRender(m,W,Z,z,ee,ke)}function T_(D,W,Z){!0!==W.isScene&&(W=ce);const z=Q.get(D),ee=p.state.lights,We=ee.state.version,Qe=it.getParameters(D,ee.state,p.state.shadowsArray,W,Z),ht=it.getProgramCacheKey(Qe);let yt=z.programs;z.environment=D.isMeshStandardMaterial?W.environment:null,z.fog=W.fog,z.envMap=(D.isMeshStandardMaterial?me:Ee).get(D.envMap||z.environment),void 0===yt&&(D.addEventListener("dispose",Mn),yt=new Map,z.programs=yt);let vt=yt.get(ht);if(void 0!==vt){if(z.currentProgram===vt&&z.lightsStateVersion===We)return iU(D,Qe),vt}else Qe.uniforms=it.getUniforms(D),D.onBuild(Z,Qe,m),D.onBeforeCompile(Qe,m),vt=it.acquireProgram(Qe,ht),yt.set(ht,vt),z.uniforms=Qe.uniforms;const St=z.uniforms;(!D.isShaderMaterial&&!D.isRawShaderMaterial||!0===D.clipping)&&(St.clippingPlanes=X.uniform),iU(D,Qe),z.needsLights=function Ffe(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&!0===D.lights}(D),z.lightsStateVersion=We,z.needsLights&&(St.ambientLightColor.value=ee.state.ambient,St.lightProbe.value=ee.state.probe,St.directionalLights.value=ee.state.directional,St.directionalLightShadows.value=ee.state.directionalShadow,St.spotLights.value=ee.state.spot,St.spotLightShadows.value=ee.state.spotShadow,St.rectAreaLights.value=ee.state.rectArea,St.ltc_1.value=ee.state.rectAreaLTC1,St.ltc_2.value=ee.state.rectAreaLTC2,St.pointLights.value=ee.state.point,St.pointLightShadows.value=ee.state.pointShadow,St.hemisphereLights.value=ee.state.hemi,St.directionalShadowMap.value=ee.state.directionalShadowMap,St.directionalShadowMatrix.value=ee.state.directionalShadowMatrix,St.spotShadowMap.value=ee.state.spotShadowMap,St.spotLightMatrix.value=ee.state.spotLightMatrix,St.spotLightMap.value=ee.state.spotLightMap,St.pointShadowMap.value=ee.state.pointShadowMap,St.pointShadowMatrix.value=ee.state.pointShadowMatrix);const Bt=vt.getUniforms(),Pi=Xm.seqWithValue(Bt.seq,St);return z.currentProgram=vt,z.uniformsList=Pi,vt}function iU(D,W){const Z=Q.get(D);Z.outputColorSpace=W.outputColorSpace,Z.instancing=W.instancing,Z.skinning=W.skinning,Z.morphTargets=W.morphTargets,Z.morphNormals=W.morphNormals,Z.morphColors=W.morphColors,Z.morphTargetsCount=W.morphTargetsCount,Z.numClippingPlanes=W.numClippingPlanes,Z.numIntersection=W.numClipIntersection,Z.vertexAlphas=W.vertexAlphas,Z.vertexTangents=W.vertexTangents,Z.toneMapping=W.toneMapping}zt.setAnimationLoop(function Se(D){he&&he(D)}),"undefined"!=typeof self&&zt.setContext(self),this.setAnimationLoop=function(D){he=D,we.setAnimationLoop(D),null===D?zt.stop():zt.start()},we.addEventListener("sessionstart",Ne),we.addEventListener("sessionend",Ht),this.render=function(D,W){if(void 0===W||!0===W.isCamera){if(!0!==y){if(!0===D.matrixWorldAutoUpdate&&D.updateMatrixWorld(),null===W.parent&&!0===W.matrixWorldAutoUpdate&&W.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(W),W=we.getCamera()),!0===D.isScene&&D.onBeforeRender(m,D,W,x),p=T.get(D,_.length),p.init(),_.push(p),G.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),j.setFromProjectionMatrix(G),fe=this.localClippingEnabled,Y=X.init(this.clippingPlanes,fe),f=R.get(D,g.length),f.init(),g.push(f),_i(D,W,0,m.sortObjects),f.finish(),!0===m.sortObjects&&f.sort(B,O),!0===Y&&X.beginShadows(),ae.render(p.state.shadowsArray,D,W),!0===Y&&X.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(f,D),p.setupLights(m.useLegacyLights),W.isArrayCamera){const z=W.cameras;for(let ee=0,ke=z.length;ee<ke;ee++){const We=z[ee];ia(f,D,We,We.viewport)}}else ia(f,D,W);null!==x&&(re.updateMultisampleRenderTarget(x),re.updateRenderTargetMipmap(x)),!0===D.isScene&&D.onAfterRender(m,D,W),ye.resetDefaultState(),w=-1,E=null,_.pop(),p=_.length>0?_[_.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(D,W,Z){Q.get(D.texture).__webglTexture=W,Q.get(D.depthTexture).__webglTexture=Z;const z=Q.get(D);z.__hasExternalTextures=!0,z.__hasExternalTextures&&(z.__autoAllocateDepthBuffer=void 0===Z,z.__autoAllocateDepthBuffer||!0===De.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),z.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(D,W){const Z=Q.get(D);Z.__webglFramebuffer=W,Z.__useDefaultFramebuffer=void 0===W},this.setRenderTarget=function(D,W=0,Z=0){x=D,v=W,b=Z;let z=!0,ee=null,ke=!1,We=!1;if(D){const ht=Q.get(D);void 0!==ht.__useDefaultFramebuffer?(Me.bindFramebuffer(P.FRAMEBUFFER,null),z=!1):void 0===ht.__webglFramebuffer?re.setupRenderTarget(D):ht.__hasExternalTextures&&re.rebindTextures(D,Q.get(D.texture).__webglTexture,Q.get(D.depthTexture).__webglTexture);const yt=D.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(We=!0);const vt=Q.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(ee=vt[W],ke=!0):ee=se.isWebGL2&&D.samples>0&&!1===re.useMultisampledRTT(D)?Q.get(D).__webglMultisampledFramebuffer:vt,A.copy(D.viewport),M.copy(D.scissor),S=D.scissorTest}else A.copy(L).multiplyScalar(I).floor(),M.copy(k).multiplyScalar(I).floor(),S=H;if(Me.bindFramebuffer(P.FRAMEBUFFER,ee)&&se.drawBuffers&&z&&Me.drawBuffers(D,ee),Me.viewport(A),Me.scissor(M),Me.setScissorTest(S),ke){const ht=Q.get(D.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+W,ht.__webglTexture,Z)}else if(We){const ht=Q.get(D.texture);P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,ht.__webglTexture,Z||0,W||0)}w=-1},this.readRenderTargetPixels=function(D,W,Z,z,ee,ke,We){if(!D||!D.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Qe=Q.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&void 0!==We&&(Qe=Qe[We]),Qe){Me.bindFramebuffer(P.FRAMEBUFFER,Qe);try{const ht=D.texture,yt=ht.format,vt=ht.type;if(yt!==vs&&q.convert(yt)!==P.getParameter(P.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const St=vt===qh&&(De.has("EXT_color_buffer_half_float")||se.isWebGL2&&De.has("EXT_color_buffer_float"));if(!(vt===Pa||q.convert(vt)===P.getParameter(P.IMPLEMENTATION_COLOR_READ_TYPE)||vt===ko&&(se.isWebGL2||De.has("OES_texture_float")||De.has("WEBGL_color_buffer_float"))||St))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");W>=0&&W<=D.width-z&&Z>=0&&Z<=D.height-ee&&P.readPixels(W,Z,z,ee,q.convert(yt),q.convert(vt),ke)}finally{const ht=null!==x?Q.get(x).__webglFramebuffer:null;Me.bindFramebuffer(P.FRAMEBUFFER,ht)}}},this.copyFramebufferToTexture=function(D,W,Z=0){const z=Math.pow(2,-Z),ee=Math.floor(W.image.width*z),ke=Math.floor(W.image.height*z);re.setTexture2D(W,0),P.copyTexSubImage2D(P.TEXTURE_2D,Z,0,0,D.x,D.y,ee,ke),Me.unbindTexture()},this.copyTextureToTexture=function(D,W,Z,z=0){const ee=W.image.width,ke=W.image.height,We=q.convert(Z.format),Qe=q.convert(Z.type);re.setTexture2D(Z,0),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,Z.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,Z.unpackAlignment),W.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,z,D.x,D.y,ee,ke,We,Qe,W.image.data):W.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,z,D.x,D.y,W.mipmaps[0].width,W.mipmaps[0].height,We,W.mipmaps[0].data):P.texSubImage2D(P.TEXTURE_2D,z,D.x,D.y,We,Qe,W.image),0===z&&Z.generateMipmaps&&P.generateMipmap(P.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(D,W,Z,z,ee=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ke=D.max.x-D.min.x+1,We=D.max.y-D.min.y+1,Qe=D.max.z-D.min.z+1,ht=q.convert(z.format),yt=q.convert(z.type);let vt;if(z.isData3DTexture)re.setTexture3D(z,0),vt=P.TEXTURE_3D;else{if(!z.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");re.setTexture2DArray(z,0),vt=P.TEXTURE_2D_ARRAY}P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,z.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,z.unpackAlignment);const St=P.getParameter(P.UNPACK_ROW_LENGTH),Bt=P.getParameter(P.UNPACK_IMAGE_HEIGHT),Pi=P.getParameter(P.UNPACK_SKIP_PIXELS),ir=P.getParameter(P.UNPACK_SKIP_ROWS),yl=P.getParameter(P.UNPACK_SKIP_IMAGES),Rn=Z.isCompressedTexture?Z.mipmaps[0]:Z.image;P.pixelStorei(P.UNPACK_ROW_LENGTH,Rn.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Rn.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,D.min.x),P.pixelStorei(P.UNPACK_SKIP_ROWS,D.min.y),P.pixelStorei(P.UNPACK_SKIP_IMAGES,D.min.z),Z.isDataTexture||Z.isData3DTexture?P.texSubImage3D(vt,ee,W.x,W.y,W.z,ke,We,Qe,ht,yt,Rn.data):Z.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),P.compressedTexSubImage3D(vt,ee,W.x,W.y,W.z,ke,We,Qe,ht,Rn.data)):P.texSubImage3D(vt,ee,W.x,W.y,W.z,ke,We,Qe,ht,yt,Rn),P.pixelStorei(P.UNPACK_ROW_LENGTH,St),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Bt),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Pi),P.pixelStorei(P.UNPACK_SKIP_ROWS,ir),P.pixelStorei(P.UNPACK_SKIP_IMAGES,yl),0===ee&&z.generateMipmaps&&P.generateMipmap(vt),Me.unbindTexture()},this.initTexture=function(D){D.isCubeTexture?re.setTextureCube(D,0):D.isData3DTexture?re.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?re.setTexture2DArray(D,0):re.setTexture2D(D,0),Me.unbindTexture()},this.resetState=function(){v=0,b=0,x=null,Me.reset(),ye.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Xe?Na:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Na?Xe:br}}(class zQ extends QO{}).prototype.isWebGL1Renderer=!0;class eN extends jn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Xx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Qi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Qi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Di=new C;class qa{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Di.fromBufferAttribute(this,t),Di.applyMatrix4(e),this.setXYZ(t,Di.x,Di.y,Di.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Di.fromBufferAttribute(this,t),Di.applyNormalMatrix(e),this.setXYZ(t,Di.x,Di.y,Di.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Di.fromBufferAttribute(this,t),Di.transformDirection(e),this.setXYZ(t,Di.x,Di.y,Di.z);return this}setX(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=es(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=es(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=es(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=es(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),s=ct(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),s=ct(s,this.array),r=ct(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new pn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new qa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const oN=new C,aN=new Ft,lN=new Ft,jQ=new C,cN=new Ye,su=new C;class uN extends fi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ye,this.bindMatrixInverse=new Ye,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new xr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)su.fromBufferAttribute(t,i),this.applyBoneTransform(i,su),this.boundingBox.expandByPoint(su)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Mr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)su.fromBufferAttribute(t,i),this.applyBoneTransform(i,su),this.boundingSphere.expandByPoint(su)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ft,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;aN.fromBufferAttribute(s.attributes.skinIndex,e),lN.fromBufferAttribute(s.attributes.skinWeight,e),oN.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=lN.getComponent(r);if(0!==o){const a=aN.getComponent(r);cN.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(jQ.copy(oN).applyMatrix4(cN),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Kx extends jn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ad extends Ks{constructor(e=null,t=1,i=1,s,r,o,a,l,c=vn,u=vn,h,d){super(null,o,a,l,c,u,s,r,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const hN=new Ye,$Q=new Ye;class Qm{constructor(e=[],t=[]){this.uuid=Qi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Ye)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ye;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++)hN.multiplyMatrices(e[r]?e[r].matrixWorld:$Q,t[r]),hN.toArray(i,16*r);null!==s&&(s.needsUpdate=!0)}clone(){return new Qm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=eO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ad(t,e,e,vs,ko);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let o=t[r];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new Kx),this.bones.push(o),this.boneInverses.push((new Ye).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++)e.bones.push(t[s].uuid),e.boneInverses.push(i[s].toArray());return e}}class ld extends pn{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ru=new Ye,dN=new Ye,eg=[],fN=new xr,qQ=new Ye,cd=new fi,ud=new Mr;class pN extends fi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ld(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,qQ)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new xr),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ru),fN.copy(e.boundingBox).applyMatrix4(ru),this.boundingBox.union(fN)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Mr),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ru),ud.copy(e.boundingSphere).applyMatrix4(ru),this.boundingSphere.union(ud)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,s=this.count;if(cd.geometry=this.geometry,cd.material=this.material,void 0!==cd.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),ud.copy(this.boundingSphere),ud.applyMatrix4(i),!1!==e.ray.intersectsSphere(ud)))for(let r=0;r<s;r++){this.getMatrixAt(r,ru),dN.multiplyMatrices(i,ru),cd.matrixWorld=dN,cd.raycast(e,eg);for(let o=0,a=eg.length;o<a;o++){const l=eg[o];l.instanceId=r,l.object=this,t.push(l)}eg.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ld(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Hi extends Qs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ve(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const mN=new C,gN=new C,_N=new Ye,Zx=new Tm,tg=new Mr;class Xa extends jn{constructor(e=new pt,t=new Hi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)mN.fromBufferAttribute(t,s-1),gN.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=mN.distanceTo(gN);e.setAttribute("lineDistance",new Re(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),tg.copy(i.boundingSphere),tg.applyMatrix4(s),tg.radius+=r,!1===e.ray.intersectsSphere(tg))return;_N.copy(s).invert(),Zx.copy(e.ray).applyMatrix4(_N);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new C,u=new C,h=new C,d=new C,f=this.isLineSegments?2:1,p=i.index,_=i.attributes.position;if(null!==p)for(let v=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;v<b;v+=f){const x=p.getX(v),w=p.getX(v+1);if(c.fromBufferAttribute(_,x),u.fromBufferAttribute(_,w),Zx.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(d);A<e.near||A>e.far||t.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(let v=Math.max(0,o.start),b=Math.min(_.count,o.start+o.count)-1;v<b;v+=f){if(c.fromBufferAttribute(_,v),u.fromBufferAttribute(_,v+1),Zx.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(d);w<e.near||w>e.far||t.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}const yN=new C,vN=new C;class Jx extends Xa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)yN.fromBufferAttribute(t,s),vN.fromBufferAttribute(t,s+1),i[s]=0===s?0:i[s-1],i[s+1]=i[s]+yN.distanceTo(vN);e.setAttribute("lineDistance",new Re(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bN extends Xa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Qx extends Qs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const xN=new Ye,eM=new Tm,ng=new Mr,ig=new C;class MN extends jn{constructor(e=new pt,t=new Qx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),ng.copy(i.boundingSphere),ng.applyMatrix4(s),ng.radius+=r,!1===e.ray.intersectsSphere(ng))return;xN.copy(s).invert(),eM.copy(e.ray).applyMatrix4(xN);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);p<g;p++){const _=c.getX(p);ig.fromBufferAttribute(h,_),wN(ig,_,l,s,e,t,this)}else for(let p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);p<g;p++)ig.fromBufferAttribute(h,p),wN(ig,p,l,s,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function wN(n,e,t,i,s,r,o){const a=eM.distanceSqToPoint(n);if(a<t){const l=new C;eM.closestPointToPoint(n,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class mg extends Qs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wo extends mg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new te(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ve(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function Ms(n,e,t){return wM(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function Za(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function wM(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function kN(n){const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(function e(s,r){return n[s]-n[r]}),i}function EM(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=t[r]*e;for(let l=0;l!==e;++l)s[o++]=n[a+l]}return s}function SM(n,e,t,i){let s=1,r=n[0];for(;void 0!==r&&void 0===r[i];)r=n[s++];if(void 0===r)return;let o=r[i];if(void 0!==o)if(Array.isArray(o))do{o=r[i],void 0!==o&&(e.push(r.time),t.push.apply(t,o)),r=n[s++]}while(void 0!==r);else if(void 0!==o.toArray)do{o=r[i],void 0!==o&&(e.push(r.time),o.toArray(t,t.length)),r=n[s++]}while(void 0!==r);else do{o=r[i],void 0!==o&&(e.push(r.time),t.push(o)),r=n[s++]}while(void 0!==r)}class _d{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let o;n:{i:if(!(e<s)){for(let a=i+2;;){if(void 0===s){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=s,s=t[++i],e<s)break t}o=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(i=2,r=a);for(let l=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(s=r,r=t[--i-1],e>=r)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(s=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===s)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Uee extends _d{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],l=s[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=e,a=2*t-i;break;case 2402:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+s[1]-s[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(i-t)/(s-t),g=p*p,_=g*p,m=-d*_+2*d*g-d*p,y=(1+d)*_+(-1.5-2*d)*g+(-.5+d)*p+1,v=(-1-f)*_+(1.5+f)*g+.5*p,b=f*_-f*g;for(let x=0;x!==a;++x)r[x]=m*o[u+x]+y*o[c+x]+v*o[l+x]+b*o[h+x];return r}}class BN extends _d{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(s-t),h=1-u;for(let d=0;d!==a;++d)r[d]=o[c+d]*h+o[l+d]*u;return r}}class Vee extends _d{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ar{constructor(e,t,i,s){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Za(t,this.TimeBufferType),this.values=Za(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Za(e.times,Array),values:Za(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Vee(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new BN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Uee(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Xh:t=this.InterpolantFactoryMethodDiscrete;break;case Tc:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Xh;case this.InterpolantFactoryMethodLinear:return Tc;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<e;)++r;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==r||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=Ms(i,r,o),this.values=Ms(this.values,r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==s&&wM(s))for(let a=0,l=s.length;a!==l;++a){const c=s[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Ms(this.times),t=Ms(this.values),i=this.getValueSize(),s=2302===this.getInterpolation(),r=e.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(s)l=!0;else{const h=a*i,d=h-i,f=h+i;for(let p=0;p!==i;++p){const g=t[h+p];if(g!==t[d+p]||g!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,d=o*i;for(let f=0;f!==i;++f)t[d+f]=t[h+f]}++o}}if(r>0){e[o]=e[r];for(let a=r*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Ms(e,0,o),this.values=Ms(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Ms(this.times,0),t=Ms(this.values,0),s=new(0,this.constructor)(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Ar.prototype.TimeBufferType=Float32Array,Ar.prototype.ValueBufferType=Float32Array,Ar.prototype.DefaultInterpolation=Tc;class lu extends Ar{}lu.prototype.ValueTypeName="bool",lu.prototype.ValueBufferType=Array,lu.prototype.DefaultInterpolation=Xh,lu.prototype.InterpolantFactoryMethodLinear=void 0,lu.prototype.InterpolantFactoryMethodSmooth=void 0;class UN extends Ar{}UN.prototype.ValueTypeName="color";class yd extends Ar{}yd.prototype.ValueTypeName="number";class Hee extends _d{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(s-t);let c=e*a;for(let u=c+a;c!==u;c+=4)ei.slerpFlat(r,0,o,c-a,o,c,l);return r}}class Ja extends Ar{InterpolantFactoryMethodLinear(e){return new Hee(this.times,this.values,this.getValueSize(),e)}}Ja.prototype.ValueTypeName="quaternion",Ja.prototype.DefaultInterpolation=Tc,Ja.prototype.InterpolantFactoryMethodSmooth=void 0;class cu extends Ar{}cu.prototype.ValueTypeName="string",cu.prototype.ValueBufferType=Array,cu.prototype.DefaultInterpolation=Xh,cu.prototype.InterpolantFactoryMethodLinear=void 0,cu.prototype.InterpolantFactoryMethodSmooth=void 0;class vd extends Ar{}vd.prototype.ValueTypeName="vector";class bd{constructor(e,t=-1,i,s=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Qi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Gee(i[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(Ar.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,o=[];for(let a=0;a<r;a++){let l=[],c=[];l.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);const u=kN(l);l=EM(l,1,u),c=EM(c,1,u),!s&&0===l[0]&&(l.push(r),c.push(c[0])),o.push(new yd(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(r);if(u&&u.length>1){const h=u[1];let d=s[h];d||(s[h]=d=[]),d.push(c)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,d,f,p,g){if(0!==f.length){const _=[],m=[];SM(f,_,m,p),0!==_.length&&g.push(new h(d,_,m))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(d&&0!==d.length)if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let g=0;g<d[p].morphTargets.length;g++)f[d[p].morphTargets[g]]=-1;for(const g in f){const _=[],m=[];for(let y=0;y!==d[p].morphTargets.length;++y){const v=d[p];_.push(v.time),m.push(v.morphTarget===g?1:0)}s.push(new yd(".morphTargetInfluence["+g+"]",_,m))}l=f.length*o}else{const f=".bones["+t[h].name+"]";i(vd,f+".position",d,"pos",s),i(Ja,f+".quaternion",d,"rot",s),i(vd,f+".scale",d,"scl",s)}}return 0===s.length?null:new this(r,l,s,a)}resetDuration(){let t=0;for(let i=0,s=this.tracks.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Gee(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function zee(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yd;case"vector":case"vector2":case"vector3":case"vector4":return vd;case"color":return UN;case"quaternion":return Ja;case"bool":case"boolean":return lu;case"string":return cu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];SM(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const uu={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class VN{constructor(e,t,i){const s=this;let l,r=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===r&&void 0!==s.onStart&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,void 0!==s.onProgress&&s.onProgress(u,o,a),o===a&&(r=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(u){void 0!==s.onError&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return-1!==h&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],p=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const Wee=new VN;class xd{constructor(e){this.manager=void 0!==e?e:Wee,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ao={};class jee extends Error{constructor(e,t){super(e),this.response=t}}class Tr extends xd{constructor(e){super(e)}load(e,t,i,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=uu.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==ao[e])return void ao[e].push({onLoad:t,onProgress:i,onError:s});ao[e]=[],ao[e].push({onLoad:t,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const u=ao[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,p=0!==f;let g=0;const _=new ReadableStream({start(m){!function y(){h.read().then(({done:v,value:b})=>{if(v)m.close();else{g+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:f});for(let w=0,E=u.length;w<E;w++){const A=u[w];A.onProgress&&A.onProgress(x)}m.enqueue(b),y()}})}()}});return new Response(_)}throw new jee(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{uu.add(e,c);const u=ao[e];delete ao[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=ao[e];if(void 0===u)throw this.manager.itemError(e),c;delete ao[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class gg extends xd{constructor(e){super(e)}load(e,t,i,s){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=uu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=Kh("img");function l(){u(),uu.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(h){u(),s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class $ee extends xd{constructor(e){super(e)}load(e,t,i,s){const r=new Ks,o=new gg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,void 0!==t&&t(r)},i,s),r}}class AM extends jn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ve(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const TM=new Ye,HN=new C,zN=new C;class CM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new te(512,512),this.map=null,this.mapPass=null,this.matrix=new Ye,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ux,this._frameExtents=new te(1,1),this._viewportCount=1,this._viewports=[new Ft(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;HN.setFromMatrixPosition(e.matrixWorld),t.position.copy(HN),zN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zN),t.updateMatrixWorld(),TM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TM),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(TM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Xee extends CM{constructor(){super(new qn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Rc*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class GN extends AM{constructor(e,t,i=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(jn.DEFAULT_UP),this.updateMatrix(),this.target=new jn,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new Xee}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const WN=new Ye,Md=new C,DM=new C;class Yee extends CM{constructor(){super(new qn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new te(4,2),this._viewportCount=6,this._viewports=[new Ft(2,1,1,1),new Ft(0,1,1,1),new Ft(3,1,1,1),new Ft(1,1,1,1),new Ft(3,0,1,1),new Ft(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Md.setFromMatrixPosition(e.matrixWorld),i.position.copy(Md),DM.copy(i.position),DM.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(DM),i.updateMatrixWorld(),s.makeTranslation(-Md.x,-Md.y,-Md.z),WN.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WN)}}class jN extends AM{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new Yee}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Kee extends CM{constructor(){super(new jm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class wd extends AM{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(jn.DEFAULT_UP),this.updateMatrix(),this.target=new jn,this.shadow=new Kee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ed{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(i){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ste extends xd{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=uu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(l){uu.add(e,l),t&&t(l),r.manager.itemEnd(e)}).catch(function(l){s&&s(l),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}const IM="\\[\\]\\.:\\/",cte=new RegExp("["+IM+"]","g"),PM="[^"+IM+"]",ute="[^"+IM.replace("\\.","")+"]",mte=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",PM)+/(WCOD+)?/.source.replace("WCOD",ute)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PM)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PM)+"$"),gte=["material","materials","bones","map"];class _te{constructor(e,t,i){const s=i||$t.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let $t=(()=>{class n{constructor(t,i,s){this.path=i,this.parsedPath=s||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,s){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,s):new n(t,i,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(cte,"")}static parseTrackName(t){const i=mte.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},r=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const o=s.nodeName.substring(r+1);-1!==gte.indexOf(o)&&(s.nodeName=s.nodeName.substring(0,r),s.objectName=o)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(i);if(void 0!==s)return s}if(t.children){const s=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=s(l.children);if(c)return c}return null},r=s(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)t[i++]=s[r]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,s=i.objectName,r=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let u=i.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[r];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+r+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=_te,n})();$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray],$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class nF{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}function dF(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}const i=t.count-2,s=[];if(2===e)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"152"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="152");class wte extends xd{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Cte(t)}),this.register(function(t){return new Nte(t)}),this.register(function(t){return new Fte(t)}),this.register(function(t){return new kte(t)}),this.register(function(t){return new Rte(t)}),this.register(function(t){return new Ite(t)}),this.register(function(t){return new Pte(t)}),this.register(function(t){return new Lte(t)}),this.register(function(t){return new Tte(t)}),this.register(function(t){return new Ote(t)}),this.register(function(t){return new Dte(t)}),this.register(function(t){return new Ste(t)}),this.register(function(t){return new Bte(t)}),this.register(function(t){return new Ute(t)})}load(e,t,i,s){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Ed.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new Tr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===fF){try{o[Tt.KHR_BINARY_GLTF]=new Vte(e)}catch(h){return void(s&&s(h))}r=JSON.parse(o[Tt.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Qte(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);a[h.name]=h,o[h.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const h=r.extensionsUsed[u],d=r.extensionsRequired||[];switch(h){case Tt.KHR_MATERIALS_UNLIT:o[h]=new Ate;break;case Tt.KHR_DRACO_MESH_COMPRESSION:o[h]=new Hte(r,this.dracoLoader);break;case Tt.KHR_TEXTURE_TRANSFORM:o[h]=new zte;break;case Tt.KHR_MESH_QUANTIZATION:o[h]=new Gte;break;default:d.indexOf(h)>=0&&void 0===a[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function Ete(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Tt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ste{constructor(e){this.parser=e,this.name=Tt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new ve(16777215);void 0!==l.color&&u.fromArray(l.color);const h=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new wd(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new jN(u),c.distance=h;break;case"spot":c=new GN(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,qo(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class Ate{constructor(){this.name=Tt.KHR_MATERIALS_UNLIT}getMaterialType(){return bs}extendParams(e,t,i){const s=[];e.color=new ve(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==r.baseColorTexture&&s.push(i.assignTexture(e,"map",r.baseColorTexture,Xe))}return Promise.all(s)}}class Tte{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class Cte{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Wo:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new te(a,a)}return Promise.all(r)}}class Dte{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Wo:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Rte{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Wo:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new ve(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Xe)),void 0!==o.sheenRoughnessTexture&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Ite{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Wo:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Pte{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Wo:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ve(a[0],a[1],a[2]),Promise.all(r)}}class Lte{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Wo:null}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class Ote{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Wo:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ve(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Xe)),Promise.all(r)}}class Nte{constructor(e){this.parser=e,this.name=Tt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class Fte{constructor(e){this.parser=e,this.name=Tt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class kte{constructor(e){this.parser=e,this.name=Tt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Bte{constructor(e){this.name=Tt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const u=s.count,h=s.byteStride,d=new Uint8Array(a,s.byteOffset||0,s.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,s.mode,s.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(f),u,h,d,s.mode,s.filter),f})})}return null}}class Ute{constructor(e){this.name=Tt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==ws.TRIANGLES&&c.mode!==ws.TRIANGLE_STRIP&&c.mode!==ws.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],d=c[0].count,f=[];for(const p of h){const g=new Ye,_=new C,m=new ei,y=new C(1,1,1),v=new pN(p.geometry,p.material,d);for(let b=0;b<d;b++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,b),l.SCALE&&y.fromBufferAttribute(l.SCALE,b),v.setMatrixAt(b,g.compose(_,m,y));for(const b in l)"TRANSLATION"!==b&&"ROTATION"!==b&&"SCALE"!==b&&p.geometry.setAttribute(b,l[b]);jn.prototype.copy.call(v,p),this.parser.assignFinalMaterial(v),f.push(v)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const fF="glTF";class Vte{constructor(e){this.name=Tt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==fF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-12,r=new DataView(e,12);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(e,12+o,a);this.content=i.decode(c)}else if(5130562===l){const c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Hte{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Tt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=UM[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=UM[u]||u.toLowerCase();if(void 0!==o[u]){const d=i.accessors[e.attributes[u]];c[h]=hu[d.componentType].name,l[h]=!0===d.normalized}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(h){s.decodeDracoFile(u,function(d){for(const f in d.attributes){const p=d.attributes[f],g=l[f];void 0!==g&&(p.normalized=g)}h(d)},a,c)})})}}class zte{constructor(){this.name=Tt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Gte{constructor(){this.name=Tt.KHR_MESH_QUANTIZATION}}class mF extends _d{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=s-t,h=(i-t)/u,d=h*h,f=d*h,p=e*c,g=p-c,_=-2*f+3*d,m=f-d,y=1-_,v=m-d+h;for(let b=0;b!==a;b++)r[b]=y*o[g+b+a]+v*(o[g+b+l]*u)+_*o[p+b+a]+m*(o[p+b]*u);return r}}const Wte=new ei;class jte extends mF{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return Wte.fromArray(r).normalize().toArray(r),r}}const ws={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},hu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},gF={9728:vn,9729:dn,9984:1004,9985:1007,9986:1005,9987:Jr},_F={33071:ui,33648:1002,10497:Ia},BM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},UM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},$o={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$te={CUBICSPLINE:void 0,LINEAR:Tc,STEP:Xh};function Ad(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function qo(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Yte(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Kte(n){const e=n.extensions&&n.extensions[Tt.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+yF(e.attributes):n.indices+":"+yF(n.attributes)+":"+n.mode,t}function yF(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function HM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Jte=new Ye;class Qte{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ete,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;"undefined"!=typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader="undefined"==typeof createImageBitmap||i||s&&r<98?new $ee(this.options.manager):new ste(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};Ad(r,a,s),qo(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())r(u,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e)}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Tt.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(Ed.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteOffset||0;return i.slice(r,r+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse){const o=BM[s.type],l=!0===s.normalized,c=new(0,hu[s.componentType])(s.count*o);return Promise.resolve(new pn(c,o,l))}const r=[];return r.push(void 0!==s.bufferView?this.getDependency("bufferView",s.bufferView):null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=BM[s.type],c=hu[s.componentType],u=c.BYTES_PER_ELEMENT,d=s.byteOffset||0,f=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,p=!0===s.normalized;let g,_;if(f&&f!==u*l){const m=Math.floor(d/f),y="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+m+":"+s.count;let v=t.cache.get(y);v||(g=new c(a,m*f,s.count*f/u),v=new Xx(g,f/u),t.cache.add(y,v)),_=new qa(v,l,d%f/u,p)}else g=null===a?new c(s.count*l):new c(a,d,s.count*l),_=new pn(g,l,p);if(void 0!==s.sparse){const b=s.sparse.values.byteOffset||0,x=new(0,hu[s.sparse.indices.componentType])(o[1],s.sparse.indices.byteOffset||0,s.sparse.count*BM.SCALAR),w=new c(o[2],b,s.sparse.count*l);null!==a&&(_=new pn(_.array.slice(),_.itemSize,_.normalized));for(let E=0,A=x.length;E<A;E++){const M=x[E];if(_.setX(M,w[E*l]),l>=2&&_.setY(M,w[E*l+1]),l>=3&&_.setZ(M,w[E*l+2]),l>=4&&_.setW(M,w[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const d=(r.samplers||{})[o.sampler]||{};return u.magFilter=gF[d.magFilter]||dn,u.minFilter=gF[d.minFilter]||Jr,u.wrapS=_F[d.wrapS]||Ia,u.wrapT=_F[d.wrapT]||Ia,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const s=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(h=>h.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let p=d;!0===t.isImageBitmapLoader&&(p=function(g){const _=new Ks(g);_.needsUpdate=!0,d(_)}),t.load(Ed.resolveURL(h,r.path),p,void 0,f)})}).then(function(h){return!0===c&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||function Zte(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),r.extensions[Tt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Tt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[Tt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return void 0!==s&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Qx,Qs.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Hi,Qs.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return mg}loadMaterial(e){const t=this,s=this.extensions,r=this.json.materials[e];let o;const a={},c=[];if((r.extensions||{})[Tt.KHR_MATERIALS_UNLIT]){const h=s[Tt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,r,t))}else{const h=r.pbrMetallicRoughness||{};if(a.color=new ve(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}void 0!==h.baseColorTexture&&c.push(t.assignTexture(a,"map",h.baseColorTexture,Xe)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}!0===r.doubleSided&&(a.side=2);const u=r.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==bs&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new te(1,1),void 0!==r.normalTexture.scale)){const h=r.normalTexture.scale;a.normalScale.set(h,h)}return void 0!==r.occlusionTexture&&o!==bs&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==bs&&(a.emissive=(new ve).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==bs&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Xe)),Promise.all(c).then(function(){const h=new o(a);return r.name&&(h.name=r.name),qo(h,r),t.associations.set(h,{materials:e}),r.extensions&&Ad(s,h,r),h})}createUniqueName(e){const t=$t.sanitizeNodeName(e||"");let i=t;for(let s=1;this.nodeNamesUsed[i];++s)i=t+"_"+s;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[Tt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return vF(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Kte(c),h=s[u];if(h)o.push(h.promise);else{let d;d=c.extensions&&c.extensions[Tt.KHR_DRACO_MESH_COMPRESSION]?r(c):vF(new pt,c,t),s[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,s=this.extensions,r=this.json.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new mg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[l].material);a.push(u)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let f=0,p=u.length;f<p;f++){const g=u[f],_=o[f];let m;const y=c[f];if(_.mode===ws.TRIANGLES||_.mode===ws.TRIANGLE_STRIP||_.mode===ws.TRIANGLE_FAN||void 0===_.mode)m=!0===r.isSkinnedMesh?new uN(g,y):new fi(g,y),!0===m.isSkinnedMesh&&m.normalizeSkinWeights(),_.mode===ws.TRIANGLE_STRIP?m.geometry=dF(m.geometry,1):_.mode===ws.TRIANGLE_FAN&&(m.geometry=dF(m.geometry,2));else if(_.mode===ws.LINES)m=new Jx(g,y);else if(_.mode===ws.LINE_STRIP)m=new Xa(g,y);else if(_.mode===ws.LINE_LOOP)m=new bN(g,y);else{if(_.mode!==ws.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);m=new MN(g,y)}Object.keys(m.geometry.morphAttributes).length>0&&Yte(m,r),m.name=t.createUniqueName(r.name||"mesh_"+e),qo(m,r),_.extensions&&Ad(s,m,_),t.assignFinalMaterial(m),h.push(m)}for(let f=0,p=h.length;f<p;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(1===h.length)return h[0];const d=new Go;t.associations.set(d,{meshes:e});for(let f=0,p=h.length;f<p;f++)d.add(h[f]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(s)return"perspective"===i.type?t=new qn(bY_radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(t=new jm(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),qo(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const d=new Ye;null!==r&&d.fromArray(r.array,16*c),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Qm(a,l)})}loadAnimation(e){const i=this.json.animations[e],s=i.name?i.name:"animation_"+e,r=[],o=[],a=[],l=[],c=[];for(let u=0,h=i.channels.length;u<h;u++){const d=i.channels[u],f=i.samplers[d.sampler],p=d.target,g=p.node,_=void 0!==i.parameters?i.parameters[f.input]:f.input,m=void 0!==i.parameters?i.parameters[f.output]:f.output;void 0!==p.node&&(r.push(this.getDependency("node",g)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",m)),l.push(f),c.push(p))}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const h=u[0],d=u[1],f=u[2],p=u[3],g=u[4],_=[];for(let m=0,y=h.length;m<y;m++){const v=h[m],b=d[m],x=f[m],w=p[m],E=g[m];if(void 0===v)continue;let A;switch(v.updateMatrix(),$o[E.path]){case $o.weights:A=yd;break;case $o.rotation:A=Ja;break;default:A=vd}const M=v.name?v.name:v.uuid,S=void 0!==w.interpolation?$te[w.interpolation]:Tc,F=[];$o[E.path]===$o.weights?v.traverse(function(I){I.morphTargetInfluences&&F.push(I.name?I.name:I.uuid)}):F.push(M);let U=x.array;if(x.normalized){const I=HM(U.constructor),B=new Float32Array(U.length);for(let O=0,L=U.length;O<L;O++)B[O]=U[O]*I;U=B}for(let I=0,B=F.length;I<B;I++){const O=new A(F[I]+"."+$o[E.path],b.array,U,S);"CUBICSPLINE"===w.interpolation&&(O.createInterpolant=function(k){return new(this instanceof Ja?jte:mF)(this.times,this.values,this.getValueSize()/3,k)},O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(O)}}return new bd(s,void 0,_)})}createNodeMesh(e){const i=this,s=this.json.nodes[e];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return void 0!==s.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const i=this,s=this.json.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=void 0===s.skin?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],d=c[2];null!==d&&u.traverse(function(f){!f.isSkinnedMesh||f.bind(d,Jte)});for(let f=0,p=h.length;f<p;f++)u.add(h[f]);return u})}_loadNodeShallow(e){const i=this.extensions,s=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=this.json.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==r.camera&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(u=!0===r.isBone?new Kx:c.length>1?new Go:1===c.length?c[0]:new jn,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(r.name&&(u.userData.name=r.name,u.name=o),qo(u,r),r.extensions&&Ad(i,u,r),void 0!==r.matrix){const h=new Ye;h.fromArray(r.matrix),u.applyMatrix4(h)}else void 0!==r.translation&&u.position.fromArray(r.translation),void 0!==r.rotation&&u.quaternion.fromArray(r.rotation),void 0!==r.scale&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new Go;i.name&&(r.name=s.createUniqueName(i.name)),qo(r,i),i.extensions&&Ad(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)r.add(l[u]);return s.associations=(u=>{const h=new Map;for(const[d,f]of s.associations)(d instanceof Qs||d instanceof Ks)&&h.set(d,f);return u.traverse(d=>{const f=s.associations.get(d);null!=f&&h.set(d,f)}),h})(r),r})}}function vF(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=UM[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return qo(n,e),function ene(n,e,t){const i=e.attributes,s=new xr;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new C(l[0],l[1],l[2]),new C(c[0],c[1],c[2])),a.normalized){const u=HM(hu[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}const r=e.targets;if(void 0!==r){const a=new C,l=new C;for(let c=0,u=r.length;c<u;c++){const h=r[c];if(void 0!==h.POSITION){const d=t.json.accessors[h.POSITION],f=d.min,p=d.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const g=HM(hu[d.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new Mr;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(s).then(function(){return void 0!==e.targets?function Xte(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(void 0!==h.POSITION&&(i=!0),void 0!==h.NORMAL&&(s=!0),void 0!==h.COLOR_0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const d=void 0!==h.POSITION?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(d)}if(s){const d=void 0!==h.NORMAL?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(d)}if(r){const d=void 0!==h.COLOR_0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[1],d=c[2];return i&&(n.morphAttributes.position=c[0]),s&&(n.morphAttributes.normal=h),r&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}const bF={type:"change"},zM={type:"start"},xF={type:"end"};class tne extends Ba{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new C,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(N){N.addEventListener("keydown",it),this._domElementKeyEvents=N},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",it),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(bF),i.update(),r=s.NONE},this.update=function(){const N=new C,ne=(new ei).setFromUnitVectors(e.up,new C(0,1,0)),q=ne.clone().invert(),ye=new C,Te=new ei,Oe=2*Math.PI;return function(){const Le=i.object.position;N.copy(Le).sub(i.target),N.applyQuaternion(ne),a.setFromVector3(N),i.autoRotate&&r===s.NONE&&M(function E(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Je=i.minAzimuthAngle,mt=i.maxAzimuthAngle;return isFinite(Je)&&isFinite(mt)&&(Je<-Math.PI?Je+=Oe:Je>Math.PI&&(Je-=Oe),mt<-Math.PI?mt+=Oe:mt>Math.PI&&(mt-=Oe),a.theta=Je<=mt?Math.max(Je,Math.min(mt,a.theta)):a.theta>(Je+mt)/2?Math.max(Je,a.theta):Math.min(mt,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),N.setFromSpherical(a),N.applyQuaternion(q),Le.copy(i.target).add(N),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(h||ye.distanceToSquared(i.object.position)>o||8*(1-Te.dot(i.object.quaternion))>o)&&(i.dispatchEvent(bF),ye.copy(i.object.position),Te.copy(i.object.quaternion),h=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",T),i.domElement.removeEventListener("pointerdown",re),i.domElement.removeEventListener("pointercancel",me),i.domElement.removeEventListener("wheel",Fe),i.domElement.removeEventListener("pointermove",Ee),i.domElement.removeEventListener("pointerup",me),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",it),i._domElementKeyEvents=null)};const i=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=s.NONE;const o=1e-6,a=new nF,l=new nF;let c=1;const u=new C;let h=!1;const d=new te,f=new te,p=new te,g=new te,_=new te,m=new te,y=new te,v=new te,b=new te,x=[],w={};function A(){return Math.pow(.95,i.zoomSpeed)}function M(N){l.theta-=N}function S(N){l.phi-=N}const F=function(){const N=new C;return function(q,ye){N.setFromMatrixColumn(ye,0),N.multiplyScalar(-q),u.add(N)}}(),U=function(){const N=new C;return function(q,ye){!0===i.screenSpacePanning?N.setFromMatrixColumn(ye,1):(N.setFromMatrixColumn(ye,0),N.crossVectors(i.object.up,N)),N.multiplyScalar(q),u.add(N)}}(),I=function(){const N=new C;return function(q,ye){const Te=i.domElement;if(i.object.isPerspectiveCamera){N.copy(i.object.position).sub(i.target);let we=N.length();we*=Math.tan(i.object.fov/2*Math.PI/180),F(2*q*we/Te.clientHeight,i.object.matrix),U(2*ye*we/Te.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(F(q*(i.object.right-i.object.left)/i.object.zoom/Te.clientWidth,i.object.matrix),U(ye*(i.object.top-i.object.bottom)/i.object.zoom/Te.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function B(N){i.object.isPerspectiveCamera?c/=N:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*N)),i.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(N){i.object.isPerspectiveCamera?c*=N:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/N)),i.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function L(N){d.set(N.clientX,N.clientY)}function H(N){g.set(N.clientX,N.clientY)}function $(){1===x.length?d.set(x[0].pageX,x[0].pageY):d.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function ce(){1===x.length?g.set(x[0].pageX,x[0].pageY):g.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function de(){const N=x[0].pageX-x[1].pageX,ne=x[0].pageY-x[1].pageY,q=Math.sqrt(N*N+ne*ne);y.set(0,q)}function De(N){if(1==x.length)f.set(N.pageX,N.pageY);else{const q=_e(N);f.set(.5*(N.pageX+q.x),.5*(N.pageY+q.y))}p.subVectors(f,d).multiplyScalar(i.rotateSpeed);const ne=i.domElement;M(2*Math.PI*p.x/ne.clientHeight),S(2*Math.PI*p.y/ne.clientHeight),d.copy(f)}function se(N){if(1===x.length)_.set(N.pageX,N.pageY);else{const ne=_e(N);_.set(.5*(N.pageX+ne.x),.5*(N.pageY+ne.y))}m.subVectors(_,g).multiplyScalar(i.panSpeed),I(m.x,m.y),g.copy(_)}function Me(N){const ne=_e(N),q=N.pageX-ne.x,ye=N.pageY-ne.y,Te=Math.sqrt(q*q+ye*ye);v.set(0,Te),b.set(0,Math.pow(v.y/y.y,i.zoomSpeed)),B(b.y),y.copy(v)}function re(N){!1!==i.enabled&&(0===x.length&&(i.domElement.setPointerCapture(N.pointerId),i.domElement.addEventListener("pointermove",Ee),i.domElement.addEventListener("pointerup",me)),function X(N){x.push(N)}(N),"touch"===N.pointerType?function Ct(N){switch(ue(N),x.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;$(),r=s.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;ce(),r=s.TOUCH_PAN;break;default:r=s.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function P(){i.enableZoom&&de(),i.enablePan&&ce()})(),r=s.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Ce(){i.enableZoom&&de(),i.enableRotate&&$()})(),r=s.TOUCH_DOLLY_ROTATE;break;default:r=s.NONE}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(zM)}(N):function Ve(N){let ne;switch(N.button){case 0:ne=i.mouseButtons.LEFT;break;case 1:ne=i.mouseButtons.MIDDLE;break;case 2:ne=i.mouseButtons.RIGHT;break;default:ne=-1}switch(ne){case 1:if(!1===i.enableZoom)return;(function k(N){y.set(N.clientX,N.clientY)})(N),r=s.DOLLY;break;case 0:if(N.ctrlKey||N.metaKey||N.shiftKey){if(!1===i.enablePan)return;H(N),r=s.PAN}else{if(!1===i.enableRotate)return;L(N),r=s.ROTATE}break;case 2:if(N.ctrlKey||N.metaKey||N.shiftKey){if(!1===i.enableRotate)return;L(N),r=s.ROTATE}else{if(!1===i.enablePan)return;H(N),r=s.PAN}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(zM)}(N))}function Ee(N){!1!==i.enabled&&("touch"===N.pointerType?function R(N){switch(ue(N),r){case s.TOUCH_ROTATE:if(!1===i.enableRotate)return;De(N),i.update();break;case s.TOUCH_PAN:if(!1===i.enablePan)return;se(N),i.update();break;case s.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function oe(N){i.enableZoom&&Me(N),i.enablePan&&se(N)})(N),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Q(N){i.enableZoom&&Me(N),i.enableRotate&&De(N)})(N),i.update();break;default:r=s.NONE}}(N):function He(N){switch(r){case s.ROTATE:if(!1===i.enableRotate)return;!function j(N){f.set(N.clientX,N.clientY),p.subVectors(f,d).multiplyScalar(i.rotateSpeed);const ne=i.domElement;M(2*Math.PI*p.x/ne.clientHeight),S(2*Math.PI*p.y/ne.clientHeight),d.copy(f),i.update()}(N);break;case s.DOLLY:if(!1===i.enableZoom)return;!function Y(N){v.set(N.clientX,N.clientY),b.subVectors(v,y),b.y>0?B(A()):b.y<0&&O(A()),y.copy(v),i.update()}(N);break;case s.PAN:if(!1===i.enablePan)return;!function fe(N){_.set(N.clientX,N.clientY),m.subVectors(_,g).multiplyScalar(i.panSpeed),I(m.x,m.y),g.copy(_),i.update()}(N)}}(N))}function me(N){(function ae(N){delete w[N.pointerId];for(let ne=0;ne<x.length;ne++)if(x[ne].pointerId==N.pointerId)return void x.splice(ne,1)})(N),0===x.length&&(i.domElement.releasePointerCapture(N.pointerId),i.domElement.removeEventListener("pointermove",Ee),i.domElement.removeEventListener("pointerup",me)),i.dispatchEvent(xF),r=s.NONE}function Fe(N){!1===i.enabled||!1===i.enableZoom||r!==s.NONE||(N.preventDefault(),i.dispatchEvent(zM),function le(N){N.deltaY<0?O(A()):N.deltaY>0&&B(A()),i.update()}(N),i.dispatchEvent(xF))}function it(N){!1===i.enabled||!1===i.enablePan||function G(N){let ne=!1;switch(N.code){case i.keys.UP:N.ctrlKey||N.metaKey||N.shiftKey?S(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(0,i.keyPanSpeed),ne=!0;break;case i.keys.BOTTOM:N.ctrlKey||N.metaKey||N.shiftKey?S(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(0,-i.keyPanSpeed),ne=!0;break;case i.keys.LEFT:N.ctrlKey||N.metaKey||N.shiftKey?M(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(i.keyPanSpeed,0),ne=!0;break;case i.keys.RIGHT:N.ctrlKey||N.metaKey||N.shiftKey?M(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):I(-i.keyPanSpeed,0),ne=!0}ne&&(N.preventDefault(),i.update())}(N)}function T(N){!1!==i.enabled&&N.preventDefault()}function ue(N){let ne=w[N.pointerId];void 0===ne&&(ne=new te,w[N.pointerId]=ne),ne.set(N.pageX,N.pageY)}function _e(N){return w[(N.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}i.domElement.addEventListener("contextmenu",T),i.domElement.addEventListener("pointerdown",re),i.domElement.addEventListener("pointercancel",me),i.domElement.addEventListener("wheel",Fe,{passive:!1}),this.update()}}const nne=["container"];let ine=(()=>{class n{constructor(){this.container=null,this.loader=null}ngAfterViewInit(){var t,i,s,r,o;this.scene=new eN,this.camera=new qn(100,(null===(t=this.container)||void 0===t?void 0:t.nativeElement.offsetWidth)/(null===(i=this.container)||void 0===i?void 0:i.nativeElement.offsetHeight),.1,1e3),this.renderer=new QO({antialias:!0});const a=new tne(this.camera,this.renderer.domElement);this.camera.position.set(0,0,50),a.update(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(null===(s=this.container)||void 0===s?void 0:s.nativeElement.offsetWidth,null===(r=this.container)||void 0===r?void 0:r.nativeElement.offsetHeight),null===(o=this.container)||void 0===o||o.nativeElement.appendChild(this.renderer.domElement);const l=new ve("rgba(33,37,41,0.5)");this.scene.background=l,(new wte).load("../../assets/models/robot_helmet_sketch/scene.gltf",u=>{u.scene.position.y=10,u.scene.scale.set(12,12,12),this.scene.add(u.scene),this.model=u.scene;const h=new wd(16777215,1);h.position.set(0,0,-1e3),this.scene.add(h);const d=new wd("white",.1);d.position.set(250,0,1e3),this.scene.add(d);const f=new wd(16743684,2);f.position.set(550,0,-400),this.scene.add(f),this.render(this.model)})}render(t){var i;requestAnimationFrame(()=>{this.animateModel(t),this.render(t)}),null===(i=this.renderer)||void 0===i||i.render(this.scene,this.camera)}animateModel(t){t&&(t.rotation.y+=.005)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ls({type:n,selectors:[["app-experiment2"]],viewQuery:function(t,i){if(1&t&&BD(nne,7),2&t){let s;ap(s=function lp(){return function pj(n,e){return n[19].queries[e].queryList}(ie(),fS())}())&&(i.container=s.first)}},decls:2,vars:0,consts:[["id","container"],["container",""]],template:function(t,i){1&t&&Hs(0,"div",0,1)},styles:["#container[_ngcontent-%COMP%]{background-color:#fff;height:900px;margin:0 auto;width:900px}"]}),n})();function sne(n,e){if(1&n&&(Be(0,"a",21),qe(1),Pe()),2&n){const t=ai(2);sc("href",t.selectedRepo.homepage,ha),ot(1),li(" ",t.selectedRepo.homepage," ")}}function rne(n,e){1&n&&(Be(0,"span"),qe(1," No Home Page "),Pe())}function one(n,e){if(1&n){const t=ic();Be(0,"a",23),Kt("click",function(){Br(t);const s=ai(3);return s.goToIssues(s.selectedRepo)}),qe(1,"View Issues"),Pe()}}function ane(n,e){if(1&n&&(Be(0,"p")(1,"b"),qe(2,"Number of Issues:"),Pe(),qe(3),Ki(4,one,2,0,"a",22),Pe()),2&n){const t=ai(2);ot(3),li(" ",t.selectedRepo.open_issues_count," "),ot(1),sn("ngIf",t.selectedRepo.open_issues_count)}}function lne(n,e){if(1&n){const t=ic();Be(0,"div",13)(1,"div",14)(2,"h4",15),qe(3),Pe(),Be(4,"button",16),Kt("click",function(){Br(t);const s=ai();return null==s.modalRef?null:s.modalRef.hide()}),Be(5,"span",17),qe(6,"\xd7"),Pe()()(),Be(7,"div",18)(8,"p")(9,"b"),qe(10,"Full Repo Name:"),Pe(),qe(11),Pe(),Be(12,"p")(13,"b"),qe(14,"Description:"),Pe(),qe(15),Pe(),Be(16,"p")(17,"b"),qe(18,"Homepage:"),Pe(),Ki(19,sne,2,2,"a",19),Ki(20,rne,2,0,"span",20),Pe(),Be(21,"p")(22,"b"),qe(23,"GitHub URL:"),Pe(),Be(24,"a",21),qe(25),Pe()(),Be(26,"p")(27,"b"),qe(28,"Number of Forks:"),Pe(),qe(29),Pe(),Be(30,"p")(31,"b"),qe(32,"Number of Stargazers:"),Pe(),qe(33),Pe(),Ki(34,ane,5,2,"p",20),Be(35,"p")(36,"b"),qe(37,"Watchers:"),Pe(),qe(38),Pe(),Be(39,"p")(40,"b"),qe(41,"Language:"),Pe(),qe(42),Pe(),Be(43,"p")(44,"b"),qe(45,"Date Created:"),Pe(),qe(46),Pe()()()}if(2&n){const t=ai();ot(3),pa(t.selectedRepo.name),ot(8),li(" ",t.selectedRepo.full_name," "),ot(4),li(" ",t.selectedRepo.description," "),ot(4),sn("ngIf",t.selectedRepo.homepage),ot(1),sn("ngIf",!t.selectedRepo.homepage),ot(4),sc("href",t.selectedRepo.html_url,ha),ot(1),li(" ",t.selectedRepo.html_url," "),ot(4),li(" ",t.selectedRepo.forks_count," "),ot(4),li(" ",t.selectedRepo.stargazers_count," "),ot(1),sn("ngIf",t.selectedRepo.has_issues),ot(4),li(" ",t.selectedRepo.watchers_count," "),ot(4),li(" ",t.selectedRepo.language," "),ot(4),li(" ",t.selectedRepo.created_at," ")}}function cne(n,e){if(1&n){const t=ic();Be(0,"div",26)(1,"tx-repo-card",27),Kt("click",function(){const r=Br(t).$implicit,o=ai(2),a=wv(1);return o.showRepoDetails(a,r)}),Pe()()}if(2&n){const t=e.$implicit;ot(1),sn("data",t)}}function une(n,e){if(1&n&&(Be(0,"div",24),Ki(1,cne,2,1,"div",25),Pe()),2&n){const t=ai();ot(1),sn("ngForOf",t.repos.items)}}function hne(n,e){1&n&&Hs(0,"app-experiment2",28)}let dne=(()=>{class n{constructor(t,i,s,r){this.helperService=t,this.modalService=i,this.route=s,this.githubService=r,this.repos=null,this.selectedRepo=null,this.searchText=""}ngOnInit(){this.helperService.$repos.subscribe(t=>this.repos=t),this.helperService.$searchText.subscribe(t=>{this.searchText=t}),document.addEventListener("keyup",t=>{"Enter"===t.code&&this.searchText&&this.search(this.searchText)})}showRepoDetails(t,i){this.modalRef=this.modalService.show(t),this.selectedRepo=i}goToIssues(t){var i;null===(i=this.modalRef)||void 0===i||i.hide(),this.route.navigate(["/issues",{repo:JSON.stringify(t)}])}search(t){!t||this.githubService.getRepositories(t).subscribe(i=>{this.helperService.setRepositories(i)})}clear(){this.helperService.clearSearchText(),this.repos=null}}return n.\u0275fac=function(t){return new(t||n)(J(pb),J(rm),J(Ai),J(Lb))},n.\u0275cmp=Ls({type:n,selectors:[["tx-home"]],decls:18,vars:3,consts:[["template",""],[1,"home","home__container","d-flex","flex-column","justify-content-center"],[1,"home__title-containerd-flex","align-self-center","mt-5"],[1,""],[1,"text-gradient","d-inline"],[1,"home__search-container","d-flex","justify-content-center","flex-md-row","flex-column","w-100"],[1,"home__search-input-wrapper"],[3,"label"],[1,"home__search-button-wrapper","d-flex","align-items-center"],["target","_blank",1,"btn","btn-secondary","mt-4",3,"click"],["target","_blank",1,"btn","btn-secondary","mt-4","mx-2",3,"click"],["class","home__repo-list-container row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-sm-1 g-4",4,"ngIf"],["class","d-none d-md-flex",4,"ngIf"],[1,"modal-dialog","flex-column","w-100"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],["target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["target","_blank",3,"href"],["class","inline-action pl-3",3,"click",4,"ngIf"],[1,"inline-action","pl-3",3,"click"],[1,"home__repo-list-container","row","row-cols-1","row-cols-md-2","row-cols-lg-3","row-cols-sm-1","g-4"],["class","home__repo-card-wrapper col",4,"ngFor","ngForOf"],[1,"home__repo-card-wrapper","col"],[3,"data","click"],[1,"d-none","d-md-flex"]],template:function(t,i){1&t&&(Ki(0,lne,47,13,"ng-template",null,0,e0),Be(2,"div",1)(3,"div",2)(4,"h1",3),qe(5,"Welcome to the 7 Wonders of\xa0"),Be(6,"span",4),qe(7," Github! "),Pe()()(),Be(8,"div",5)(9,"div",6),Hs(10,"tx-search",7),Pe(),Be(11,"div",8)(12,"button",9),Kt("click",function(){return i.search(i.searchText)}),qe(13,"Search"),Pe(),Be(14,"button",10),Kt("click",function(){return i.clear()}),qe(15,"Clear"),Pe()()(),Ki(16,une,2,1,"div",11),Pe(),Ki(17,hne,1,0,"app-experiment2",12)),2&t&&(ot(10),sn("label","Search for a repo"),ot(6),sn("ngIf",i.repos),ot(1),sn("ngIf",!i.repos))},directives:[L0,fL,P0,a7,ine],styles:[".home__repo-list-container[_ngcontent-%COMP%]{overflow:hidden;padding-bottom:100px}.home__search-container[_ngcontent-%COMP%]{margin:120px 0 50px}.home__repo-card-wrapper[_ngcontent-%COMP%]{overflow:visible;margin-top:120px}.home__search-input-wrapper[_ngcontent-%COMP%]{flex:.3;margin-right:15px}.text-gradient[_ngcontent-%COMP%]{background:#FFB76B;background:linear-gradient(to right,#FFB76B 0%,#FFA73D 30%,#FF7C00 60%,#FF7F04 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.inline-action[_ngcontent-%COMP%]{color:#6edff6}.inline-action[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();function lo(){}const fne=function(){let n=0;return function(){return n++}}();function Rt(n){return null==n}function qt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Mt(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}const xn=n=>("number"==typeof n||n instanceof Number)&&isFinite(+n);function Es(n,e){return xn(n)?n:e}function lt(n,e){return void 0===n?e:n}const MF=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Xt(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function Ot(n,e,t,i){let s,r,o;if(qt(n))if(r=n.length,i)for(s=r-1;s>=0;s--)e.call(t,n[s],s);else for(s=0;s<r;s++)e.call(t,n[s],s);else if(Mt(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function Eg(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Sg(n){if(qt(n))return n.map(Sg);if(Mt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=Sg(n[t[s]]);return e}return n}function wF(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function mne(n,e,t,i){if(!wF(n))return;const s=e[n],r=t[n];Mt(s)&&Mt(r)?Td(s,r,i):e[n]=Sg(r)}function Td(n,e,t){const i=qt(e)?e:[e],s=i.length;if(!Mt(n))return n;const r=(t=t||{}).merger||mne;for(let o=0;o<s;++o){if(!Mt(e=i[o]))continue;const a=Object.keys(e);for(let l=0,c=a.length;l<c;++l)r(a[l],n,e,t)}return n}function Cd(n,e){return Td(n,e,{merger:gne})}function gne(n,e,t){if(!wF(n))return;const i=e[n],s=t[n];Mt(i)&&Mt(s)?Cd(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Sg(s))}const EF={"":n=>n,x:n=>n.x,y:n=>n.y};function Xo(n,e){return(EF[e]||(EF[e]=function _ne(n){const e=function yne(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}(n);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e)))(n)}function GM(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ss=n=>void 0!==n,Yo=n=>"function"==typeof n,SF=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},nn=Math.PI,kt=2*nn,bne=kt+nn,Ag=Number.POSITIVE_INFINITY,xne=nn/180,gn=nn/2,Dd=nn/4,AF=2*nn/3,As=Math.log10,Cr=Math.sign;function TF(n){const e=Math.round(n);n=Rd(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(As(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function du(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Rd(n,e,t){return Math.abs(n-e)<t}function CF(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function tr(n){return n*(nn/180)}function WM(n){return n*(180/nn)}function DF(n){if(!xn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function RF(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*nn&&(r+=kt),{angle:r,distance:s}}function jM(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Ene(n,e){return(n-e+bne)%kt-nn}function ss(n){return(n%kt+kt)%kt}function Id(n,e,t,i){const s=ss(n),r=ss(e),o=ss(t),a=ss(r-s),l=ss(o-s),c=ss(s-r),u=ss(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Xn(n,e,t){return Math.max(e,Math.min(t,n))}function co(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function $M(n,e,t){t=t||(o=>n[o]<e);let r,i=n.length-1,s=0;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const uo=(n,e,t,i)=>$M(n,t,i?s=>n[s][e]<=t:s=>n[s][e]<t),Ane=(n,e,t)=>$M(n,t,i=>n[i][e]>=t),IF=["push","pop","shift","splice","unshift"];function PF(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);-1!==s&&i.splice(s,1),!(i.length>0)&&(IF.forEach(r=>{delete n[r]}),delete n._chartjs)}function LF(n){const e=new Set;let t,i;for(t=0,i=n.length;t<i;++t)e.add(n[t]);return e.size===i?n:Array.from(e)}const OF="undefined"==typeof window?function(n){return n()}:window.requestAnimationFrame;function NF(n,e,t){const i=t||(o=>Array.prototype.slice.call(o));let s=!1,r=[];return function(...o){r=i(o),s||(s=!0,OF.call(window,()=>{s=!1,n.apply(e,r)}))}}const qM=n=>"start"===n?"left":"end"===n?"right":"center",pi=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function FF(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=Xn(Math.min(uo(a,o.axis,c).lo,t?i:uo(e,l,o.getPixelForValue(c)).lo),0,i-1)),r=d?Xn(Math.max(uo(a,o.axis,u,!0).hi+1,t?0:uo(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:i-s}return{start:s,count:r}}function kF(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const Tg=n=>0===n||1===n,BF=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*kt/t),UF=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*kt/t)+1,Pd={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*gn),easeOutSine:n=>Math.sin(n*gn),easeInOutSine:n=>-.5*(Math.cos(nn*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>Tg(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Tg(n)?n:BF(n,.075,.3),easeOutElastic:n=>Tg(n)?n:UF(n,.075,.3),easeInOutElastic:n=>Tg(n)?n:n<.5?.5*BF(2*n,.1125,.45):.5+.5*UF(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-Pd.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*Pd.easeInBounce(2*n):.5*Pd.easeOutBounce(2*n-1)+.5};function Ld(n){return n+.5|0}const Ko=(n,e,t)=>Math.max(Math.min(n,t),e);function Od(n){return Ko(Ld(2.55*n),0,255)}function Zo(n){return Ko(Ld(255*n),0,255)}function ho(n){return Ko(Ld(n/2.55)/100,0,1)}function VF(n){return Ko(Ld(100*n),0,100)}const Ts={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},XM=[..."0123456789ABCDEF"],Ine=n=>XM[15&n],Pne=n=>XM[(240&n)>>4]+XM[15&n],Cg=n=>(240&n)>>4==(15&n);const kne=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function HF(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Bne(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Une(n,e,t){const i=HF(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function YM(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=function Vne(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}(t,i,s,u,r),l=60*l+.5),[0|l,c||0,a]}function KM(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Zo)}function ZM(n,e,t){return KM(HF,n,e,t)}function zF(n){return(n%360+360)%360}const GF={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},WF={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Dg;const Xne=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,JM=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,fu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Rg(n,e,t){if(n){let i=YM(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,0===e?360:1)),i=ZM(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function jF(n,e){return n&&Object.assign(e||{},n)}function $F(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Zo(n[3]))):(e=jF(n,{r:0,g:0,b:0,a:1})).a=Zo(e.a),e}function Jne(n){return"r"===n.charAt(0)?function Yne(n){const e=Xne.exec(n);let i,s,r,t=255;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Od(o):Ko(255*o,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Od(i):Ko(i,0,255)),s=255&(e[4]?Od(s):Ko(s,0,255)),r=255&(e[6]?Od(r):Ko(r,0,255)),{r:i,g:s,b:r,a:t}}}(n):function Gne(n){const e=kne.exec(n);let i,t=255;if(!e)return;e[5]!==i&&(t=e[6]?Od(+e[5]):Zo(+e[5]));const s=zF(+e[2]),r=+e[3]/100,o=+e[4]/100;return i="hwb"===e[1]?function Hne(n,e,t){return KM(Une,n,e,t)}(s,r,o):"hsv"===e[1]?function zne(n,e,t){return KM(Bne,n,e,t)}(s,r,o):ZM(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}(n)}class Ig{constructor(e){if(e instanceof Ig)return e;const t=typeof e;let i;"object"===t?i=$F(e):"string"===t&&(i=function One(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*Ts[n[1]],g:255&17*Ts[n[2]],b:255&17*Ts[n[3]],a:5===e?17*Ts[n[4]]:255}:(7===e||9===e)&&(t={r:Ts[n[1]]<<4|Ts[n[2]],g:Ts[n[3]]<<4|Ts[n[4]],b:Ts[n[5]]<<4|Ts[n[6]],a:9===e?Ts[n[7]]<<4|Ts[n[8]]:255})),t}(e)||function qne(n){Dg||(Dg=function $ne(){const n={},e=Object.keys(WF),t=Object.keys(GF);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,GF[r]);r=parseInt(WF[o],16),n[a]=[r>>16&255,r>>8&255,255&r]}return n}(),Dg.transparent=[0,0,0,0]);const e=Dg[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||Jne(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=jF(this._rgb);return e&&(e.a=ho(e.a)),e}set rgb(e){this._rgb=$F(e)}rgbString(){return this._valid?function Kne(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ho(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function Fne(n){var e=(n=>Cg(n.r)&&Cg(n.g)&&Cg(n.b)&&Cg(n.a))(n)?Ine:Pne;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function jne(n){if(!n)return;const e=YM(n),t=e[0],i=VF(e[1]),s=VF(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${ho(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function Zne(n,e,t){const i=fu(ho(n.r)),s=fu(ho(n.g)),r=fu(ho(n.b));return{r:Zo(JM(i+t*(fu(ho(e.r))-i))),g:Zo(JM(s+t*(fu(ho(e.g))-s))),b:Zo(JM(r+t*(fu(ho(e.b))-r))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ig(this.rgb)}alpha(e){return this._rgb.a=Zo(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Ld(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Rg(this._rgb,2,e),this}darken(e){return Rg(this._rgb,2,-e),this}saturate(e){return Rg(this._rgb,1,e),this}desaturate(e){return Rg(this._rgb,1,-e),this}rotate(e){return function Wne(n,e){var t=YM(n);t[0]=zF(t[0]+e),t=ZM(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function qF(n){return new Ig(n)}function XF(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function YF(n){return XF(n)?n:qF(n)}function QM(n){return XF(n)?n:qF(n).saturate(.5).darken(.1).hexString()}const sl=Object.create(null),ew=Object.create(null);function Nd(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function tw(n,e,t){return"string"==typeof e?Td(Nd(n,e),t):Td(Nd(n,""),e)}var wt=new class Qne{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,i)=>QM(i.backgroundColor),this.hoverBorderColor=(t,i)=>QM(i.borderColor),this.hoverColor=(t,i)=>QM(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return tw(this,e,t)}get(e){return Nd(this,e)}describe(e,t){return tw(ew,e,t)}override(e,t){return tw(sl,e,t)}route(e,t,i,s){const r=Nd(this,e),o=Nd(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return Mt(l)?Object.assign({},c,l):lt(l,c)},set(l){this[a]=l}}})}}({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Pg(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function tie(n,e,t,i){let s=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=t[l],null!=h&&!0!==qt(h))o=Pg(n,s,r,o,h);else if(qt(h))for(c=0,u=h.length;c<u;c++)d=h[c],null!=d&&!qt(d)&&(o=Pg(n,s,r,o,d));n.restore();const f=r.length/2;if(f>t.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function rl(n,e,t){const i=n.currentDevicePixelRatio,s=0!==t?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function KF(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function nw(n,e,t,i){ZF(n,e,t,i,null)}function ZF(n,e,t,i,s){let r,o,a,l,c,u;const h=e.pointStyle,d=e.rotation,f=e.radius;let p=(d||0)*xne;if(h&&"object"==typeof h&&(r=h.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return n.save(),n.translate(t,i),n.rotate(p),n.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),void n.restore();if(!(isNaN(f)||f<=0)){switch(n.beginPath(),h){default:s?n.ellipse(t,i,s/2,f,0,0,kt):n.arc(t,i,f,0,kt),n.closePath();break;case"triangle":n.moveTo(t+Math.sin(p)*f,i-Math.cos(p)*f),p+=AF,n.lineTo(t+Math.sin(p)*f,i-Math.cos(p)*f),p+=AF,n.lineTo(t+Math.sin(p)*f,i-Math.cos(p)*f),n.closePath();break;case"rectRounded":c=.516*f,l=f-c,o=Math.cos(p+Dd)*l,a=Math.sin(p+Dd)*l,n.arc(t-o,i-a,c,p-nn,p-gn),n.arc(t+a,i-o,c,p-gn,p),n.arc(t+o,i+a,c,p,p+gn),n.arc(t-a,i+o,c,p+gn,p+nn),n.closePath();break;case"rect":if(!d){l=Math.SQRT1_2*f,u=s?s/2:l,n.rect(t-u,i-l,2*u,2*l);break}p+=Dd;case"rectRot":o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(t-o,i-a),n.lineTo(t+a,i-o),n.lineTo(t+o,i+a),n.lineTo(t-a,i+o),n.closePath();break;case"crossRot":p+=Dd;case"cross":o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a),n.moveTo(t+a,i-o),n.lineTo(t-a,i+o);break;case"star":o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a),n.moveTo(t+a,i-o),n.lineTo(t-a,i+o),p+=Dd,o=Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a),n.moveTo(t+a,i-o),n.lineTo(t-a,i+o);break;case"line":o=s?s/2:Math.cos(p)*f,a=Math.sin(p)*f,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(p)*f,i+Math.sin(p)*f)}n.fill(),e.borderWidth>0&&n.stroke()}}function Fd(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Lg(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Og(n){n.restore()}function nie(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if("middle"===s){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else"after"===s!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function iie(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function ol(n,e,t,i,s,r={}){const o=qt(e)?e:[e],a=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(n.save(),n.font=s.string,function sie(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Rt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,r),l=0;l<o.length;++l)c=o[l],a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Rt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),rie(n,t,i,c,r),i+=s.lineHeight;n.restore()}function rie(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function kd(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,-gn,nn,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,nn,gn,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,gn,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-gn,!0),n.lineTo(t+o.topLeft,i)}const oie=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),aie=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function lie(n,e){const t=(""+n).match(oie);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const cie=n=>+n||0;function iw(n,e){const t={},i=Mt(e),s=i?Object.keys(e):e,r=Mt(n)?i?o=>lt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=cie(r(o));return t}function JF(n){return iw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function al(n){return iw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function mi(n){const e=JF(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Hn(n,e){let t=lt((n=n||{}).size,(e=e||wt.font).size);"string"==typeof t&&(t=parseInt(t,10));let i=lt(n.style,e.style);i&&!(""+i).match(aie)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const s={family:lt(n.family,e.family),lineHeight:lie(lt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:lt(n.weight,e.weight),string:""};return s.string=function eie(n){return!n||Rt(n.size)||Rt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(s),s}function Bd(n,e,t,i){let r,o,a,s=!0;for(r=0,o=n.length;r<o;++r)if(a=n[r],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==t&&qt(a)&&(a=a[t%a.length],s=!1),void 0!==a))return i&&!s&&(i.cacheable=!1),a}function Jo(n,e){return Object.assign(Object.create(n),e)}function sw(n,e=[""],t=n,i,s=(()=>n[0])){Ss(i)||(i=ik("_fallback",n));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:t,_fallback:i,_getTarget:s,override:o=>sw([o,...n],e,t,i)};return new Proxy(r,{deleteProperty:(o,a)=>(delete o[a],delete o._keys,delete n[0][a],!0),get:(o,a)=>ek(o,a,()=>function yie(n,e,t,i){let s;for(const r of e)if(s=ik(hie(r,n),t),Ss(s))return rw(n,s)?ow(t,i,n,s):s}(a,e,n,o)),getOwnPropertyDescriptor:(o,a)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],a),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(o,a)=>sk(o).includes(a),ownKeys:o=>sk(o),set(o,a,l){const c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function pu(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:QF(n,i),setContext:r=>pu(n,r,t,i),override:r=>pu(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty:(r,o)=>(delete r[o],delete n[o],!0),get:(r,o,a)=>ek(r,o,()=>function die(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return Yo(a)&&o.isScriptable(e)&&(a=function fie(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),e=e(r,o||i),a.delete(n),rw(n,e)&&(e=ow(s._scopes,s,n,e)),e}(e,a,n,t)),qt(a)&&a.length&&(a=function pie(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(Ss(r.index)&&i(n))e=e[r.index%e.length];else if(Mt(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=ow(c,s,n,u);e.push(pu(h,r,o&&o[n],a))}}return e}(e,a,n,o.isIndexable)),rw(e,a)&&(a=pu(a,s,r&&r[e],o)),a}(r,o,a)),getOwnPropertyDescriptor:(r,o)=>r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(r,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(r,o,a)=>(n[o]=a,delete r[o],!0)})}function QF(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:Yo(t)?t:()=>t,isIndexable:Yo(i)?i:()=>i}}const hie=(n,e)=>n?n+GM(e):e,rw=(n,e)=>Mt(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function ek(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const i=t();return n[e]=i,i}function tk(n,e,t){return Yo(n)?n(e,t):n}const mie=(n,e)=>!0===n?e:"string"==typeof n?Xo(e,n):void 0;function gie(n,e,t,i,s){for(const r of e){const o=mie(t,r);if(o){n.add(o);const a=tk(o._fallback,t,s);if(Ss(a)&&a!==t&&a!==i)return a}else if(!1===o&&Ss(i)&&t!==i)return null}return!1}function ow(n,e,t,i){const s=e._rootScopes,r=tk(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=nk(a,o,t,r||t,i);return!(null===l||Ss(r)&&r!==t&&(l=nk(a,o,r,l,i),null===l))&&sw(Array.from(a),[""],s,r,()=>function _ie(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return qt(s)&&Mt(t)?t:s}(e,t,i))}function nk(n,e,t,i,s){for(;t;)t=gie(n,e,t,i,s);return t}function ik(n,e){for(const t of e){if(!t)continue;const i=t[n];if(Ss(i))return i}}function sk(n){let e=n._keys;return e||(e=n._keys=function vie(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}(n._scopes)),e}function rk(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:s.parse(Xo(u,r),c)};return o}const bie=Number.EPSILON||1e-14,mu=(n,e)=>e<n.length&&!n[e].skip&&n[e],ok=n=>"x"===n?"y":"x";function xie(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=jM(r,s),l=jM(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function Ng(n,e,t){return Math.max(Math.min(n,t),e)}function Aie(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),"monotone"===e.cubicInterpolationMode)!function Eie(n,e="x"){const t=ok(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=mu(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=mu(n,o+1),l){if(c){const u=c[e]-l[e];s[o]=0!==u?(c[t]-l[t])/u:0}r[o]=a?c?Cr(s[o-1])!==Cr(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}(function Mie(n,e,t){const i=n.length;let s,r,o,a,l,c=mu(n,0);for(let u=0;u<i-1;++u)if(l=c,c=mu(n,u+1),l&&c){if(Rd(e[u],0,bie)){t[u]=t[u+1]=0;continue}s=t[u]/e[u],r=t[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=s*o*e[u],t[u+1]=r*o*e[u])}})(n,s,r),function wie(n,e,t="x"){const i=ok(t),s=n.length;let r,o,a,l=mu(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=mu(n,c+1),!a)continue;const u=a[t],h=a[i];o&&(r=(u-o[t])/3,a[`cp1${t}`]=u-r,a[`cp1${i}`]=h-r*e[c]),l&&(r=(l[t]-u)/3,a[`cp2${t}`]=u+r,a[`cp2${i}`]=h+r*e[c])}}(n,r,e)}(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=xie(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&function Sie(n,e){let t,i,s,r,o,a=Fd(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&Fd(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=Ng(s.cp1x,e.left,e.right),s.cp1y=Ng(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ng(s.cp2x,e.left,e.right),s.cp2y=Ng(s.cp2y,e.top,e.bottom)))}(n,t)}function ak(){return"undefined"!=typeof window&&"undefined"!=typeof document}function aw(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Fg(n,e,t){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*e.parentNode[t])):i=n,i}const kg=n=>window.getComputedStyle(n,null),Cie=["top","right","bottom","left"];function ll(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=Cie[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function cl(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=kg(t),r="border-box"===s.boxSizing,o=ll(s,"padding"),a=ll(s,"border","width"),{x:l,y:c,box:u}=function Rie(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let a,l,o=!1;if(((n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot))(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}(n,t),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*t.width/i),y:Math.round((c-d)/p*t.height/i)}}const lw=n=>Math.round(10*n)/10;function lk(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=s/i,n.width=r/i;const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r)&&(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0)}const Lie=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return n}();function ck(n,e){const t=function Tie(n,e){return kg(n).getPropertyValue(e)}(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ul(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Oie(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:"middle"===i?t<.5?n.y:e.y:"after"===i?t<1?n.y:e.y:t>0?e.y:n.y}}function Nie(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=ul(n,s,t),a=ul(s,r,t),l=ul(r,e,t),c=ul(o,a,t),u=ul(a,l,t);return ul(c,u,t)}const uk=new Map;function Ud(n,e,t){return function Fie(n,e){e=e||{};const t=n+JSON.stringify(e);let i=uk.get(t);return i||(i=new Intl.NumberFormat(n,e),uk.set(t,i)),i}(e,t).format(n)}function gu(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,i)=>t-i,leftForLtr:(t,i)=>t-i}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function hk(n,e){let t,i;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function dk(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function fk(n){return"angle"===n?{between:Id,compare:Ene,normalize:ss}:{between:co,compare:(e,t)=>e-t,normalize:e=>e}}function pk({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t==0,style:s}}function mk(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=fk(i),{start:u,end:h,loop:d,style:f}=function Uie(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=fk(i),l=e.length;let d,f,{start:c,end:u,loop:h}=n;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),s,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:n.style}}(n,e,t),p=[];let m,y,v,g=!1,_=null;for(let A=u,M=u;A<=h;++A)y=e[A%o],!y.skip&&(m=c(y[i]),m!==v&&(g=l(m,s,r),null===_&&(g||l(s,v,m)&&0!==a(s,v))&&(_=0===a(m,s)?A:M),null!==_&&(!g||0===a(r,m)||l(r,v,m))&&(p.push(pk({start:_,end:A,loop:d,count:o,style:f})),_=null),M=A,v=m));return null!==_&&p.push(pk({start:_,end:h,loop:d,count:o,style:f})),p}function gk(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=mk(i[s],n.points,e);r.length&&t.push(...r)}return t}function yk(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Wie(n,e){return e&&JSON.stringify(n)!==JSON.stringify(e)}var fo=new class jie{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const o=t.duration;t.listeners[s].forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=OF.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let l,o=r.length-1,a=!1;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);!t||(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const vk="transparent",$ie={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const i=YF(n||vk),s=i.valid&&YF(e||vk);return s&&s.valid?s.mix(i,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class qie{constructor(e,t,i,s){const r=t[i];s=Bd([e.to,s,r,e.from]);const o=Bd([e.from,r,s]);this._active=!0,this._fn=e.fn||$ie[e.type||typeof o],this._easing=Pd[e.easing]||Pd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Bd([e.to,t,s,e.from]),this._from=Bd([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active)return this._target[s]=a,void this._notify(!0);t<0?this._target[s]=r:(l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}wt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Kie=Object.keys(wt.animation);wt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>"onProgress"!==n&&"onComplete"!==n&&"fn"!==n}),wt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),wt.describe("animations",{_fallback:"animation"}),wt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>0|n}}}});class bk{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Mt(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Mt(s))return;const r={};for(const o of Kie)r[o]=s[o];(qt(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!t.has(o))&&t.set(o,r)})})}_animateOptions(e,t){const i=t.options,s=function Jie(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&function Zie(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){s.push(...this._animateOptions(e,t));continue}const u=t[c];let h=r[c];const d=i.get(c);if(h){if(d&&h.active()){h.update(d,u,a);continue}h.cancel()}d&&d.duration?(r[c]=h=new qie(d,e,c,u),s.push(h)):e[c]=u}return s}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(fo.add(this._chart,i),!0):void 0}}function xk(n,e){const t=n&&n.options||{},i=t.reverse,s=void 0===t.min?e:0,r=void 0===t.max?e:0;return{start:i?r:s,end:i?s:r}}function Mk(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function wk(n,e,t,i={}){const s=n.keys,r="single"===i.mode;let o,a,l,c;if(null!==e){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(i.all)continue;break}c=n.values[l],xn(c)&&(r||0===e||Cr(e)===Cr(c))&&(e+=c)}return e}}function Ek(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function sse(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function Sk(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function Ak(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=function nse(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:g,[c]:_}=p;d=(p._stacks||(p._stacks={}))[c]=sse(s,u,g),d[a]=_,d._top=Sk(d,o,!0,i.type),d._bottom=Sk(d,o,!1,i.type)}}function cw(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function Vd(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||void 0===r[i]||void 0===r[i][t])return;delete r[i][t]}}}const uw=n=>"reset"===n||"none"===n,Tk=(n,e)=>e?n:Object.assign({},n);let Dr=(()=>{class n{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ek(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Vd(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,s=this.getDataset(),r=(d,f,p,g)=>"x"===d?f:"r"===d?g:p,o=i.xAxisID=lt(s.xAxisID,cw(t,"x")),a=i.yAxisID=lt(s.yAxisID,cw(t,"y")),l=i.rAxisID=lt(s.rAxisID,cw(t,"r")),c=i.indexAxis,u=i.iAxisID=r(c,o,a,l),h=i.vAxisID=r(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&PF(this._data,this),t._stacked&&Vd(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),s=this._data;if(Mt(i))this._data=function tse(n){const e=Object.keys(n),t=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],t[i]={x:r,y:n[r]};return t}(i);else if(s!==i){if(s){PF(s,this);const r=this._cachedMeta;Vd(r),r._parsed=[]}i&&Object.isExtensible(i)&&function Cne(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),IF.forEach(t=>{const i="_onData"+GM(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...r)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const o=i._stacked;i._stacked=Ek(i.vScale,i),i.stack!==s.stack&&(r=!0,Vd(i),i.stack=s.stack),this._resyncElements(t),(r||o!==i._stacked)&&Ak(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:s,_data:r}=this,{iScale:o,_stacked:a}=s,l=o.axis;let h,d,f,c=0===t&&i===r.length||s._sorted,u=t>0&&s._parsed[t-1];if(!1===this._parsing)s._parsed=r,s._sorted=!0,f=r;else{f=qt(r[t])?this.parseArrayData(s,r,t,i):Mt(r[t])?this.parseObjectData(s,r,t,i):this.parsePrimitiveData(s,r,t,i);const p=()=>null===d[l]||u&&d[l]<u[l];for(h=0;h<i;++h)s._parsed[h+t]=d=f[h],c&&(p()&&(c=!1),u=d);s._sorted=c}a&&Ak(this,f)}parsePrimitiveData(t,i,s,r){const{iScale:o,vScale:a}=t,l=o.axis,c=a.axis,u=o.getLabels(),h=o===a,d=new Array(r);let f,p,g;for(f=0,p=r;f<p;++f)g=f+s,d[f]={[l]:h||o.parse(u[g],g),[c]:a.parse(i[g],g)};return d}parseArrayData(t,i,s,r){const{xScale:o,yScale:a}=t,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+s,d=i[h],l[c]={x:o.parse(d[0],h),y:a.parse(d[1],h)};return l}parseObjectData(t,i,s,r){const{xScale:o,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let h,d,f,p;for(h=0,d=r;h<d;++h)f=h+s,p=i[f],u[h]={x:o.parse(Xo(p,l),f),y:a.parse(Xo(p,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,s){const o=this._cachedMeta,a=i[t.axis];return wk({keys:Mk(this.chart,!0),values:i._stacks[t.axis]},a,o.index,{mode:s})}updateRangeFromParsed(t,i,s,r){const o=s[i.axis];let a=null===o?NaN:o;const l=r&&s._stacks[i.axis];r&&l&&(r.values=l,a=wk(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){const s=this._cachedMeta,r=s._parsed,o=s._sorted&&t===s.iScale,a=r.length,l=this._getOtherScale(t),c=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Mk(this.chart,!0),values:null})(i,s),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=function ise(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}(l);let f,p;function g(){p=r[f];const _=p[l.axis];return!xn(p[t.axis])||h>_||d<_}for(f=0;f<a&&(g()||(this.updateRangeFromParsed(u,t,p,c),!o));++f);if(o)for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,t,p,c);break}return u}getAllParsedValues(t){const i=this._cachedMeta._parsed,s=[];let r,o,a;for(r=0,o=i.length;r<o;++r)a=i[r][t.axis],xn(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,s=i.iScale,r=i.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=function ese(n){let e,t,i,s;return Mt(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:!1===n}}(lt(this.options.clip,function Qie(n,e,t){if(!1===t)return!1;const i=xk(n,t),s=xk(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this._cachedMeta,r=s.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,o,l,c),h=l;h<l+c;++h){const d=r[h];d.hidden||(d.active&&u?a.push(d):d.draw(t,o))}for(h=0;h<a.length;++h)a[h].draw(t,o)}getStyle(t,i){const s=i?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,i,s){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=function ose(n,e,t){return Jo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function rse(n,e){return Jo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",s){const r="active"===i,o=this._cachedDataOpts,a=t+"-"+i,l=o[a],c=this.enableOptionSharing&&Ss(s);if(l)return Tk(l,c);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),d=r?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),h),p=Object.keys(wt.elements[t]),_=u.resolveNamedOptions(f,p,()=>this.getContext(s,r),d);return _.$shared&&(_.$shared=c,o[a]=Object.freeze(Tk(_,c))),_}_resolveAnimations(t,i,s){const r=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==r.options.animation){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,i),f=h.getOptionScopes(this.getDataset(),d);c=h.createResolver(f,this.getContext(t,s,i))}const u=new bk(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||uw(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const s=this.resolveDataElementOptions(t,i),r=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(i,o)||o!==r;return this.updateSharedOptions(o,i,s),{sharedOptions:o,includeOptions:a}}updateElement(t,i,s,r){uw(r)?Object.assign(t,s):this._resolveAnimations(i,r).update(t,s)}updateSharedOptions(t,i,s){t&&!uw(i)&&this._resolveAnimations(void 0,i).update(t,s)}_setStyle(t,i,s,r){t.active=r;const o=this.getStyle(i,r);this._resolveAnimations(i,s,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,i,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,o=i.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,i,s=!0){const r=this._cachedMeta,o=r.data,a=t+i;let l;const c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=t;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,i),s&&this.updateElements(o,t,i,"reset")}updateElements(t,i,s,r){}_removeElements(t,i){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,i);s._stacked&&Vd(s,r)}s.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,s,r]=t;this[i](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n.defaults={},n})();function cse(n){const e=n.iScale,t=function lse(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=LF(i.sort((s,r)=>s-r))}return n._cache.$bar}(e,n.type);let s,r,o,a,i=e._length;const l=()=>{32767===o||-32768===o||(Ss(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function Ck(n,e,t,i){return qt(n)?function dse(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}(n,e,t,i):e[t.axis]=t.parse(n,i),e}function Dk(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,h,d;for(c=t,u=t+i;c<u;++c)d=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(Ck(d,h,r,c));return l}function hw(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function mse(n,e,t,i){let s=e.borderSkipped;const r={};if(!s)return void(n.borderSkipped=r);if(!0===s)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function pse(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}(n);"middle"===s&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=u:(r[Rk(u,o,a,l)]=!0,s=c)),r[Rk(s,o,a,l)]=!0,n.borderSkipped=r}function Rk(n,e,t,i){return i?(n=function gse(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=Ik(n,t,e)):n=Ik(n,e,t),n}function Ik(n,e,t){return"start"===n?e:"end"===n?t:n}function _se(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}Dr.prototype.datasetElementType=null,Dr.prototype.dataElementType=null;let yse=(()=>{class n extends Dr{parsePrimitiveData(t,i,s,r){return Dk(t,i,s,r)}parseArrayData(t,i,s,r){return Dk(t,i,s,r)}parseObjectData(t,i,s,r){const{iScale:o,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u="x"===o.axis?l:c,h="x"===a.axis?l:c,d=[];let f,p,g,_;for(f=s,p=s+r;f<p;++f)_=i[f],g={},g[o.axis]=o.parse(Xo(_,u),f),d.push(Ck(Xo(_,h),g,a,f));return d}updateRangeFromParsed(t,i,s,r){super.updateRangeFromParsed(t,i,s,r);const o=s._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:s,vScale:r}=i,o=this.getParsed(t),a=o._custom,l=hw(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,s,r){const o="reset"===r,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(i,r);for(let p=i;p<i+s;p++){const g=this.getParsed(p),_=o||Rt(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),m=this._calculateBarIndexPixels(p,h),y=(g._stacks||{})[l.axis],v={horizontal:u,base:_.base,enableBorderRadius:!y||hw(g._custom)||a===y._top||a===y._bottom,x:u?_.head:m.center,y:u?m.center:_.head,height:u?m.size:Math.abs(_.size),width:u?Math.abs(_.size):m.size};f&&(v.options=d||this.resolveDataElementOptions(p,t[p].active?"active":r));const b=v.options||t[p].options;mse(v,b,y,a),_se(v,b,h.ratio),this.updateElement(t[p],p,v,r)}}_getStacks(t,i){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=s.options.stacked,a=[],l=c=>{const u=c.controller.getParsed(i),h=u&&u[c.vScale.axis];if(Rt(h)||isNaN(h))return!0};for(const c of r)if((void 0===i||!l(c))&&((!1===o||-1===a.indexOf(c.stack)||void 0===o&&void 0===c.stack)&&a.push(c.stack),c.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,s){const r=this._getStacks(t,s),o=void 0!==i?r.indexOf(i):-1;return-1===o?r.length-1:o}_getRuler(){const t=this.options,i=this._cachedMeta,s=i.iScale,r=[];let o,a;for(o=0,a=i.data.length;o<a;++o)r.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const l=t.barThickness;return{min:l||cse(i),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=hw(c);let p,g,h=l[i.axis],d=0,f=s?this.applyStack(i,l,s):h;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,0!==h&&Cr(h)!==Cr(c.barEnd)&&(d=0),d+=h);const _=Rt(r)||u?d:r;let m=i.getPixelForValue(_);if(p=this.chart.getDataVisibility(t)?i.getPixelForValue(d+f):m,g=p-m,Math.abs(g)<o){g=function fse(n,e,t){return 0!==n?Cr(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(g,i,a)*o,h===a&&(m-=g/2);const y=i.getPixelForDecimal(0),v=i.getPixelForDecimal(1),b=Math.min(y,v),x=Math.max(y,v);m=Math.max(Math.min(m,x),b),p=m+g}if(m===i.getPixelForValue(a)){const y=Cr(g)*i.getLineWidthForValue(a)/2;m+=y,g-=y}return{size:g,base:m,head:p,center:p+g/2}}_calculateBarIndexPixels(t,i){const s=i.scale,r=this.options,o=r.skipNull,a=lt(r.maxBarThickness,1/0);let l,c;if(i.grouped){const u=o?this._getStackCount(t):i.stackCount,h="flex"===r.barThickness?function hse(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;null===o&&(o=r-(null===a?e.end-e.start:a-r)),null===a&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}(t,i,r,u):function use(n,e,t,i){const s=t.barThickness;let r,o;return Rt(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}(t,i,r,u),d=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);l=h.start+h.chunk*d+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,i=t.vScale,s=t.data,r=s.length;let o=0;for(;o<r;++o)null!==this.getParsed(o)[i.axis]&&s[o].draw(this._ctx)}}return n.id="bar",n.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},n.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},n})(),vse=(()=>{class n extends Dr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,s,r){const o=super.parsePrimitiveData(t,i,s,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+s).radius;return o}parseArrayData(t,i,s,r){const o=super.parseArrayData(t,i,s,r);for(let a=0;a<o.length;a++)o[a]._custom=lt(i[s+a][2],this.resolveDataElementOptions(a+s).radius);return o}parseObjectData(t,i,s,r){const o=super.parseObjectData(t,i,s,r);for(let a=0;a<o.length;a++){const l=i[s+a];o[a]._custom=lt(l&&l.r&&+l.r,this.resolveDataElementOptions(a+s).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let s=t.length-1;s>=0;--s)i=Math.max(i,t[s].size(this.resolveDataElementOptions(s))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,{xScale:s,yScale:r}=i,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i.label,value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,s,r){const o="reset"===r,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,r),h=a.axis,d=l.axis;for(let f=i;f<i+s;f++){const p=t[f],g=!o&&this.getParsed(f),_={},m=_[h]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[h]),y=_[d]=o?l.getBasePixel():l.getPixelForValue(g[d]);_.skip=isNaN(m)||isNaN(y),u&&(_.options=c||this.resolveDataElementOptions(f,p.active?"active":r),o&&(_.options.radius=0)),this.updateElement(p,f,_,r)}}resolveDataElementOptions(t,i){const s=this.getParsed(t);let r=super.resolveDataElementOptions(t,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return"active"!==i&&(r.radius=0),r.radius+=lt(s&&s._custom,o),r}}return n.id="bubble",n.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},n.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},n})(),Pk=(()=>{class n extends Dr{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const s=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=s;else{let a,l,o=c=>+s[c];if(Mt(s[t])){const{key:c="value"}=this._parsing;o=u=>+Xo(s[u],c)}for(a=t,l=t+i;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return tr(this.options.rotation-90)}_getCircumference(){return tr(this.options.circumference)}_getRotationExtents(){let t=kt,i=-kt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const r=this.chart.getDatasetMeta(s).controller,o=r._getRotation(),a=r._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:s}=i,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:n/e)(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:_}=function bse(n,e,t){let i=1,s=1,r=0,o=0;if(e<kt){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(v,b,x)=>Id(v,a,l,!0)?1:Math.max(b,b*t,x,x*t),p=(v,b,x)=>Id(v,a,l,!0)?-1:Math.min(b,b*t,x,x*t),g=f(0,c,h),_=f(gn,u,d),m=p(nn,c,h),y=p(nn+gn,u,d);i=(g-m)/2,s=(_-y)/2,r=-(g+m)/2,o=-(_+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}(d,h,c),v=Math.max(Math.min((s.width-a)/f,(s.height-a)/p)/2,0),b=MF(this.options.radius,v),w=(b-Math.max(b*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=_*b,r.total=this.calculateTotal(),this.outerRadius=b-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){const s=this.options,r=this._cachedMeta,o=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/kt)}updateElements(t,i,s,r){const o="reset"===r,a=this.chart,l=a.chartArea,h=(l.left+l.right)/2,d=(l.top+l.bottom)/2,f=o&&a.options.animation.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:_,includeOptions:m}=this._getSharedOptions(i,r);let v,y=this._getRotation();for(v=0;v<i;++v)y+=this._circumference(v,o);for(v=i;v<i+s;++v){const b=this._circumference(v,o),x=t[v],w={x:h+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+b,circumference:b,outerRadius:g,innerRadius:p};m&&(w.options=_||this.resolveDataElementOptions(v,x.active?"active":r)),y+=b,this.updateElement(x,v,w,r)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let r,s=0;for(r=0;r<i.length;r++){const o=t._parsed[r];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!i[r].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?kt*(Math.abs(t)/i):0}getLabelAndValue(t){const s=this.chart,r=s.data.labels||[],o=Ud(this._cachedMeta._parsed[t],s.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let i=0;const s=this.chart;let r,o,a,l,c;if(!t)for(r=0,o=s.data.datasets.length;r<o;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),t=a.data,l=a.controller;break}if(!t)return 0;for(r=0,o=t.length;r<o;++r)c=l.resolveDataElementOptions(r),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let s=0,r=t.length;s<r;++s){const o=this.resolveDataElementOptions(s);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(t){return Math.max(lt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n.id="doughnut",n.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},n.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((s,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const i=": "+e.formattedValue;return qt(t)?(t=t.slice(),t[0]+=i):t+=i,t}}}}},n})(),xse=(()=>{class n extends Dr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:s,data:r=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=FF(i,r,a);this._drawStart=l,this._drawCount=c,kF(i)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,i,s,r){const o="reset"===r,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(i,r),f=a.axis,p=l.axis,{spanGaps:g,segment:_}=this.options,m=du(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||"none"===r;let v=i>0&&this.getParsed(i-1);for(let b=i;b<i+s;++b){const x=t[b],w=this.getParsed(b),E=y?x:{},A=Rt(w[p]),M=E[f]=a.getPixelForValue(w[f],b),S=E[p]=o||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,w,c):w[p],b);E.skip=isNaN(M)||isNaN(S)||A,E.stop=b>0&&Math.abs(w[f]-v[f])>m,_&&(E.parsed=w,E.raw=u.data[b]),d&&(E.options=h||this.resolveDataElementOptions(b,x.active?"active":r)),y||this.updateElement(x,b,E,r),v=w}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,s=i.options&&i.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n.id="line",n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},n})(),Mse=(()=>{class n extends Dr{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const s=this.chart,r=s.data.labels||[],o=Ud(this._cachedMeta._parsed[t].r,s.options.locale);return{label:r[t]||"",value:o}}parseObjectData(t,i,s,r){return rk.bind(this)(t,i,s,r)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((s,r)=>{const o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,s=t.options,r=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(r/2,0),l=(o-Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,i,s,r){const o="reset"===r,a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,d=u.yCenter,f=u.getIndexAngle(0)-.5*nn;let g,p=f;const _=360/this.countVisibleElements();for(g=0;g<i;++g)p+=this._computeAngle(g,r,_);for(g=i;g<i+s;g++){const m=t[g];let y=p,v=p+this._computeAngle(g,r,_),b=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=v,o&&(c.animateScale&&(b=0),c.animateRotate&&(y=v=f));const x={x:h,y:d,innerRadius:0,outerRadius:b,startAngle:y,endAngle:v,options:this.resolveDataElementOptions(g,m.active?"active":r)};this.updateElement(m,g,x,r)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((s,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&i++}),i}_computeAngle(t,i,s){return this.chart.getDataVisibility(t)?tr(this.resolveDataElementOptions(t,i).angle||s):0}}return n.id="polarArea",n.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((s,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},n})(),wse=(()=>{class n extends Pk{}return n.id="pie",n.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},n})(),Ese=(()=>{class n extends Dr{getLabelAndValue(t){const i=this._cachedMeta.vScale,s=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(s[i.axis])}}parseObjectData(t,i,s,r){return rk.bind(this)(t,i,s,r)}update(t){const i=this._cachedMeta,s=i.dataset,r=i.data||[],o=i.iScale.getLabels();if(s.points=r,"resize"!==t){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0),this.updateElement(s,void 0,{_loop:!0,_fullLoop:o.length===r.length,options:a},t)}this.updateElements(r,0,r.length,t)}updateElements(t,i,s,r){const o=this._cachedMeta.rScale,a="reset"===r;for(let l=i;l<i+s;l++){const c=t[l],u=this.resolveDataElementOptions(l,c.active?"active":r),h=o.getPointPositionForValue(l,this.getParsed(l).r),d=a?o.xCenter:h.x,f=a?o.yCenter:h.y,p={x:d,y:f,angle:h.angle,skip:isNaN(d)||isNaN(f),options:u};this.updateElement(c,l,p,r)}}}return n.id="radar",n.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},n.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},n})();class nr{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return du(this.x)&&du(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}nr.defaults={},nr.defaultRoutes=void 0;const Lk={values:n=>qt(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=function Sse(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=As(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Ud(n,i,l)},logarithmic(n,e,t){if(0===n)return"0";const i=n/Math.pow(10,Math.floor(As(n)));return 1===i||2===i||5===i?Lk.numeric.call(this,n,e,t):""}};var Bg={formatters:Lk};function Ug(n,e,t,i,s){const r=lt(i,0),o=Math.min(lt(s,n.length),n.length);let l,c,u,a=0;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),u=r;u<0;)a++,u=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(r+a*t))}wt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,e)=>e.lineWidth,tickColor:(n,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Bg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),wt.route("scale.ticks","color","","color"),wt.route("scale.grid","color","","borderColor"),wt.route("scale.grid","borderColor","","borderColor"),wt.route("scale.title","color","","color"),wt.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&"callback"!==n&&"parser"!==n,_indexable:n=>"borderDash"!==n&&"tickBorderDash"!==n}),wt.describe("scales",{_fallback:"scale"}),wt.describe("scale.ticks",{_scriptable:n=>"backdropPadding"!==n&&"callback"!==n,_indexable:n=>"backdropPadding"!==n});const Ok=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t;function Nk(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function Lse(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let c,l=n.getPixelForTick(s);if(!(t&&(c=1===i?Math.max(l-r,o-l):0===e?(n.getPixelForTick(1)-l)/2:(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function Hd(n){return n.drawTicks?n.tickLength:0}function Fk(n,e){if(!n.display)return 0;const t=Hn(n.font,e),i=mi(n.padding);return(qt(n.text)?n.text.length:1)*t.lineHeight+i.height}function kse(n,e,t){let i=qM(n);return(t&&"right"!==e||!t&&"right"===e)&&(i=(n=>"left"===n?"right":"right"===n?"left":n)(i)),i}class hl extends nr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=Es(e,Number.POSITIVE_INFINITY),t=Es(t,Number.NEGATIVE_INFINITY),i=Es(i,Number.POSITIVE_INFINITY),s=Es(s,Number.NEGATIVE_INFINITY),{min:Es(e,i),max:Es(t,s),minDefined:xn(e),maxDefined:xn(t)}}getMinMax(e){let o,{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds();if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:Es(t,Es(i,t)),max:Es(i,Es(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xt(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function uie(n,e,t){const{min:i,max:s}=n,r=MF(e,(s-i)/2),o=(a,l)=>t&&0===a?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Nk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Ase(n,e){const t=n.options.ticks,i=t.maxTicksLimit||function Tse(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),s=t.major.enabled?function Dse(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}(e):[],r=s.length,o=s[0],a=s[r-1],l=[];if(r>i)return function Rse(n,e,t,i){let o,s=0,r=t[0];for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}(e,l,s,r/i),l;const c=function Cse(n,e,t){const i=function Ise(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}(n),s=e.length/t;if(!i)return Math.max(s,1);const r=function Mne(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i==0&&(e.push(i),e.push(n/i));return t===(0|t)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}(s,e,i);if(r>0){let u,h;const d=r>1?Math.round((a-o)/(r-1)):null;for(Ug(e,l,c,Rt(d)?0:o-d,o),u=0,h=r-1;u<h;u++)Ug(e,l,c,s[u],s[u+1]);return Ug(e,l,c,a,Rt(d)?e.length:a+d),l}return Ug(e,l,c),l}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,i,e=this.options.reverse;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xt(this.options.afterUpdate,[this])}beforeSetDimensions(){Xt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Xt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=Xt(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Xt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=this.ticks.length,s=t.minRotation||0,r=t.maxRotation;let a,l,c,o=s;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Xn(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Hd(e.grid)-t.padding-Fk(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=WM(Math.min(Math.asin(Xn((u.highest.height+6)/a,-1,1)),Math.asin(Xn(l/c,-1,1))-Math.asin(Xn(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Xt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Fk(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=Hd(r)+l):(e.height=this.maxHeight,e.width=Hd(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=2*i.padding,p=tr(this.labelRotation),g=Math.cos(p),_=Math.sin(p);a?e.height=Math.min(this.maxHeight,e.height+(i.mirror?0:_*h.width+g*d.height)+f):e.width=Math.min(this.maxWidth,e.width+(i.mirror?0:g*h.width+_*d.height)+f),this._calculatePadding(c,u,_,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*t.height):(d=i*e.height,f=s*t.width):"start"===r?f=t.width:"end"===r?d=e.width:"inner"!==r&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;"start"===r?(u=0,h=e.height):"end"===r&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)Rt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Nk(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,t){const{ctx:i,_longestTextCache:s}=this,r=[],o=[];let c,u,h,d,f,p,g,_,m,y,v,a=0,l=0;for(c=0;c<t;++c){if(d=e[c].label,f=this._resolveTickFontOptions(c),i.font=p=f.string,g=s[p]=s[p]||{data:{},gc:[]},_=f.lineHeight,m=y=0,Rt(d)||qt(d)){if(qt(d))for(u=0,h=d.length;u<h;++u)v=d[u],!Rt(v)&&!qt(v)&&(m=Pg(i,g.data,g.gc,m,v),y+=_)}else m=Pg(i,g.data,g.gc,m,d),y=_;r.push(m),o.push(y),a=Math.max(m,a),l=Math.max(y,l)}!function Ose(n,e){Ot(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}(s,t);const b=r.indexOf(a),x=o.indexOf(l),w=E=>({width:r[E]||0,height:o[E]||0});return{first:w(0),last:w(t-1),widest:w(b),highest:w(x),widths:r,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function Sne(n){return Xn(n,-32768,32767)}(this._alignToPixels?rl(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function Fse(n,e,t){return Jo(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=function Nse(n,e){return Jo(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=tr(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o}=s,a=r.offset,l=this.isHorizontal(),u=this.ticks.length+(a?1:0),h=Hd(r),d=[],f=r.setContext(this.getContext()),p=f.drawBorder?f.borderWidth:0,g=p/2,_=function(O){return rl(i,O,p)};let m,y,v,b,x,w,E,A,M,S,F,U;if("top"===o)m=_(this.bottom),w=this.bottom-h,A=m-g,S=_(e.top)+g,U=e.bottom;else if("bottom"===o)m=_(this.top),S=e.top,U=_(e.bottom)-g,w=m+g,A=this.top+h;else if("left"===o)m=_(this.right),x=this.right-h,E=m-g,M=_(e.left)+g,F=e.right;else if("right"===o)m=_(this.left),M=e.left,F=_(e.right)-g,x=m+g,E=this.left+h;else if("x"===t){if("center"===o)m=_((e.top+e.bottom)/2+.5);else if(Mt(o)){const O=Object.keys(o)[0];m=_(this.chart.scales[O].getPixelForValue(o[O]))}S=e.top,U=e.bottom,w=m+g,A=w+h}else if("y"===t){if("center"===o)m=_((e.left+e.right)/2);else if(Mt(o)){const O=Object.keys(o)[0];m=_(this.chart.scales[O].getPixelForValue(o[O]))}x=m-g,E=x-h,M=e.left,F=e.right}const I=lt(s.ticks.maxTicksLimit,u),B=Math.max(1,Math.ceil(u/I));for(y=0;y<u;y+=B){const O=r.setContext(this.getContext(y)),L=O.lineWidth,k=O.color,H=O.borderDash||[],j=O.borderDashOffset,Y=O.tickWidth,fe=O.tickColor,le=O.tickBorderDash||[],G=O.tickBorderDashOffset;v=Lse(this,y,a),void 0!==v&&(b=rl(i,v,L),l?x=E=M=F=b:w=A=S=U=b,d.push({tx1:x,ty1:w,tx2:E,ty2:A,x1:M,y1:S,x2:F,y2:U,width:L,color:k,borderDash:H,borderDashOffset:j,tickWidth:Y,tickColor:fe,tickBorderDash:le,tickBorderDashOffset:G}))}return this._ticksLength=u,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=Hd(i.grid),f=d+u,p=h?-u:f,g=-tr(this.labelRotation),_=[];let m,y,v,b,x,w,E,A,M,S,F,U,I="middle";if("top"===s)w=this.bottom-p,E=this._getXAxisLabelAlignment();else if("bottom"===s)w=this.top+p,E=this._getXAxisLabelAlignment();else if("left"===s){const O=this._getYAxisLabelAlignment(d);E=O.textAlign,x=O.x}else if("right"===s){const O=this._getYAxisLabelAlignment(d);E=O.textAlign,x=O.x}else if("x"===t){if("center"===s)w=(e.top+e.bottom)/2+f;else if(Mt(s)){const O=Object.keys(s)[0];w=this.chart.scales[O].getPixelForValue(s[O])+f}E=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===s)x=(e.left+e.right)/2-f;else if(Mt(s)){const O=Object.keys(s)[0];x=this.chart.scales[O].getPixelForValue(s[O])}E=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===l?I="top":"end"===l&&(I="bottom"));const B=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){v=a[m],b=v.label;const O=r.setContext(this.getContext(m));A=this.getPixelForTick(m)+r.labelOffset,M=this._resolveTickFontOptions(m),S=M.lineHeight,F=qt(b)?b.length:1;const L=F/2,k=O.color,H=O.textStrokeColor,j=O.textStrokeWidth;let fe,Y=E;if(o?(x=A,"inner"===E&&(Y=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),U="top"===s?"near"===c||0!==g?-F*S+S/2:"center"===c?-B.highest.height/2-L*S+S:S/2-B.highest.height:"near"===c||0!==g?S/2:"center"===c?B.highest.height/2-L*S:B.highest.height-F*S,h&&(U*=-1)):(w=A,U=(1-F)*S/2),O.showLabelBackdrop){const le=mi(O.backdropPadding),G=B.heights[m],$=B.widths[m];let ce=w+U-le.top,de=x-le.left;switch(I){case"middle":ce-=G/2;break;case"bottom":ce-=G}switch(E){case"center":de-=$/2;break;case"right":de-=$}fe={left:de,top:ce,width:$+le.width,height:G+le.height,color:O.backdropColor}}_.push({rotation:g,label:b,font:M,color:k,strokeColor:H,strokeWidth:j,textOffset:U,textAlign:Y,textBaseline:I,translation:[x,w],backdrop:fe})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-tr(this.labelRotation))return"top"===e?"left":"right";let s="center";return"start"===t.align?s="left":"end"===t.align?s="right":"inner"===t.align&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=e+r,l=this._getLabelSizes().widest.width;let c,u;return"left"===t?s?(u=this.right+r,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u=this.left)):"right"===t?s?(u=this.left+r,"near"===i?c="right":"center"===i?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,"near"===i?c="left":"center"===i?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:i}}=this,s=i.setContext(this.getContext()),r=i.drawBorder?s.borderWidth:0;if(!r)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=rl(e,this.left,r)-r/2,c=rl(e,this.right,o)+o/2,u=h=a):(u=rl(e,this.top,r)-r/2,h=rl(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=s.borderWidth,t.strokeStyle=s.borderColor,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Lg(i,s);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o],c=l.font,u=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height)),ol(i,u,0,l.textOffset,c,l)}s&&Og(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=Hn(i.font),o=mi(i.padding),a=i.align;let l=r.lineHeight/2;"bottom"===t||"center"===t||Mt(t)?(l+=o.bottom,qt(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=function Bse(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let d,f,p,h=0;const g=o-s,_=a-r;if(n.isHorizontal()){if(f=pi(i,r,a),Mt(t)){const m=Object.keys(t)[0];p=u[m].getPixelForValue(t[m])+g-e}else p="center"===t?(c.bottom+c.top)/2+g-e:Ok(n,t,e);d=a-r}else{if(Mt(t)){const m=Object.keys(t)[0];f=u[m].getPixelForValue(t[m])-_+e}else f="center"===t?(c.left+c.right)/2-_+e:Ok(n,t,e);p=pi(i,o,s),h="left"===t?-gn:gn}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}(this,l,t,a);ol(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:kse(a,t,s),textBaseline:"middle",translation:[c,u]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=lt(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===hl.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){return Hn(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vg{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function Hse(n){return"id"in n&&"defaults"in n})(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,function Use(n,e,t){const i=Td(Object.create(null),[t?wt.get(t):{},wt.get(e),n.defaults]);wt.set(e,i),n.defaultRoutes&&function Vse(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");wt.route(r,s,l,a)})}(e,n.defaultRoutes),n.descriptors&&wt.describe(e,n.descriptors)}(e,o,i),this.override&&wt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in wt[s]&&(delete wt[s][i],this.override&&delete sl[i])}}var Rr=new class zse{constructor(){this.controllers=new Vg(Dr,"datasets",!0),this.elements=new Vg(nr,"elements"),this.plugins=new Vg(Object,"plugins"),this.scales=new Vg(hl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):Ot(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=GM(e);Xt(i["before"+s],[],i),t[e](i),Xt(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(void 0===s)throw new Error('"'+e+'" is not a registered '+i+".");return s}},Gse=Object.freeze({__proto__:null,BarController:yse,BubbleController:vse,DoughnutController:Pk,LineController:xse,PolarAreaController:Mse,PieController:wse,RadarController:Ese,ScatterController:(()=>{class n extends Dr{update(t){const i=this._cachedMeta,{data:s=[]}=i,r=this.chart._animationsDisabled;let{start:o,count:a}=FF(i,s,r);if(this._drawStart=o,this._drawCount=a,kF(i)&&(o=0,a=s.length),this.options.showLine){const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=s;const u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:u},t)}this.updateElements(s,o,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=Rr.getElement("line")),super.addElements()}updateElements(t,i,s,r){const o="reset"===r,{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(i,r),d=this.getSharedOptions(h),f=this.includeOptions(r,d),p=a.axis,g=l.axis,{spanGaps:_,segment:m}=this.options,y=du(_)?_:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||"none"===r;let b=i>0&&this.getParsed(i-1);for(let x=i;x<i+s;++x){const w=t[x],E=this.getParsed(x),A=v?w:{},M=Rt(E[g]),S=A[p]=a.getPixelForValue(E[p],x),F=A[g]=o||M?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,E,c):E[g],x);A.skip=isNaN(S)||isNaN(F)||M,A.stop=x>0&&Math.abs(E[p]-b[p])>y,m&&(A.parsed=E,A.raw=u.data[x]),f&&(A.options=d||this.resolveDataElementOptions(x,w.active?"active":r)),v||this.updateElement(w,x,A,r),b=E}this.updateSharedOptions(d,r,h)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const s=t.dataset,r=s.options&&s.options.borderWidth||0;if(!i.length)return r;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,a)/2}}return n.id="scatter",n.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},n.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},n})()});function dl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Wse={_date:(()=>{class n{constructor(t){this.options=t||{}}init(t){}formats(){return dl()}parse(t,i){return dl()}format(t,i){return dl()}add(t,i,s){return dl()}diff(t,i,s){return dl()}startOf(t,i,s){return dl()}endOf(t,i){return dl()}}return n.override=function(e){Object.assign(n.prototype,e)},n})()};function jse(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&r.length){const l=a._reversePixels?Ane:uo;if(!i)return l(r,e,t);if(s._sharedOptions){const c=r[0],u="function"==typeof c.getRange&&c.getRange(e);if(u){const h=l(r,e,t-u),d=l(r,e,t+u);return{lo:h.lo,hi:d.hi}}}}return{lo:0,hi:r.length-1}}function zd(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=jse(r[a],e,o,s);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function dw(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||zd(n,t,e,function(a,l,c){!s&&!Fd(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function fw(n,e,t,i,s,r){return r||n.isPointInArea(e)?"r"!==t||i?function Xse(n,e,t,i,s,r){let o=[];const a=function $se(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(t);let l=Number.POSITIVE_INFINITY;return zd(n,t,e,function c(u,h,d){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!r&&!n.isPointInArea(p)&&!f)return;const _=a(e,p);_<l?(o=[{element:u,datasetIndex:h,index:d}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:d})}),o}(n,e,t,i,s,r):function qse(n,e,t,i){let s=[];return zd(n,t,e,function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=RF(o,{x:e.x,y:e.y});Id(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}),s}(n,e,t,s):[]}function kk(n,e,t,i,s){const r=[],o="x"===t?"inXRange":"inYRange";let a=!1;return zd(n,t,e,(l,c,u)=>{l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var Yse={evaluateInteractionItems:zd,modes:{index(n,e,t,i){const s=cl(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?dw(n,s,r,i,o):fw(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const s=cl(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?dw(n,s,r,i,o):fw(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point:(n,e,t,i)=>dw(n,cl(e,n),t.axis||"xy",i,t.includeInvisible||!1),nearest:(n,e,t,i)=>fw(n,cl(e,n),t.axis||"xy",t.intersect,i,t.includeInvisible||!1),x:(n,e,t,i)=>kk(n,cl(e,n),"x",t.intersect,i),y:(n,e,t,i)=>kk(n,cl(e,n),"y",t.intersect,i)}};const Bk=["left","top","right","bottom"];function Gd(n,e){return n.filter(t=>t.pos===e)}function Uk(n,e){return n.filter(t=>-1===Bk.indexOf(t.pos)&&t.box.axis===e)}function Wd(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Vk(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function Hk(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function ere(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!Mt(s)){t.size&&(n[s]-=t.size);const h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?r.height:r.width),t.size=h.size/h.count,n[s]+=t.size}r.getPadding&&Hk(o,r.getPadding());const a=Math.max(0,e.outerWidth-Vk(o,n,"left","right")),l=Math.max(0,e.outerHeight-Vk(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function nre(n,e){const t=e.maxPadding;return function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}(n?["left","right"]:["top","bottom"])}function jd(n,e,t,i){const s=[];let r,o,a,l,c,u;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,nre(a.horizontal,e));const{same:h,other:d}=ere(e,t,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&jd(s,e,t,i)||u}function Hg(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function zk(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Ss(c.start)&&(o=c.start),l.fullSize?Hg(l,s.left,o,t.outerWidth-s.right-s.left,d):Hg(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Ss(c.start)&&(r=c.start),l.fullSize?Hg(l,r,s.top,d,t.outerHeight-s.bottom-s.top):Hg(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}wt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var gi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=mi(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=function Qse(n){const e=function Kse(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],({position:r,options:{stack:o,stackWeight:a=1}}=s),e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}(n),t=Wd(e.filter(c=>c.box.fullSize),!0),i=Wd(Gd(e,"left"),!0),s=Wd(Gd(e,"right")),r=Wd(Gd(e,"top"),!0),o=Wd(Gd(e,"bottom")),a=Uk(e,"x"),l=Uk(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Gd(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}(n.boxes),l=a.vertical,c=a.horizontal;Ot(n.boxes,g=>{"function"==typeof g.beforeLayout&&g.beforeLayout()});const u=l.reduce((g,_)=>_.box.options&&!1===_.box.options.display?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);Hk(d,mi(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=function Jse(n,e){const t=function Zse(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!Bk.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return t}(l.concat(c),h);jd(a.fullSize,f,h,p),jd(l,f,h,p),jd(c,f,h,p)&&jd(l,f,h,p),function tre(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(f),zk(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,zk(a.rightAndBottom,f,h,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ot(a.chartArea,g=>{const _=g.box;Object.assign(_,n.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Gk{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class ire extends Gk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const zg="$chartjs",sre={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wk=n=>null===n||""===n,jk=!!Lie&&{passive:!0};function are(n,e,t){n.canvas.removeEventListener(e,t,jk)}function Gg(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function cre(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Gg(a.addedNodes,i),o=o&&!Gg(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function ure(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Gg(a.removedNodes,i),o=o&&!Gg(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const $d=new Map;let $k=0;function qk(){const n=window.devicePixelRatio;n!==$k&&($k=n,$d.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function fre(n,e,t){const i=n.canvas,s=i&&aw(i);if(!s)return;const r=NF((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;0===c&&0===u||r(c,u)});return o.observe(s),function hre(n,e){$d.size||window.addEventListener("resize",qk),$d.set(n,e)}(n,r),o}function pw(n,e,t){t&&t.disconnect(),"resize"===e&&function dre(n){$d.delete(n),$d.size||window.removeEventListener("resize",qk)}(n)}function pre(n,e,t){const i=n.canvas,s=NF(r=>{null!==n.ctx&&t(function lre(n,e){const t=sre[n.type]||n.type,{x:i,y:s}=cl(n,e);return{type:t,chart:e,native:n,x:void 0!==i?i:null,y:void 0!==s?s:null}}(r,n))},n,r=>{const o=r[0];return[o,o.offsetX,o.offsetY]});return function ore(n,e,t){n.addEventListener(e,t,jk)}(i,e,s),s}class mre extends Gk{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function rre(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[zg]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Wk(s)){const r=ck(n,"width");void 0!==r&&(n.width=r)}if(Wk(i))if(""===n.style.height)n.height=n.width/(e||2);else{const r=ck(n,"height");void 0!==r&&(n.height=r)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[zg])return!1;const i=t[zg].initial;["height","width"].forEach(r=>{const o=i[r];Rt(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[zg],!0}addEventListener(e,t,i){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:cre,detach:ure,resize:fre}[t]||pre)(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];s&&(({attach:pw,detach:pw,resize:pw}[t]||are)(e,t,s),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return function Pie(n,e,t,i){const s=kg(n),r=ll(s,"margin"),o=Fg(s.maxWidth,n,"clientWidth")||Ag,a=Fg(s.maxHeight,n,"clientHeight")||Ag,l=function Iie(n,e,t){let i,s;if(void 0===e||void 0===t){const r=aw(n);if(r){const o=r.getBoundingClientRect(),a=kg(r),l=ll(a,"border","width"),c=ll(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=Fg(a.maxWidth,r,"clientWidth"),s=Fg(a.maxHeight,r,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:i||Ag,maxHeight:s||Ag}}(n,e,t);let{width:c,height:u}=l;if("content-box"===s.boxSizing){const h=ll(s,"border","width"),d=ll(s,"padding");c-=d.width+h.width,u-=d.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?Math.floor(c/i):u-r.height),c=lw(Math.min(c,o,l.maxWidth)),u=lw(Math.min(u,a,l.maxHeight)),c&&!u&&(u=lw(c/2)),{width:c,height:u}}(e,t,i,s)}isAttached(e){const t=aw(e);return!(!t||!t.isConnected)}}class _re{constructor(){this._init=[]}notify(e,t,i,s){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin;if(!1===Xt(o[i],[t,s,r.options],o)&&s.cancelable)return!1}return!0}invalidate(){Rt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=lt(i.options&&i.options.plugins,{}),r=function yre(n){const e={},t=[],i=Object.keys(Rr.plugins.items);for(let r=0;r<i.length;r++)t.push(Rr.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(i);return!1!==s||t?function bre(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=vre(i[l],s);null!==c&&r.push({plugin:a,options:xre(n.config,{plugin:a,local:t[l]},c,o)})}return r}(e,r,s,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function vre(n,e){return e||!1!==n?!0===n?{}:n:null}function xre(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function mw(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(wt.datasets[n]||{}).indexAxis||"x"}function gw(n,e){return"x"===n||"y"===n?n:e.axis||function Ere(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}(e.position)||n.charAt(0).toLowerCase()}function Xk(n){const e=n.options||(n.options={});e.plugins=lt(e.plugins,{}),e.scales=function Sre(n,e){const t=sl[n.type]||{scales:{}},i=e.scales||{},s=mw(n.type,e),r=Object.create(null),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!Mt(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=gw(a,l),u=function wre(n,e){return n===e?"_index_":"_value_"}(c,s),h=t.scales||{};r[c]=r[c]||a,o[a]=Cd(Object.create(null),[{axis:c},l,h[c],h[u]])}),n.data.datasets.forEach(a=>{const l=a.type||n.type,c=a.indexAxis||mw(l,e),h=(sl[l]||{}).scales||{};Object.keys(h).forEach(d=>{const f=function Mre(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(d,c),p=a[f+"AxisID"]||r[f]||f;o[p]=o[p]||Object.create(null),Cd(o[p],[{axis:f},i[p],h[d]])})}),Object.keys(o).forEach(a=>{const l=o[a];Cd(l,[wt.scales[l.type],wt.scale])}),o}(n,e)}function Yk(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const Kk=new Map,Zk=new Set;function Wg(n,e){let t=Kk.get(n);return t||(t=e(),Kk.set(n,t),Zk.add(t)),t}const qd=(n,e,t)=>{const i=Xo(e,t);void 0!==i&&n.add(i)};class Tre{constructor(e){this._config=function Are(n){return(n=n||{}).data=Yk(n.data),Xk(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Yk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Xk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Wg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Wg(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Wg(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Wg(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>qd(l,e,h))),u.forEach(h=>qd(l,s,h)),u.forEach(h=>qd(l,sl[r]||{},h)),u.forEach(h=>qd(l,wt,h)),u.forEach(h=>qd(l,ew,h))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),Zk.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,sl[t]||{},wt.datasets[t]||{},{type:t},wt,ew]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Jk(this._resolverCache,e,s);let l=o;(function Dre(n,e){const{isScriptable:t,isIndexable:i}=QF(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(Yo(a)||Cre(a))||o&&qt(a))return!0}return!1})(o,t)&&(r.$shared=!1,l=pu(o,i=Yo(i)?i():i,this.createResolver(e,i,a)));for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=Jk(this._resolverCache,e,i);return Mt(t)?pu(r,t,void 0,s):r}}function Jk(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:sw(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const Cre=n=>Mt(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||Yo(n[t]),!1),Ire=["top","bottom","left","right","chartArea"];function Qk(n,e){return"top"===n||"bottom"===n||-1===Ire.indexOf(n)&&"x"===e}function e2(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function t2(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Xt(t&&t.onComplete,[n],e)}function Pre(n){const e=n.chart,t=e.options.animation;Xt(t&&t.onProgress,[n],e)}function n2(n){return ak()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const jg={},i2=n=>{const e=n2(n);return Object.values(jg).filter(t=>t.canvas===e).pop()};function Lre(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}class _u{constructor(e,t){const i=this.config=new Tre(t),s=n2(e),r=i2(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function gre(n){return!ak()||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas?ire:mre}(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;this.id=fne(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _re,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Dne(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],jg[this.id]=this,a&&l?(fo.listen(this,"complete",t2),fo.listen(this,"progress",Pre),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return Rt(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return KF(this.canvas,this.ctx),this}stop(){return fo.stop(this),this}resize(e,t){fo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,o=this.platform.getMaximumSize(this.canvas,e,t,i.maintainAspectRatio&&this.aspectRatio),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,lk(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Xt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){Ot(this.options.scales||{},(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=gw(o,a),c="r"===l,u="x"===l;return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ot(r,o=>{const a=o.options,l=a.id,c=gw(l,a),u=lt(a.type,o.dtype);(void 0===a.position||Qk(a.position,c)!==Qk(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;l in i&&i[l].type===u?h=i[l]:(h=new(Rr.getScale(u))({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h),h.init(a,e)}),Ot(s,(o,a)=>{o||delete i[a]}),Ot(i,o=>{gi.configure(this,o,o.options),gi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(e2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{0===t.filter(r=>r===i._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||mw(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Rr.getController(a),{datasetElementType:c,dataElementType:u}=wt.datasets[a];Object.assign(l.prototype,{dataElementType:Rr.getElement(u),datasetElementType:c&&Rr.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ot(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&-1===r.indexOf(h);h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||Ot(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(e2("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ot(this.scales,e=>{gi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!SF(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t)Lre(e,s,"_removeElements"===i?-r:r)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!SF(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;gi.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Ot(this.boxes,s=>{i&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Yo(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(fo.has(this)?this.attached&&!fo.running(this)&&fo.start(this):(this.draw(),t2({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,r=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(s&&Lg(t,{left:!1===i.left?0:r.left-i.left,right:!1===i.right?this.width:r.right+i.right,top:!1===i.top?0:r.top-i.top,bottom:!1===i.bottom?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&Og(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Fd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=Yse.modes[t];return"function"==typeof r?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Jo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Ss(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),fo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),KF(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete jg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Ot(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Ot(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ot(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Eg(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,a=this._getActiveElements(e,s,i,t),l=function vne(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),c=function Ore(n,e,t,i){return t&&"mouseout"!==n.type?i?e:n:null}(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Xt(r.onHover,[e,a,this],this),l&&Xt(r.onClick,[e,a,this],this));const u=!Eg(a,s);return(u||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,s){if("mouseout"===e.type)return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}const s2=()=>Ot(_u.instances,n=>n._plugins.invalidate()),Qo=!0;function r2(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+gn,i-gn),n.closePath(),n.clip()}function yu(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function _w(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+t-c,0),d=u>0?u+i+t+c:0;let f=0;const p=s-l;if(i){const k=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==k?p*k/(k+i):p))/2}const _=(p-Math.max(.001,p*h-t/nn)/h)/2,m=l+_+f,y=s-_-f,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=function Fre(n,e,t,i){const s=function Nre(n){return iw(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return Xn(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Xn(s.innerStart,0,o),innerEnd:Xn(s.innerEnd,0,o)}}(e,d,h,y-m),E=h-v,A=h-b,M=m+v/E,S=y-b/A,F=d+x,U=d+w,I=m+x/F,B=y-w/U;if(n.beginPath(),r){if(n.arc(o,a,h,M,S),b>0){const k=yu(A,S,o,a);n.arc(k.x,k.y,b,S,y+gn)}const O=yu(U,y,o,a);if(n.lineTo(O.x,O.y),w>0){const k=yu(U,B,o,a);n.arc(k.x,k.y,w,y+gn,B+Math.PI)}if(n.arc(o,a,d,y-w/d,m+x/d,!0),x>0){const k=yu(F,I,o,a);n.arc(k.x,k.y,x,I+Math.PI,m-gn)}const L=yu(E,m,o,a);if(n.lineTo(L.x,L.y),v>0){const k=yu(E,M,o,a);n.arc(k.x,k.y,v,m-gn,M)}}else{n.moveTo(o,a);const O=Math.cos(M)*h+o,L=Math.sin(M)*h+a;n.lineTo(O,L);const k=Math.cos(S)*h+o,H=Math.sin(S)*h+a;n.lineTo(k,H)}n.closePath()}Object.defineProperties(_u,{defaults:{enumerable:Qo,value:wt},instances:{enumerable:Qo,value:jg},overrides:{enumerable:Qo,value:sl},registry:{enumerable:Qo,value:Rr},version:{enumerable:Qo,value:"3.9.1"},getChart:{enumerable:Qo,value:i2},register:{enumerable:Qo,value:(...n)=>{Rr.add(...n),s2()}},unregister:{enumerable:Qo,value:(...n)=>{Rr.remove(...n),s2()}}});class $g extends nr{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=RF(s,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=this.options.spacing/2,p=lt(h,l-a)>=kt||Id(r,a,l),g=co(o,c+d,u+d);return p&&g}getCenterPoint(e){const{x:t,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,u=(s+r)/2,h=(o+a+c+l)/2;return{x:t+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/2,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>kt?Math.floor(i/kt):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=0;if(s){a=s/2;const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=nn&&(a=s)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const l=function kre(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){_w(n,e,t,i,o+kt,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+a%kt,a%kt==0&&(l+=kt))}return _w(n,e,t,i,l,s),n.fill(),l}(e,this,a,r,o);(function Ure(n,e,t,i,s,r){const{options:o}=e,{borderWidth:a,borderJoinStyle:l}=o,c="inner"===o.borderAlign;!a||(c?(n.lineWidth=2*a,n.lineJoin=l||"round"):(n.lineWidth=a,n.lineJoin=l||"bevel"),e.fullCircles&&function Bre(n,e,t){const{x:i,y:s,startAngle:r,pixelMargin:o,fullCircles:a}=e,l=Math.max(e.outerRadius-o,0),c=e.innerRadius+o;let u;for(t&&r2(n,e,r+kt),n.beginPath(),n.arc(i,s,c,r+kt,r,!0),u=0;u<a;++u)n.stroke();for(n.beginPath(),n.arc(i,s,l,r,r+kt),u=0;u<a;++u)n.stroke()}(n,e,c),c&&r2(n,e,s),_w(n,e,t,i,s,r),n.stroke())})(e,this,a,r,l,o),e.restore()}}function o2(n,e,t=e){n.lineCap=lt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(lt(t.borderDash,e.borderDash)),n.lineDashOffset=lt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=lt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=lt(t.borderWidth,e.borderWidth),n.strokeStyle=lt(t.borderColor,e.borderColor)}function Vre(n,e,t){n.lineTo(t.x,t.y)}function a2(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a);return{count:i,start:l,loop:e.loop,ilen:c<l&&!(s<o&&r<o||s>a&&r>a)?i+c-l:c-l}}function zre(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=a2(s,t,i),u=function Hre(n){return n.stepped?nie:n.tension||"monotone"===n.cubicInterpolationMode?iie:Vre}(r);let f,p,g,{move:h=!0,reverse:d}=i||{};for(f=0;f<=c;++f)p=s[(a+(d?c-f:f))%o],!p.skip&&(h?(n.moveTo(p.x,p.y),h=!1):u(n,g,p,d,r.stepped),g=p);return l&&(p=s[(a+(d?c:0))%o],u(n,g,p,d,r.stepped)),!!l}function Gre(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=a2(s,t,i),{move:l=!0,reverse:c}=i||{};let d,f,p,g,_,m,u=0,h=0;const y=b=>(o+(c?a-b:b))%r,v=()=>{g!==_&&(n.lineTo(u,_),n.lineTo(u,g),n.lineTo(u,m))};for(l&&(f=s[y(0)],n.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[y(d)],f.skip)continue;const b=f.x,x=f.y,w=0|b;w===p?(x<g?g=x:x>_&&(_=x),u=(h*u+b)/++h):(v(),n.lineTo(b,x),p=w,h=0,g=_=x),m=x}v()}function yw(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?zre:Gre}$g.id="arc",$g.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},$g.defaultRoutes={backgroundColor:"backgroundColor"};const qre="function"==typeof Path2D;let qg=(()=>{class n extends nr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const s=this.options;!s.tension&&"monotone"!==s.cubicInterpolationMode||s.stepped||this._pointsUpdated||(Aie(this._points,s,t,s.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function zie(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=function Vie(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}(t,s,r,i);return function _k(n,e,t,i){return i&&i.setContext&&t?function Gie(n,e,t,i){const s=n._chart.getContext(),r=yk(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=r,h=e[0].start,d=h;function f(p,g,_,m){const y=a?-1:1;if(p!==g){for(p+=l;t[p%l].skip;)p-=y;for(;t[g%l].skip;)g+=y;p%l!=g%l&&(c.push({start:p%l,end:g%l,loop:_,style:m}),u=m,h=g%l)}}for(const p of e){h=a?h:p.start;let _,g=t[h%l];for(d=h+1;d<=p.end;d++){const m=t[d%l];_=yk(i.setContext(Jo(s,{type:"segment",p0:g,p1:m,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Wie(_,u)&&f(h,d-1,p.loop,u),g=m,u=_}h<d-1&&f(h,d-1,p.loop,u)}return c}(n,e,t,i):e}(n,!0===i?[{start:o,end:a,loop:r}]:function Hie(n,e,t,i){const s=n.length,r=[];let l,o=e,a=n[e];for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(r.push({start:e%s,end:(l-1)%s,loop:i=!1}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return null!==o&&r.push({start:e%s,end:o%s,loop:i}),r}(t,o,a<o?a+s:a,!!n._fullLoop&&0===o&&a===s-1),t,e)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,s=t.length;return s&&this.points[t[s-1].end]}interpolate(t,i){const s=this.options,r=t[i],o=this.points,a=gk(this,{property:i,start:r,end:r});if(!a.length)return;const l=[],c=function Wre(n){return n.stepped?Oie:n.tension||"monotone"===n.cubicInterpolationMode?Nie:ul}(s);let u,h;for(u=0,h=a.length;u<h;++u){const{start:d,end:f}=a[u],p=o[d],g=o[f];if(p===g){l.push(p);continue}const m=c(p,g,Math.abs((r-p[i])/(g[i]-p[i])),s.stepped);m[i]=t[i],l.push(m)}return 1===l.length?l[0]:l}pathSegment(t,i,s){return yw(this)(t,this,i,s)}path(t,i,s){const r=this.segments,o=yw(this);let a=this._loop;i=i||0,s=s||this.points.length-i;for(const l of r)a&=o(t,this,l,{start:i,end:i+s-1});return!!a}draw(t,i,s,r){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function Xre(n,e,t,i){qre&&!e.options.segment?function jre(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),o2(n,e.options),n.stroke(s)}(n,e,t,i):function $re(n,e,t,i){const{segments:s,options:r}=e,o=yw(e);for(const a of s)o2(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}(n,e,t,i)}(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n.id="line",n.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e},n})();function l2(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}let Yre=(()=>{class n extends nr{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return l2(this,t,"x",i)}inYRange(t,i){return l2(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){let i=(t=t||this.options||{}).radius||0;return i=Math.max(i,i&&t.hoverRadius||0),2*(i+(i&&t.borderWidth||0))}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Fd(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,nw(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}return n.id="point",n.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n})();function c2(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return n.horizontal?(h=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-h,u=i+h):(h=r/2,a=t-h,l=t+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function ea(n,e,t,i){return n?0:Xn(e,t,i)}function vw(n,e,t,i){const s=null===e,r=null===t,a=n&&!(s&&r)&&c2(n,i);return a&&(s||co(e,a.left,a.right))&&(r||co(t,a.top,a.bottom))}function eoe(n,e){n.rect(e.x,e.y,e.w,e.h)}function bw(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0;return{x:n.x+i,y:n.y+s,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-i),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-s),radius:n.radius}}class Xg extends nr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=function Jre(n){const e=c2(n),t=e.right-e.left,i=e.bottom-e.top,s=function Kre(n,e,t){const s=n.borderSkipped,r=JF(n.options.borderWidth);return{t:ea(s.top,r.top,0,t),r:ea(s.right,r.right,0,e),b:ea(s.bottom,r.bottom,0,t),l:ea(s.left,r.left,0,e)}}(n,t/2,i/2),r=function Zre(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=al(s),o=Math.min(e,t),a=n.borderSkipped,l=i||Mt(s);return{topLeft:ea(!l||a.top||a.left,r.topLeft,0,o),topRight:ea(!l||a.top||a.right,r.topRight,0,o),bottomLeft:ea(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ea(!l||a.bottom||a.right,r.bottomRight,0,o)}}(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}(this),a=function Qre(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?kd:eoe;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,bw(o,t,r)),e.clip(),a(e,bw(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,bw(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return vw(this,e,t,i)}inXRange(e,t){return vw(this,e,null,t)}inYRange(e,t){return vw(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Xg.id="bar",Xg.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Xg.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var toe=Object.freeze({__proto__:null,ArcElement:$g,LineElement:qg,PointElement:Yre,BarElement:Xg});function u2(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:e})}}function h2(n){n.data.datasets.forEach(e=>{u2(e)})}var roe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void h2(n);const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if("y"===Bd([a,n.options.indexAxis])||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if("linear"!==u.type&&"time"!==u.type||n.options.parsing)return;let p,{start:h,count:d}=function soe(n,e){const t=e.length;let s,i=0;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Xn(uo(e,r.axis,o).lo,0,t-1)),s=c?Xn(uo(e,r.axis,a).hi+1,i,t)-i:t-i,{start:i,count:s}}(l,c);if(d<=(t.threshold||4*i))u2(s);else{switch(Rt(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}})),t.algorithm){case"lttb":p=function noe(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let h,d,f,p,g,u=e;for(o[l++]=n[u],h=0;h<r-2;h++){let y,_=0,m=0;const v=Math.floor((h+1)*a)+1+e,b=Math.min(Math.floor((h+2)*a)+1,t)+e,x=b-v;for(y=v;y<b;y++)_+=n[y].x,m+=n[y].y;_/=x,m/=x;const w=Math.floor(h*a)+1+e,E=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:A,y:M}=n[u];for(f=p=-1,y=w;y<E;y++)p=.5*Math.abs((A-_)*(n[y].y-M)-(A-n[y].x)*(m-M)),p>f&&(f=p,d=n[y],g=y);o[l++]=d,u=g}return o[l++]=n[c],o}(c,h,d,i,t);break;case"min-max":p=function ioe(n,e,t,i){let o,a,l,c,u,h,d,f,p,g,s=0,r=0;const _=[],y=n[e].x,b=n[e+t-1].x-y;for(o=e;o<e+t;++o){a=n[o],l=(a.x-y)/b*i,c=a.y;const x=0|l;if(x===u)c<p?(p=c,h=o):c>g&&(g=c,d=o),s=(r*s+a.x)/++r;else{const w=o-1;if(!Rt(h)&&!Rt(d)){const E=Math.min(h,d),A=Math.max(h,d);E!==f&&E!==w&&_.push(yE(_E({},n[E]),{x:s})),A!==f&&A!==w&&_.push(yE(_E({},n[A]),{x:s}))}o>0&&w!==f&&_.push(n[w]),_.push(a),u=x,r=0,p=g=c,h=d=f=o}}return _}(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=p}})},destroy(n){h2(n)}};function xw(n,e,t,i){if(i)return;let s=e[n],r=t[n];return"angle"===n&&(s=ss(s),r=ss(r)),{property:n,start:s,end:r}}function Mw(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function d2(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function f2(n,e){let t=[],i=!1;return qt(n)?(i=!0,t=n):t=function aoe(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=Mw(o,a,s);const l=s[o],c=s[a];null!==i?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):null!==t&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}(n,e),t.length?new qg({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function p2(n){return n&&!1!==n.fill}function loe(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;!1!==s&&-1===r.indexOf(s);){if(!xn(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function coe(n,e,t){const i=function foe(n){const e=n.options,t=e.fill;let i=lt(t&&t.target,t);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(Mt(i))return!isNaN(i.value)&&i;let s=parseFloat(i);return xn(s)&&Math.floor(s)===s?function uoe(n,e,t,i){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=i)&&t}(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function goe(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=_oe(r,e,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(n.push(l),!a)break}n.push(...i)}function _oe(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],h=o[u.start][t],d=o[u.end][t];if(co(s,h,d)){a=s===h,l=s===d;break}}return{first:a,last:l,point:i}}class m2{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return e.arc(s,r,o,(t=t||{start:0,end:kt}).end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function ww(n,e,t){const i=function yoe(n){const{chart:e,fill:t,line:i}=n;if(xn(t))return function voe(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function poe(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=function moe(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}(e,t);a.push(f2({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)goe(s,o[u],a)}return new qg({points:s,options:{}})}(n);if("shape"===t)return!0;const s=function boe(n){return(n.scale||{}).getPointPositionForValue?function Moe(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=function doe(n,e,t){let i;return i="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:Mt(n)?n.value:e.getBaseValue(),i}(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new m2({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}(n):function xoe(n){const{scale:e={},fill:t}=n,i=function hoe(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:Mt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(xn(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}(n)}(n);return s instanceof m2?s:f2(s,i)}(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&s.points.length&&(Lg(n,t),function woe(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),"x"===l&&r!==s&&(g2(n,i,o.top),_2(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),g2(n,i,o.bottom)),_2(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore()}(n,{line:s,target:i,above:u,below:h,area:t,scale:r,axis:o}),Og(n))}function g2(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],h=s[Mw(l,c,s)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function _2(n,e){const{line:t,target:i,property:s,color:r,scale:o}=e,a=function ooe(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Mw(l,c,s);const u=xw(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=gk(e,u);for(const d of h){const f=xw(t,r[d.start],r[d.end],d.loop),p=mk(a,s,f);for(const g of p)o.push({source:g,target:d,start:{[t]:d2(u,f,"start",Math.max)},end:{[t]:d2(u,f,"end",Math.min)}})}}return o}(t,i,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=r}={}}=l,f=!0!==i;n.save(),n.fillStyle=d,Eoe(n,o,f&&xw(s,u,h)),n.beginPath();const p=!!t.pathSegment(n,l);let g;if(f){p?n.closePath():y2(n,i,h,s);const _=!!i.pathSegment(n,c,{move:p,reverse:!0});g=p&&_,g||y2(n,i,u,s)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function Eoe(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=t||{};"x"===r&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function y2(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var Soe={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof qg&&(l={visible:n.isDatasetVisible(o),index:o,fill:coe(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],l&&!1!==l.fill&&(l.fill=loe(s,o,t.propagate))},beforeDraw(n,e,t){const i="beforeDraw"===t.drawTime,s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;!a||(a.line.updateControlPoints(r,a.axis),i&&a.fill&&ww(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;p2(r)&&ww(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!p2(i)||"beforeDatasetDraw"!==t.drawTime||ww(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const v2=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}};class b2 extends nr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Xt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,s=Hn(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=v2(i,r);let c,u;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,g)=>{const _=i+t/2+r.measureText(p.text).width;(0===g||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:_,height:s},c[c.length-1]+=_+a}),h}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((_,m)=>{const y=i+t/2+r.measureText(_.text).width;m>0&&f+s+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[m]={left:p,top:f,col:g,width:y,height:s},d=Math.max(d,y),f+=s+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=gu(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=pi(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=pi(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=pi(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=pi(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Lg(e,this),this._draw(),Og(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=wt.color,l=gu(e.rtl,this.left,this.width),c=Hn(o.font),{color:u,padding:h}=o,d=c.size,f=d/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:_,itemHeight:m}=v2(o,d),b=this.isHorizontal(),x=this._computeTitleHeight();p=b?{x:pi(r,this.left+h,this.right-i[0]),y:this.top+h+x,line:0}:{x:this.left+h,y:pi(r,this.top+x+h,this.bottom-t[0].height),line:0},hk(this.ctx,e.textDirection);const w=m+h;this.legendItems.forEach((E,A)=>{s.strokeStyle=E.fontColor||u,s.fillStyle=E.fontColor||u;const M=s.measureText(E.text).width,S=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),F=g+f+M;let U=p.x,I=p.y;l.setWidth(this.width),b?A>0&&U+F+h>this.right&&(I=p.y+=w,p.line++,U=p.x=pi(r,this.left+h,this.right-i[p.line])):A>0&&I+w>this.bottom&&(U=p.x=U+t[p.line].width+h,p.line++,I=p.y=pi(r,this.top+x+h,this.bottom-t[p.line].height)),function(E,A,M){if(isNaN(g)||g<=0||isNaN(_)||_<0)return;s.save();const S=lt(M.lineWidth,1);if(s.fillStyle=lt(M.fillStyle,a),s.lineCap=lt(M.lineCap,"butt"),s.lineDashOffset=lt(M.lineDashOffset,0),s.lineJoin=lt(M.lineJoin,"miter"),s.lineWidth=S,s.strokeStyle=lt(M.strokeStyle,a),s.setLineDash(lt(M.lineDash,[])),o.usePointStyle){const F={radius:_*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:S},U=l.xPlus(E,g/2);ZF(s,F,U,A+f,o.pointStyleWidth&&g)}else{const F=A+Math.max((d-_)/2,0),U=l.leftForLtr(E,g),I=al(M.borderRadius);s.beginPath(),Object.values(I).some(B=>0!==B)?kd(s,{x:U,y:F,w:g,h:_,radius:I}):s.rect(U,F,g,_),s.fill(),0!==S&&s.stroke()}s.restore()}(l.x(U),I,E),U=((n,e,t,i)=>n===(i?"left":"right")?t:"center"===n?(e+t)/2:e)(S,U+g+f,b?U+F:this.right,e.rtl),function(E,A,M){ol(s,M.text,E,A+m/2,c,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})}(l.x(U),I,E),b?p.x+=F+h:p.y+=w}),dk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Hn(t.font),s=mi(t.padding);if(!t.display)return;const r=gu(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=s.top+i.size/2;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=pi(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((g,_)=>Math.max(g,_.height),0);u=c+pi(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=pi(a,h,h+d);o.textAlign=r.textAlign(qM(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,ol(o,t.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,t=Hn(e.font),i=mi(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(co(e,this.left,this.right)&&co(t,this.top,this.bottom))for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],co(e,s.left,s.left+s.width)&&co(t,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function Toe(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,r=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(s,i);s&&!r&&Xt(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Xt(t.onHover,[e,i,this],this)}else i&&Xt(t.onClick,[e,i,this],this)}}var Coe={id:"legend",_element:b2,start(n,e,t){const i=n.legend=new b2({ctx:n.ctx,options:t,chart:n});gi.configure(n,i,t),gi.addBox(n,i)},stop(n){gi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;gi.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r}}=n.legend.options;return n._getSortedDatasetMetas().map(o=>{const a=o.controller.getStyle(t?0:void 0),l=mi(a.borderWidth);return{text:e[o.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!o.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:s||a.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Ew extends nr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const s=qt(i.text)?i.text.length:1;this._padding=mi(i.padding);const r=s*Hn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let c,u,h,l=0;return this.isHorizontal()?(u=pi(a,i,r),h=t+e,c=r-i):("left"===o.position?(u=i+e,h=pi(a,s,t),l=-.5*nn):(u=r-e,h=pi(a,t,s),l=.5*nn),c=s-t),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Hn(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);ol(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:qM(t.align),textBaseline:"middle",translation:[o,a]})}}var Roe={id:"title",_element:Ew,start(n,e,t){!function Doe(n,e){const t=new Ew({ctx:n.ctx,options:e,chart:n});gi.configure(n,t,e),gi.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){gi.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;gi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Yg=new WeakMap;var Ioe={id:"subtitle",start(n,e,t){const i=new Ew({ctx:n.ctx,options:t,chart:n});gi.configure(n,i,t),gi.addBox(n,i),Yg.set(n,i)},stop(n){gi.removeBox(n,Yg.get(n)),Yg.delete(n)},beforeUpdate(n,e,t){const i=Yg.get(n);gi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xd={average(n){if(!n.length)return!1;let e,t,i=0,s=0,r=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(n,e){if(!n.length)return!1;let r,o,a,t=e.x,i=e.y,s=Number.POSITIVE_INFINITY;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const u=jM(e,l.getCenterPoint());u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Ir(n,e){return e&&(qt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function po(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function Poe(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function x2(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=Hn(e.bodyFont),c=Hn(e.titleFont),u=Hn(e.footerFont),h=r.length,d=s.length,f=i.length,p=mi(e.padding);let g=p.height,_=0,m=i.reduce((b,x)=>b+x.before.length+x.lines.length+x.after.length,0);m+=n.beforeBody.length+n.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),m&&(g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(m-f)*l.lineHeight+(m-1)*e.bodySpacing),d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const v=function(b){_=Math.max(_,t.measureText(b).width+y)};return t.save(),t.font=c.string,Ot(n.title,v),t.font=l.string,Ot(n.beforeBody.concat(n.afterBody),v),y=e.displayColors?o+2+e.boxPadding:0,Ot(i,b=>{Ot(b.before,v),Ot(b.lines,v),Ot(b.after,v)}),y=0,t.font=u.string,Ot(n.footer,v),t.restore(),_+=p.width,{width:_,height:g}}function Noe(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return"center"===i?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),function Ooe(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if("left"===n&&s+r+o>e.width||"right"===n&&s-r-o<0)return!0}(c,n,e,t)&&(c="center"),c}function M2(n,e,t){const i=t.yAlign||e.yAlign||function Loe(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||Noe(n,e,t,i),yAlign:i}}function w2(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=al(o);let p=function Foe(n,e){let{x:t,width:i}=n;return"right"===e?t-=i:"center"===e&&(t-=i/2),t}(e,a);const g=function koe(n,e,t){let{y:i,height:s}=n;return"top"===e?i+=t:i-="bottom"===e?s+t:s/2,i}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+s:"right"===a&&(p+=Math.max(h,f)+s),{x:Xn(p,0,i.width-e.width),y:Xn(g,0,i.height-e.height)}}function Kg(n,e,t){const i=mi(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-i.right:n.x+i.left}function E2(n){return Ir([],po(n))}function S2(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}let A2=(()=>{class n extends nr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&i.options.animation&&s.animations,o=new bk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function Boe(n,e,t){return Jo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:s}=i,r=s.beforeTitle.apply(this,[t]),o=s.title.apply(this,[t]),a=s.afterTitle.apply(this,[t]);let l=[];return l=Ir(l,po(r)),l=Ir(l,po(o)),l=Ir(l,po(a)),l}getBeforeBody(t,i){return E2(i.callbacks.beforeBody.apply(this,[t]))}getBody(t,i){const{callbacks:s}=i,r=[];return Ot(t,o=>{const a={before:[],lines:[],after:[]},l=S2(s,o);Ir(a.before,po(l.beforeLabel.call(this,o))),Ir(a.lines,l.label.call(this,o)),Ir(a.after,po(l.afterLabel.call(this,o))),r.push(a)}),r}getAfterBody(t,i){return E2(i.callbacks.afterBody.apply(this,[t]))}getFooter(t,i){const{callbacks:s}=i,r=s.beforeFooter.apply(this,[t]),o=s.footer.apply(this,[t]),a=s.afterFooter.apply(this,[t]);let l=[];return l=Ir(l,po(r)),l=Ir(l,po(o)),l=Ir(l,po(a)),l}_createItems(t){const i=this._active,s=this.chart.data,r=[],o=[],a=[];let c,u,l=[];for(c=0,u=i.length;c<u;++c)l.push(Poe(this.chart,i[c]));return t.filter&&(l=l.filter((h,d,f)=>t.filter(h,d,f,s))),t.itemSort&&(l=l.sort((h,d)=>t.itemSort(h,d,s))),Ot(l,h=>{const d=S2(t.callbacks,h);r.push(d.labelColor.call(this,h)),o.push(d.labelPointStyle.call(this,h)),a.push(d.labelTextColor.call(this,h))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(t,i){const s=this.options.setContext(this.getContext()),r=this._active;let o,a=[];if(r.length){const l=Xd[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=x2(this,s),u=Object.assign({},l,c),h=M2(this.chart,s,u),d=w2(s,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,s,r){const o=this.getCaretPosition(t,s,r);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,s){const{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:d}=al(l),{x:f,y:p}=t,{width:g,height:_}=i;let m,y,v,b,x,w;return"center"===o?(x=p+_/2,"left"===r?(m=f,y=m-a,b=x+a,w=x-a):(m=f+g,y=m+a,b=x-a,w=x+a),v=m):(y="left"===r?f+Math.max(c,h)+a:"right"===r?f+g-Math.max(u,d)-a:this.caretX,"top"===o?(b=p,x=b-a,m=y-a,v=y+a):(b=p+_,x=b+a,m=y+a,v=y-a),w=b),{x1:m,x2:y,x3:v,y1:b,y2:x,y3:w}}drawTitle(t,i,s){const r=this.title,o=r.length;let a,l,c;if(o){const u=gu(s.rtl,this.x,this.width);for(t.x=Kg(this,s.titleAlign,s),i.textAlign=u.textAlign(s.titleAlign),i.textBaseline="middle",a=Hn(s.titleFont),l=s.titleSpacing,i.fillStyle=s.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(r[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===o&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,i,s,r,o){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u,boxPadding:h}=o,d=Hn(o.bodyFont),f=Kg(this,"left",o),p=r.x(f),_=i.y+(c<d.lineHeight?(d.lineHeight-c)/2:0);if(o.usePointStyle){const m={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=r.leftForLtr(p,u)+u/2,v=_+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,nw(t,m,y,v),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,nw(t,m,y,v)}else{t.lineWidth=Mt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const m=r.leftForLtr(p,u-h),y=r.leftForLtr(r.xPlus(p,1),u-h-2),v=al(a.borderRadius);Object.values(v).some(b=>0!==b)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,kd(t,{x:m,y:_,w:u,h:c,radius:v}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),kd(t,{x:y,y:_+1,w:u-2,h:c-2,radius:v}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(m,_,u,c),t.strokeRect(m,_,u,c),t.fillStyle=a.backgroundColor,t.fillRect(y,_+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,i,s){const{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:h}=s,d=Hn(s.bodyFont);let f=d.lineHeight,p=0;const g=gu(s.rtl,this.x,this.width),_=function(M){i.fillText(M,g.x(t.x+p),t.y+f/2),t.y+=f+o},m=g.textAlign(a);let y,v,b,x,w,E,A;for(i.textAlign=a,i.textBaseline="middle",i.font=d.string,t.x=Kg(this,m,s),i.fillStyle=s.bodyColor,Ot(this.beforeBody,_),p=l&&"right"!==m?"center"===a?u/2+h:u+2+h:0,x=0,E=r.length;x<E;++x){for(y=r[x],v=this.labelTextColors[x],i.fillStyle=v,Ot(y.before,_),b=y.lines,l&&b.length&&(this._drawColorBox(i,t,x,g,s),f=Math.max(d.lineHeight,c)),w=0,A=b.length;w<A;++w)_(b[w]),f=d.lineHeight;Ot(y.after,_)}p=0,f=d.lineHeight,Ot(this.afterBody,_),t.y-=o}drawFooter(t,i,s){const r=this.footer,o=r.length;let a,l;if(o){const c=gu(s.rtl,this.x,this.width);for(t.x=Kg(this,s.footerAlign,s),t.y+=s.footerMarginTop,i.textAlign=c.textAlign(s.footerAlign),i.textBaseline="middle",a=Hn(s.footerFont),i.fillStyle=s.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,i,s,r){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:h}=s,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:g}=al(r.cornerRadius);i.fillStyle=r.backgroundColor,i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.beginPath(),i.moveTo(l+d,c),"top"===a&&this.drawCaret(t,i,s,r),i.lineTo(l+u-f,c),i.quadraticCurveTo(l+u,c,l+u,c+f),"center"===a&&"right"===o&&this.drawCaret(t,i,s,r),i.lineTo(l+u,c+h-g),i.quadraticCurveTo(l+u,c+h,l+u-g,c+h),"bottom"===a&&this.drawCaret(t,i,s,r),i.lineTo(l+p,c+h),i.quadraticCurveTo(l,c+h,l,c+h-p),"center"===a&&"left"===o&&this.drawCaret(t,i,s,r),i.lineTo(l,c+d),i.quadraticCurveTo(l,c,l+d,c),i.closePath(),i.fill(),r.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,s=this.$animations,r=s&&s.x,o=s&&s.y;if(r||o){const a=Xd[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=x2(this,t),c=Object.assign({},a,this._size),u=M2(i,t,c),h=w2(t,c,u,i);(r._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=mi(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,r,i),hk(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),dk(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Eg(s,r),a=this._positionChanged(r,i);(o||a)&&(this._active=r,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,s),l=this._positionChanged(a,t),c=i||!Eg(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,s,r){const o=this.options;if("mouseout"===t.type)return[];if(!r)return i;const a=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(t,i){const{caretX:s,caretY:r,options:o}=this,a=Xd[o.position].call(this,t,i);return!1!==a&&(s!==a.x||r!==a.y)}}return n.positioners=Xd,n})();var Uoe={id:"tooltip",_element:A2,positioners:Xd,afterInit(n,e,t){t&&(n.tooltip=new A2({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",t))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:lo,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:lo,beforeBody:lo,beforeLabel:lo,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Rt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:lo,afterBody:lo,beforeFooter:lo,footer:lo,afterFooter:lo}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Voe=Object.freeze({__proto__:null,Decimation:roe,Filler:Soe,Legend:Coe,SubTitle:Ioe,Title:Roe,Tooltip:Uoe});class Zg extends hl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Rt(e))return null;const i=this.getLabels();return((n,e)=>null===n?null:Xn(Math.round(n),0,e))(t=isFinite(t)&&i[t]===e?t:function zoe(n,e,t,i){const s=n.indexOf(e);return-1===s?((n,e,t,i)=>("string"==typeof e?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,i):s!==n.lastIndexOf(e)?t:s}(i,e,lt(t,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function T2(n,e,{horizontal:t,minRotation:i}){const s=tr(i),r=(t?Math.sin(s):Math.cos(s))||.001;return Math.min(e/r,.75*e*(""+n).length)}Zg.id="category",Zg.defaults={ticks:{callback:Zg.prototype.getLabelForValue}};class Jg extends hl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Rt(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=Cr(s),c=Cr(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*r)),a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let s,{maxTicksLimit:t,stepSize:i}=e;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function Woe(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=n,f=r||1,p=u-1,{min:g,max:_}=e,m=!Rt(o),y=!Rt(a),v=!Rt(c),b=(_-g)/(h+1);let w,E,A,M,x=TF((_-g)/p/f)*f;if(x<1e-14&&!m&&!y)return[{value:g},{value:_}];M=Math.ceil(_/x)-Math.floor(g/x),M>p&&(x=TF(M*x/p/f)*f),Rt(l)||(w=Math.pow(10,l),x=Math.ceil(x*w)/w),"ticks"===s?(E=Math.floor(g/x)*x,A=Math.ceil(_/x)*x):(E=g,A=_),m&&y&&r&&function wne(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((a-o)/r,x/1e3)?(M=Math.round(Math.min((a-o)/x,u)),x=(a-o)/M,E=o,A=a):v?(E=m?o:E,A=y?a:A,M=c-1,x=(A-E)/M):(M=(A-E)/x,M=Rd(M,Math.round(M),x/1e3)?Math.round(M):Math.ceil(M));const S=Math.max(DF(x),DF(E));w=Math.pow(10,Rt(l)?S:l),E=Math.round(E*w)/w,A=Math.round(A*w)/w;let F=0;for(m&&(d&&E!==o?(t.push({value:o}),E<o&&F++,Rd(Math.round((E+F*x)*w)/w,o,T2(o,b,n))&&F++):E<o&&F++);F<M;++F)t.push({value:Math.round((E+F*x)*w)/w});return y&&d&&A!==a?t.length&&Rd(t[t.length-1].value,a,T2(a,b,n))?t[t.length-1].value=a:t.push({value:a}):(!y||A===a)&&t.push({value:A}),t}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&CF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Ud(e,this.chart.options.locale,this.options.ticks.format)}}class Sw extends Jg{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=xn(e)?e:0,this.max=xn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=tr(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function C2(n){return n/Math.pow(10,Math.floor(As(n)))==1}Sw.id="linear",Sw.defaults={ticks:{callback:Bg.formatters.numeric}};class Aw extends hl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Jg.prototype.parse.apply(this,[e,t]);if(0!==i)return xn(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=xn(e)?Math.max(0,e):null,this.max=xn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=l=>i=e?i:l,o=l=>s=t?s:l,a=(l,c)=>Math.pow(10,Math.floor(As(l))+c);i===s&&(i<=0?(r(1),o(10)):(r(a(i,-1)),o(a(s,1)))),i<=0&&r(a(s,-1)),s<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&r(a(i,-1)),this.min=i,this.max=s}buildTicks(){const e=this.options,i=function joe(n,e){const t=Math.floor(As(e.max)),i=Math.ceil(e.max/Math.pow(10,t)),s=[];let r=Es(n.min,Math.pow(10,Math.floor(As(e.min)))),o=Math.floor(As(r)),a=Math.floor(r/Math.pow(10,o)),l=o<0?Math.pow(10,Math.abs(o)):1;do{s.push({value:r,major:C2(r)}),++a,10===a&&(a=1,++o,l=o>=0?1:l),r=Math.round(a*Math.pow(10,o)*l)/l}while(o<t||o===t&&a<i);const c=Es(n.max,r);return s.push({value:c,major:C2(r)}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&CF(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return void 0===e?"0":Ud(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=As(e),this._valueRange=As(this.max)-As(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(As(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Tw(n){const e=n.ticks;if(e.display&&n.display){const t=mi(e.backdropPadding);return lt(e.font&&e.font.size,wt.font.size)+t.height}return 0}function $oe(n,e,t){return t=qt(t)?t:[t],{w:tie(n,e.string,t),h:t.length*e.lineHeight}}function D2(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function Xoe(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function Koe(n){return 0===n||180===n?"center":n<180?"left":"right"}function Zoe(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}function Joe(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}function R2(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,kt);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}Aw.id="logarithmic",Aw.defaults={ticks:{callback:Bg.formatters.logarithmic,major:{enabled:!0}}};class Yd extends Jg{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=mi(Tw(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=xn(e)&&!isNaN(e)?e:0,this.max=xn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Tw(this.options))}generateTickLabels(e){Jg.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=Xt(this.options.pointLabels.callback,[t,i],this);return s||0===s?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?function qoe(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?nn/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+s[l],a),h=Hn(c.font),d=$oe(n.ctx,h,n._pointLabels[l]);i[l]=d;const f=ss(n.getIndexAngle(l)+a),p=Math.round(WM(f));Xoe(t,e,f,D2(p,u.x,d.w,0,180),D2(p,u.y,d.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function Yoe(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,o=Tw(r)/2,a=n.drawingArea,l=r.pointLabels.centerPointLabels?nn/s:0;for(let c=0;c<s;c++){const u=n.getPointPosition(c,a+o+t[c],l),h=Math.round(WM(ss(u.angle+gn))),d=e[c],f=Joe(u.y,d.h,h),p=Koe(h),g=Zoe(u.x,d.w,p);i.push({x:u.x,y:f,textAlign:p,left:g,top:f,right:g+d.w,bottom:f+d.h})}return i}(n,i,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){return ss(e*(kt/(this._pointLabels.length||1))+tr(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Rt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Rt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function tae(n,e,t){return Jo(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-gn+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),R2(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s}=t,r=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function Qoe(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=i.setContext(n.getPointLabelContext(s)),o=Hn(r.font),{x:a,y:l,textAlign:c,left:u,top:h,right:d,bottom:f}=n._pointLabelItems[s],{backdropColor:p}=r;if(!Rt(p)){const g=al(r.borderRadius),_=mi(r.backdropPadding);t.fillStyle=p;const m=u-_.left,y=h-_.top,v=d-u+_.width,b=f-h+_.height;Object.values(g).some(x=>0!==x)?(t.beginPath(),kd(t,{x:m,y,w:v,h:b,radius:g}),t.fill()):t.fillRect(m,y,v,b)}ol(t,n._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}(this,r),s.display&&this.ticks.forEach((c,u)=>{0!==u&&(a=this.getDistanceFromCenterForValue(c.value),function eae(n,e,t,i){const s=n.ctx,r=e.circular,{color:o,lineWidth:a}=e;!r&&!i||!o||!a||t<0||(s.save(),s.strokeStyle=o,s.lineWidth=a,s.setLineDash(e.borderDash),s.lineDashOffset=e.borderDashOffset,s.beginPath(),R2(n,t,r,i),s.closePath(),s.stroke(),s.restore())}(this,s.setContext(this.getContext(u-1)),a,r))}),i.display){for(e.save(),o=r-1;o>=0;o--){const c=i.setContext(this.getPointLabelContext(o)),{color:u,lineWidth:h}=c;!h||!u||(e.lineWidth=h,e.strokeStyle=u,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=Hn(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=mi(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}ol(e,a.label,0,-r,u,{color:c.color})}),e.restore()}drawTitle(){}}Yd.id="radialLinear",Yd.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Bg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}},Yd.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Yd.descriptors={angleLines:{_fallback:"grid"}};const Qg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zi=Object.keys(Qg);function nae(n,e){return n-e}function I2(n,e){if(Rt(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),xn(o)||(o="string"==typeof i?t.parse(o,i):t.parse(o)),null===o?null:(s&&(o="week"!==s||!du(r)&&!0!==r?t.startOf(o,s):t.startOf(o,"isoWeek",r)),+o)}function P2(n,e,t,i){const s=zi.length;for(let r=zi.indexOf(n);r<s-1;++r){const o=Qg[zi[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return zi[r]}return zi[s-1]}function L2(n,e,t){if(t){if(t.length){const{lo:i,hi:s}=$M(t,e);n[t[i]>=e?t[i]:t[s]]=!0}}else n[e]=!0}function O2(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return 0!==r&&t?function rae(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}(n,i,s,t):i}let Cw=(()=>{class n extends hl{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i){const s=t.time||(t.time={}),r=this._adapter=new Wse._date(t.adapters.date);r.init(i),Cd(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return void 0===t?null:I2(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,s=t.time.unit||"day";let{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&c(this.getMinMax(!1))),r=xn(r)&&!isNaN(r)?r:+i.startOf(Date.now(),s),o=xn(o)&&!isNaN(o)?o:+i.endOf(Date.now(),s)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],s=t[t.length-1]),{min:i,max:s}}buildTicks(){const t=this.options,i=t.time,s=t.ticks,r="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=function Tne(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}(r,o,this.max);return this._unit=i.unit||(s.autoSkip?P2(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function iae(n,e,t,i,s){for(let r=zi.length-1;r>=zi.indexOf(t);r--){const o=zi[r];if(Qg[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return zi[t?zi.indexOf(t):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function sae(n){for(let e=zi.indexOf(n)+1,t=zi.length;e<t;++e)if(Qg[zi[e]].common)return zi[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&l.reverse(),O2(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let r,o,i=0,s=0;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),i=1===t.length?1-r:(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),s=1===t.length?o:(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;i=Xn(i,0,a),s=Xn(s,0,a),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,i=this.min,s=this.max,r=this.options,o=r.time,a=o.unit||P2(o.minUnit,i,s,this._getLabelCapacity(i)),l=lt(o.stepSize,1),c="week"===a&&o.isoWeekday,u=du(c)||!0===c,h={};let f,p,d=i;if(u&&(d=+t.startOf(d,"isoWeek",c)),d=+t.startOf(d,u?"day":a),t.diff(s,i,a)>1e5*l)throw new Error(i+" and "+s+" are too far apart with stepSize of "+l+" "+a);const g="data"===r.ticks.source&&this.getDataTimestamps();for(f=d,p=0;f<s;f=+t.add(f,l,a),p++)L2(h,f,g);return(f===s||"ticks"===r.bounds||1===p)&&L2(h,f,g),Object.keys(h).sort((_,m)=>_-m).map(_=>+_)}getLabelForValue(t){const s=this.options.time;return this._adapter.format(t,s.tooltipFormat?s.tooltipFormat:s.displayFormats.datetime)}_tickFormatFunction(t,i,s,r){const o=this.options,a=o.time.displayFormats,l=this._unit,c=this._majorUnit,h=c&&a[c],d=s[i],p=this._adapter.format(t,r||(c&&h&&d&&d.major?h:l&&a[l])),g=o.ticks.callback;return g?Xt(g,[p,i,s],this):p}generateTickLabels(t){let i,s,r;for(i=0,s=t.length;i<s;++i)r=t[i],r.label=this._tickFormatFunction(r.value,i,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,s=this.ctx.measureText(t).width,r=tr(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*o+l*a,h:s*a+l*o}}_getLabelCapacity(t){const i=this.options.time,s=i.displayFormats,r=s[i.unit]||s.millisecond,o=this._tickFormatFunction(t,0,O2(this,[t],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,s,t=this._cache.data||[];if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(i=0,s=r.length;i<s;++i)t=t.concat(r[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,s;if(t.length)return t;const r=this.getLabels();for(i=0,s=r.length;i<s;++i)t.push(I2(this,r[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return LF(t.sort(nae))}}return n.id="time",n.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},n})();function e_(n,e,t){let r,o,a,l,i=0,s=n.length-1;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=uo(n,"pos",e)),({pos:r,time:a}=n[i]),({pos:o,time:l}=n[s])):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=uo(n,"time",e)),({time:r,pos:a}=n[i]),({time:o,pos:l}=n[s]));const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Dw extends Cw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=e_(t,this.min),this._tableRange=e_(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(e_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return e_(this._table,i*this._tableRange+this._minPos,!0)}}Dw.id="timeseries",Dw.defaults=Cw.defaults;const aae=[Gse,toe,Voe,Object.freeze({__proto__:null,CategoryScale:Zg,LinearScale:Sw,LogarithmicScale:Aw,RadialLinearScale:Yd,TimeScale:Cw,TimeSeriesScale:Dw})];function cae(n,e){return n===e}const t_=function dae(n,e){return n===e||n!=n&&e!=e},n_=function fae(n,e){for(var t=n.length;t--;)if(t_(n[t][0],e))return t;return-1};var mae=Array.prototype.splice;function vu(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}vu.prototype.clear=function uae(){this.__data__=[],this.size=0},vu.prototype.delete=function gae(n){var e=this.__data__,t=n_(e,n);return!(t<0||(t==e.length-1?e.pop():mae.call(e,t,1),--this.size,0))},vu.prototype.get=function yae(n){var e=this.__data__,t=n_(e,n);return t<0?void 0:e[t][1]},vu.prototype.has=function bae(n){return n_(this.__data__,n)>-1},vu.prototype.set=function Mae(n,e){var t=this.__data__,i=n_(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this};const i_=vu,N2="object"==typeof global&&global&&global.Object===Object&&global;var Lae="object"==typeof self&&self&&self.Object===Object&&self;const bu=N2||Lae||Function("return this")();var Nae=bu.Symbol,F2=Object.prototype,Fae=F2.hasOwnProperty,kae=F2.toString,Kd=Nae?Nae.toStringTag:void 0;var Hae=Object.prototype.toString;var k2=Nae?Nae.toStringTag:void 0;const r_=function $ae(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":k2&&k2 in Object(n)?function Bae(n){var e=Fae.call(n,Kd),t=n[Kd];try{n[Kd]=void 0;var i=!0}catch(r){}var s=kae.call(n);return i&&(e?n[Kd]=t:delete n[Kd]),s}(n):function zae(n){return Hae.call(n)}(n)},fl=function qae(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},Rw=function Jae(n){if(!fl(n))return!1;var e=r_(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,Qae=bu["__core-js_shared__"],B2=(n=/[^.]+$/.exec(Qae&&Qae.keys&&Qae.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var ile=Function.prototype.toString;var ale=/^\[object .+?Constructor\]$/,dle=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ple=function fle(n){return!(!fl(n)||function ele(n){return!!B2&&B2 in n}(n))&&(Rw(n)?dle:ale).test(function sle(n){if(null!=n){try{return ile.call(n)}catch(e){}try{return n+""}catch(e){}}return""}(n))},Pw=function _le(n,e){var t=function mle(n,e){return null==n?void 0:n[e]}(n,e);return ple(t)?t:void 0},U2=Pw(bu,"Map"),Zd=Pw(Object,"create");var Ale=Object.prototype.hasOwnProperty;var Rle=Object.prototype.hasOwnProperty;function xu(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}xu.prototype.clear=function ble(){this.__data__=Zd?Zd(null):{},this.size=0},xu.prototype.delete=function Mle(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},xu.prototype.get=function Tle(n){var e=this.__data__;if(Zd){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return Ale.call(e,n)?e[n]:void 0},xu.prototype.has=function Ile(n){var e=this.__data__;return Zd?void 0!==e[n]:Rle.call(e,n)},xu.prototype.set=function Ole(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Zd&&void 0===e?"__lodash_hash_undefined__":e,this};const V2=xu,o_=function Vle(n,e){var t=n.__data__;return function Ble(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Mu(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Mu.prototype.clear=function Fle(){this.size=0,this.__data__={hash:new V2,map:new(U2||i_),string:new V2}},Mu.prototype.delete=function Hle(n){var e=o_(this,n).delete(n);return this.size-=e?1:0,e},Mu.prototype.get=function Gle(n){return o_(this,n).get(n)},Mu.prototype.has=function jle(n){return o_(this,n).has(n)},Mu.prototype.set=function qle(n,e){var t=o_(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this};const Yle=Mu;function wu(n){var e=this.__data__=new i_(n);this.size=e.size}wu.prototype.clear=function Eae(){this.__data__=new i_,this.size=0},wu.prototype.delete=function Aae(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},wu.prototype.get=function Cae(n){return this.__data__.get(n)},wu.prototype.has=function Rae(n){return this.__data__.has(n)},wu.prototype.set=function Zle(n,e){var t=this.__data__;if(t instanceof i_){var i=t.__data__;if(!U2||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Yle(i)}return t.set(n,e),this.size=t.size,this};const Qle=wu;var ece=function(){try{var n=Pw(Object,"defineProperty");return n({},"",{}),n}catch(e){}}();const a_=ece,Lw=function tce(n,e,t){"__proto__"==e&&a_?a_(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t},Ow=function nce(n,e,t){(void 0!==t&&!t_(n[e],t)||void 0===t&&!(e in n))&&Lw(n,e,t)};var sce=function ice(n){return function(e,t,i){for(var s=-1,r=Object(e),o=i(e),a=o.length;a--;){var l=o[n?a:++s];if(!1===t(r[l],l,r))break}return e}}();const rce=sce;var H2="object"==typeof exports&&exports&&!exports.nodeType&&exports,z2=H2&&"object"==typeof module&&module&&!module.nodeType&&module,G2=z2&&z2.exports===H2?bu.Buffer:void 0,W2=G2?G2.allocUnsafe:void 0;const j2=bu.Uint8Array,fce=function dce(n,e){var t=e?function uce(n){var e=new n.constructor(n.byteLength);return new j2(e).set(new j2(n)),e}(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)};var $2=Object.create,gce=function(){function n(){}return function(e){if(!fl(e))return{};if($2)return $2(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const _ce=gce;var vce=function yce(n,e){return function(t){return n(e(t))}}(Object.getPrototypeOf,Object);const q2=vce;var bce=Object.prototype;const X2=function xce(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||bce)},Jd=function Ece(n){return null!=n&&"object"==typeof n},Y2=function Ace(n){return Jd(n)&&"[object Arguments]"==r_(n)};var K2=Object.prototype,Tce=K2.hasOwnProperty,Cce=K2.propertyIsEnumerable,Dce=Y2(function(){return arguments}())?Y2:function(n){return Jd(n)&&Tce.call(n,"callee")&&!Cce.call(n,"callee")};const Nw=Dce,Fw=Array.isArray,Z2=function Pce(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991},kw=function Lce(n){return null!=n&&Z2(n.length)&&!Rw(n)};var J2="object"==typeof exports&&exports&&!exports.nodeType&&exports,Q2=J2&&"object"==typeof module&&module&&!module.nodeType&&module,eB=Q2&&Q2.exports===J2?bu.Buffer:void 0;const tB=(eB?eB.isBuffer:void 0)||function Fce(){return!1};var nB=Function.prototype.toString,Wce=Object.prototype.hasOwnProperty,jce=nB.call(Object);var Zt={};Zt["[object Float32Array]"]=Zt["[object Float64Array]"]=Zt["[object Int8Array]"]=Zt["[object Int16Array]"]=Zt["[object Int32Array]"]=Zt["[object Uint8Array]"]=Zt["[object Uint8ClampedArray]"]=Zt["[object Uint16Array]"]=Zt["[object Uint32Array]"]=!0,Zt["[object Arguments]"]=Zt["[object Array]"]=Zt["[object ArrayBuffer]"]=Zt["[object Boolean]"]=Zt["[object DataView]"]=Zt["[object Date]"]=Zt["[object Error]"]=Zt["[object Function]"]=Zt["[object Map]"]=Zt["[object Number]"]=Zt["[object Object]"]=Zt["[object RegExp]"]=Zt["[object Set]"]=Zt["[object String]"]=Zt["[object WeakMap]"]=!1;var iB="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qd=iB&&"object"==typeof module&&module&&!module.nodeType&&module,Bw=Qd&&Qd.exports===iB&&N2.process,wue=function(){try{return Qd&&Qd.require&&Qd.require("util").types||Bw&&Bw.binding&&Bw.binding("util")}catch(e){}}(),rB=wue&&wue.isTypedArray;const oB=rB?function bue(n){return function(e){return n(e)}}(rB):function yue(n){return Jd(n)&&Z2(n.length)&&!!Zt[r_(n)]},Uw=function Sue(n,e){if(("constructor"!==e||"function"!=typeof n[e])&&"__proto__"!=e)return n[e]};var Tue=Object.prototype.hasOwnProperty;const Due=function Cue(n,e,t){var i=n[e];(!Tue.call(n,e)||!t_(i,t)||void 0===t&&!(e in n))&&Lw(n,e,t)};var Nue=/^(?:0|[1-9]\d*)$/;const aB=function Fue(n,e){var t=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&Nue.test(n))&&n>-1&&n%1==0&&n<e};var Bue=Object.prototype.hasOwnProperty;const Vue=function Uue(n,e){var t=Fw(n),i=!t&&Nw(n),s=!t&&!i&&tB(n),r=!t&&!i&&!s&&oB(n),o=t||i||s||r,a=o?function Pue(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}(n.length,String):[],l=a.length;for(var c in n)(e||Bue.call(n,c))&&(!o||!("length"==c||s&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||aB(c,l)))&&a.push(c);return a};var Wue=Object.prototype.hasOwnProperty;const $ue=function jue(n){if(!fl(n))return function Hue(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=X2(n),t=[];for(var i in n)"constructor"==i&&(e||!Wue.call(n,i))||t.push(i);return t},lB=function que(n){return kw(n)?Vue(n,!0):$ue(n)},Yue=function Xue(n){return function Rue(n,e,t,i){var s=!t;t||(t={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=i?i(t[a],n[a],a,t,n):void 0;void 0===l&&(l=n[a]),s?Lw(t,a,l):Due(t,a,l)}return t}(n,lB(n))},Zue=function Kue(n,e,t,i,s,r,o){var a=Uw(n,t),l=Uw(e,t),c=o.get(l);if(c)Ow(n,t,c);else{var u=r?r(a,l,t+"",n,e,o):void 0,h=void 0===u;if(h){var d=Fw(l),f=!d&&tB(l),p=!d&&!f&&oB(l);u=l,d||f||p?Fw(a)?u=a:function Oce(n){return Jd(n)&&kw(n)}(a)?u=function pce(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}(a):f?(h=!1,u=function ace(n,e){if(e)return n.slice();var t=n.length,i=W2?W2(t):new n.constructor(t);return n.copy(i),i}(l,!0)):p?(h=!1,u=fce(l,!0)):u=[]:function $ce(n){if(!Jd(n)||"[object Object]"!=r_(n))return!1;var e=q2(n);if(null===e)return!0;var t=Wce.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&nB.call(t)==jce}(l)||Nw(l)?(u=a,Nw(a)?u=Yue(a):(!fl(a)||Rw(a))&&(u=function Mce(n){return"function"!=typeof n.constructor||X2(n)?{}:_ce(q2(n))}(l))):h=!1}h&&(o.set(l,u),s(u,l,i,r,o),o.delete(l)),Ow(n,t,u)}},Jue=function cB(n,e,t,i,s){n!==e&&rce(e,function(r,o){if(s||(s=new Qle),fl(r))Zue(n,e,o,t,cB,i,s);else{var a=i?i(Uw(n,o),r,o+"",n,e,s):void 0;void 0===a&&(a=r),Ow(n,o,a)}},lB)},uB=function Que(n){return n},the=function ehe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)};var hB=Math.max;const rhe=function she(n){return function(){return n}};var ohe=a_?function(n,e){return a_(n,"toString",{configurable:!0,enumerable:!1,value:rhe(e),writable:!0})}:uB,uhe=Date.now,dhe=function hhe(n){var e=0,t=0;return function(){var i=uhe(),s=16-(i-t);if(t=i,s>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}(ohe);const fhe=dhe,mhe=function phe(n,e){return fhe(function nhe(n,e,t){return e=hB(void 0===e?n.length-1:e,0),function(){for(var i=arguments,s=-1,r=hB(i.length-e,0),o=Array(r);++s<r;)o[s]=i[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=i[s];return a[e]=t(o),the(n,this,a)}}(n,e,uB),n+"")};var vhe=function yhe(n){return mhe(function(e,t){var i=-1,s=t.length,r=s>1?t[s-1]:void 0,o=s>2?t[2]:void 0;for(r=n.length>3&&"function"==typeof r?(s--,r):void 0,o&&function ghe(n,e,t){if(!fl(t))return!1;var i=typeof e;return!!("number"==i?kw(t)&&aB(e,t.length):"string"==i&&e in t)&&t_(t[e],n)}(t[0],t[1],o)&&(r=s<3?void 0:r,s=1),e=Object(e);++i<s;){var a=t[i];a&&n(e,a,i,r)}return e})}(function(n,e,t){Jue(n,e,t)});const dB=vhe;let bhe=(()=>{class n{constructor(){this.colorschemesOptions=new _s(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xhe=(()=>{class n{constructor(t,i,s){this.zone=i,this.themeService=s,this.type="bar",this.plugins=[],this.chartClick=new gt,this.chartHover=new gt,this.subs=[],this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(function lae(n,e=go){return n=null!=n?n:cae,Gn((t,i)=>{let s,r=!0;t.subscribe(In(i,o=>{const a=e(o);(r||!n(s,a))&&(r=!1,s=a,i.next(o))}))})}()).subscribe(r=>this.themeChanged(r)))}ngOnChanges(t){const i=["type"],s=Object.getOwnPropertyNames(t);if(s.some(r=>i.includes(r))||s.every(r=>t[r].isFirstChange()))this.render();else{const r=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,r.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,r.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,r.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),_u.register(...this.plugins),this.zone.runOutsideAngular(()=>this.chart=new _u(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>{var i;return null===(i=this.chart)||void 0===i?void 0:i.update(t)})}hideDataset(t,i){this.chart&&(this.chart.getDatasetMeta(t).hidden=i,this.update())}isDatasetHidden(t){var i,s;return null===(s=null===(i=this.chart)||void 0===i?void 0:i.getDatasetMeta(t))||void 0===s?void 0:s.hidden}toBase64Image(){var t;return null===(t=this.chart)||void 0===t?void 0:t.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return dB({onHover:(t,i)=>{var s;!this.chartHover.observed&&!(null===(s=this.chartHover.observers)||void 0===s?void 0:s.length)||this.zone.run(()=>this.chartHover.emit({event:t,active:i}))},onClick:(t,i)=>{var s;!this.chartClick.observed&&!(null===(s=this.chartClick.observers)||void 0===s?void 0:s.length)||this.zone.run(()=>this.chartClick.emit({event:t,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return n.\u0275fac=function(t){return new(t||n)(J(kn),J(rn),J(bhe))},n.\u0275dir=ze({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Fi]}),n})();const Mhe=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],whe={datasets:{line:{backgroundColor:n=>Ri(Ii(n.datasetIndex),.4),borderColor:n=>Ri(Ii(n.datasetIndex),1),pointBackgroundColor:n=>Ri(Ii(n.datasetIndex),1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:n=>Ri(Ii(n.datasetIndex),.8)},bar:{backgroundColor:n=>Ri(Ii(n.datasetIndex),.6),borderColor:n=>Ri(Ii(n.datasetIndex),1),hoverBackgroundColor:n=>Ri(Ii(n.datasetIndex),.8),hoverBorderColor:n=>Ri(Ii(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>Ri(Ii(n.dataIndex),.6),borderColor:"#fff",hoverBackgroundColor:n=>Ri(Ii(n.dataIndex),1),hoverBorderColor:n=>Ri(Ii(n.dataIndex),1)},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>Ri(Ii(n.dataIndex),.6),borderColor:n=>Ri(Ii(n.dataIndex),1),hoverBackgroundColor:n=>Ri(Ii(n.dataIndex),.8),hoverBorderColor:n=>Ri(Ii(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Ri(n,e){return"rgba("+n.concat(e).join(",")+")"}function Vw(n,e){return Math.floor(Math.random()*(e-n+1))+n}function Ii(n=0){return Mhe[n]||function Ehe(){return[Vw(0,255),Vw(0,255),Vw(0,255)]}()}let fB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();_u.register(...aae);let She=(()=>{class n{constructor(t){(null==t?void 0:t.plugins)&&_u.register(...null==t?void 0:t.plugins);const i=dB(whe,(null==t?void 0:t.defaults)||{});wt.set(i)}static forRoot(t){return{ngModule:n,providers:[{provide:fB,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(pe(fB,8))},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({imports:[[]]}),n})(),Ahe=(()=>{class n{transform(t,i){return t?i?(i=i.toLocaleLowerCase(),t.filter(s=>{var r,o;return(null===(r=s.title)||void 0===r?void 0:r.toLocaleLowerCase().includes(i))||(null===(o=s.body)||void 0===o?void 0:o.toLocaleLowerCase().includes(i))})):t:[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=bi({name:"filter",type:n,pure:!0}),n})();const The=function(n,e){return{" text-bg-success":n,"text-bg-danger":e}};function Che(n,e){if(1&n&&(Be(0,"div",14)(1,"div",15)(2,"h3",16),qe(3),Pe(),Be(4,"p",17)(5,"span",18),qe(6),Pe()(),Hs(7,"p",19),Be(8,"p",17),qe(9),Pe(),Be(10,"p",17),qe(11),Pe(),Be(12,"a",20),qe(13,"View Issue"),Pe()()()),2&n){const t=e.$implicit,i=ai(2);sn("hidden","all"!=i.state&&t.state!==i.state),ot(3),pa(t.title),ot(2),sn("ngClass",function SD(n,e,t,i,s){return TD(ie(),xi(),n,e,t,i,s)}(8,The,"closed"===t.state,"open"===t.state)),ot(1),pa(t.state),ot(1),sn("innerHTML",t.body,tA),ot(2),li(" Last Updated: ",t.updated_at,""),ot(2),li(" Upvotes: ",t.reactions["+1"],""),ot(1),sc("href",t.html_url,ha)}}const Hw=function(n){return{active:n}};function Dhe(n,e){if(1&n){const t=ic();Be(0,"div",2)(1,"div",3)(2,"div",4),Hs(3,"tx-search",5),Pe(),Be(4,"div",6)(5,"button",7),Kt("click",function(){Br(t);const s=ai(),r=wv(3);return s.viewStats(r)}),qe(6,"View Stats"),Pe()()(),Be(7,"div",8)(8,"ul",9)(9,"li",10)(10,"span",11),Kt("click",function(){return Br(t),ai().selectState("all")}),qe(11,"All"),Pe()(),Be(12,"li",10)(13,"span",11),Kt("click",function(){return Br(t),ai().selectState("closed")}),qe(14,"Closed"),Pe()(),Be(15,"li",10)(16,"span",11),Kt("click",function(){return Br(t),ai().selectState("open")}),qe(17,"Open"),Pe()()()(),Be(18,"div",12),Ki(19,Che,14,11,"div",13),function ID(n,e){const t=At();let i;const s=n+20;t.firstCreatePass?(i=function K4(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[s]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(s,i.onDestroy)):i=t.data[s];const r=i.factory||(i.factory=ua(i.type)),o=yo(J);try{const a=Af(!1),l=r();return Af(a),function bG(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,ie(),s,l),l}finally{yo(o)}}(20,"filter"),Pe()()}if(2&n){const t=ai();ot(3),sn("label","Search for an issue"),ot(7),sn("ngClass",rp(8,Hw,"all"===t.state)),ot(3),sn("ngClass",rp(10,Hw,"closed"===t.state)),ot(3),sn("ngClass",rp(12,Hw,"open"===t.state)),ot(3),sn("ngForOf",function PD(n,e,t,i){const s=n+20,r=ie(),o=Tl(r,s);return function ph(n,e){return n[1].data[e].pure}(r,s)?TD(r,xi(),e,o.transform,t,i,o):o.transform(t,i)}(20,5,t.issues,t.searchText))}}function Rhe(n,e){1&n&&(Be(0,"div",2)(1,"h1"),qe(2,"This repo has no issues!"),Pe()())}function Ihe(n,e){if(1&n){const t=ic();Be(0,"div",21)(1,"div",22)(2,"h4",23),qe(3,"Issue Stats"),Pe(),Be(4,"button",24),Kt("click",function(){Br(t);const s=ai();return null==s.modalRef?null:s.modalRef.hide()}),Be(5,"span",25),qe(6,"\xd7"),Pe()()(),Be(7,"div",26),Hs(8,"canvas",27),Pe()()}if(2&n){const t=ai();ot(8),sn("type","pie")("datasets",t.pieChartDatasets)("labels",t.pieChartLabels)("options",t.pieChartOptions)("plugins",t.pieChartPlugins)("legend",t.pieChartLegend)}}const Phe=[{path:"",component:dne},{path:"issues",component:(()=>{class n{constructor(t,i,s,r,o){this.aRouter=t,this.route=i,this.github=s,this.helperService=r,this.modalService=o,this.repo={},this.issues=[],this.searchText="",this.pieChartOptions={responsive:!1},this.pieChartLabels=["Closed","Open"],this.pieChartDatasets=[{data:[0,0]}],this.pieChartLegend=!0,this.pieChartPlugins=[],this.state="all"}ngOnInit(){this.aRouter.params.subscribe(t=>{t.repo?(this.repo=JSON.parse(t.repo),this.getIssues(this.repo.full_name)):this.route.navigate(["/"])}),this.helperService.$searchText.subscribe(t=>{this.searchText=t})}getIssues(t){this.github.getIssues(t).subscribe(i=>{this.issues=i,i.map(s=>{"closed"===s.state?this.pieChartDatasets[0].data[0]+=1:"open"===s.state&&(this.pieChartDatasets[0].data[1]+=1)})})}viewStats(t){this.modalRef=this.modalService.show(t)}selectState(t){this.state=t}}return n.\u0275fac=function(t){return new(t||n)(J(wa),J(Ai),J(Lb),J(pb),J(rm))},n.\u0275cmp=Ls({type:n,selectors:[["tx-issue-list"]],decls:4,vars:2,consts:[["class","issues issues-container",4,"ngIf"],["issueReport",""],[1,"issues","issues-container"],[1,"issues__search-container","d-flex","justify-content-center","flex-md-row","flex-column","w-100","mb-5"],[1,"issues__search-input-wrapper"],[3,"label"],[1,"issues__search-button-wrapper","d-flex","align-items-center"],["target","_blank",1,"btn","btn-secondary","mt-4",3,"click"],[1,"issues__nav-container","w-75","mx-auto","d-flex","justify-content-end"],[1,"nav"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],[1,"issues-wrapper","d-flex","flex-column","align-items-center"],["class","card w-75 mb-3",3,"hidden",4,"ngFor","ngForOf"],[1,"card","w-75","mb-3",3,"hidden"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"badge",3,"ngClass"],[1,"card-text",3,"innerHTML"],["target","_blank",1,"btn","btn-secondary",3,"href"],[1,"modal-dialog","flex-column","w-100"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body","d-flex","justify-content-center"],["baseChart","",3,"type","datasets","labels","options","plugins","legend"]],template:function(t,i){1&t&&(Ki(0,Dhe,21,14,"div",0),Ki(1,Rhe,3,0,"div",0),Ki(2,Ihe,9,6,"ng-template",null,1,e0)),2&t&&(sn("ngIf",i.issues.length),ot(1),sn("ngIf",!i.issues))},directives:[L0,fL,j1,P0,xhe],pipes:[Ahe],styles:[".issues[_ngcontent-%COMP%]{margin:50px 0}.issues[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:1px solid #8E949B}.issues[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#8e949b;margin-bottom:15px}.issues__search-input-wrapper[_ngcontent-%COMP%]{flex:.3;margin-right:15px}.issues__filter-container[_ngcontent-%COMP%]{margin-bottom:50px}.issues__nav-container[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{border-top:1px solid #8E949B;border-right:1px solid #8E949B}.issues__nav-container[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #8E949B;border-top-left-radius:8px}.issues__nav-container[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:last-of-type{border-top-right-radius:8px}.issues__nav-container[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#8e949b!important}.issues__nav-container[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#8e949b!important;color:#212529!important}.issues__nav-container[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})()}];let Lhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({imports:[[bI.forRoot(Phe)],bI]}),n})(),Ohe=(()=>{class n{constructor(){this.title="em-motloung-touraxis"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ls({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(t,i){1&t&&(Be(0,"div",0),Hs(1,"router-outlet"),Pe())},directives:[rb],styles:[""]}),n})();class pB{}const mo="*";function mB(n,e=null){return{type:2,steps:n,options:e}}function gB(n){return{type:6,styles:n,offset:null}}function _B(n){Promise.resolve(null).then(n)}class ef{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){_B(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class yB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0;const r=this.players.length;0==r?_B(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Et=!1;function vB(n){return new Ae(3e3,Et)}function mde(){return"undefined"!=typeof window&&void 0!==window.document}function Gw(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ta(n){switch(n.length){case 0:return new ef;case 1:return n[0];default:return new yB(n)}}function bB(n,e,t,i,s={},r={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const h=u.offset,d=h==l,f=d&&c||{};Object.keys(u).forEach(p=>{let g=p,_=u[p];if("offset"!==p)switch(g=e.normalizePropertyName(g,o),_){case"!":_=s[p];break;case mo:_=r[p];break;default:_=e.normalizeStyleValue(p,g,_,o)}f[g]=_}),d||a.push(f),c=f,l=h}),o.length)throw function sde(n){return new Ae(3502,Et)}();return a}function Ww(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&jw(t,"start",n)));break;case"done":n.onDone(()=>i(t&&jw(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&jw(t,"destroy",n)))}}function jw(n,e,t){const i=t.totalTime,r=$w(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(r._data=o),r}function $w(n,e,t,i,s="",r=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function rs(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function xB(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let qw=(n,e)=>!1,MB=(n,e,t)=>[],wB=null;function Xw(n){const e=n.parentNode||n.host;return e===wB?null:e}(Gw()||"undefined"!=typeof Element)&&(mde()?(wB=(()=>document.documentElement)(),qw=(n,e)=>{for(;e;){if(e===n)return!0;e=Xw(e)}return!1}):qw=(n,e)=>n.contains(e),MB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let pl=null,EB=!1;function SB(n){pl||(pl=function _de(){return"undefined"!=typeof document?document.body:null}()||{},EB=!!pl.style&&"WebkitAppearance"in pl.style);let e=!0;return pl.style&&!function gde(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in pl.style,!e&&EB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in pl.style)),e}const AB=qw,TB=MB;let CB=(()=>{class n{validateStyleProperty(t){return SB(t)}matchesElement(t,i){return!1}containsElement(t,i){return AB(t,i)}getParentElement(t){return Xw(t)}query(t,i,s){return TB(t,i,s)}computeStyle(t,i,s){return s||""}animate(t,i,s,r,o,a=[],l){return new ef(s,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})(),Yw=(()=>{class n{}return n.NOOP=new CB,n})();const Kw="ng-enter",c_="ng-leave",u_="ng-trigger",h_=".ng-trigger",RB="ng-animating",Zw=".ng-animating";function ml(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Jw(parseFloat(e[1]),e[2])}function Jw(n,e){return"s"===e?1e3*n:n}function d_(n,e,t){return n.hasOwnProperty("duration")?n:function bde(n,e,t){let s,r=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(vB()),{duration:0,delay:0,easing:""};s=Jw(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(r=Jw(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else s=n;if(!t){let a=!1,l=e.length;s<0&&(e.push(function Fhe(){return new Ae(3100,Et)}()),a=!0),r<0&&(e.push(function khe(){return new Ae(3101,Et)}()),a=!0),a&&e.splice(l,0,vB())}return{duration:s,delay:r,easing:o}}(n,e,t)}function Eu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function na(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Eu(n,t);return t}function PB(n,e,t){return t?e+":"+t+";":""}function LB(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=PB(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=PB(0,wde(t),n.style[t]));n.setAttribute("style",e)}function Pr(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const s=eE(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[s]),n.style[s]=e[i]}),Gw()&&LB(n))}function gl(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=eE(t);n.style[i]=""}),Gw()&&LB(n))}function tf(n){return Array.isArray(n)?1==n.length?n[0]:mB(n):n}const Qw=new RegExp("{{\\s*(.+?)\\s*}}","g");function OB(n){let e=[];if("string"==typeof n){let t;for(;t=Qw.exec(n);)e.push(t[1]);Qw.lastIndex=0}return e}function f_(n,e,t){const i=n.toString(),s=i.replace(Qw,(r,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function Uhe(n){return new Ae(3003,Et)}()),a=""),a.toString()});return s==i?n:s}function p_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Mde=/-+([a-z0-9])/g;function eE(n){return n.replace(Mde,(...e)=>e[1].toUpperCase())}function wde(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function os(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Vhe(n){return new Ae(3004,Et)}()}}function NB(n,e){return window.getComputedStyle(n)[e]}function Dde(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Rde(n,e,t){if(":"==n[0]){const l=function Ide(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function ede(n){return new Ae(3016,Et)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Qhe(n){return new Ae(3015,Et)}()),e;const s=i[1],r=i[2],o=i[3];e.push(FB(s,o));"<"==r[0]&&!("*"==s&&"*"==o)&&e.push(FB(o,s))}(i,t,e)):t.push(n),t}const y_=new Set(["true","1"]),v_=new Set(["false","0"]);function FB(n,e){const t=y_.has(n)||v_.has(n),i=y_.has(e)||v_.has(e);return(s,r)=>{let o="*"==n||n==s,a="*"==e||e==r;return!o&&t&&"boolean"==typeof s&&(o=s?y_.has(n):v_.has(n)),!a&&i&&"boolean"==typeof r&&(a=r?y_.has(e):v_.has(e)),o&&a}}const Pde=new RegExp("s*:selfs*,?","g");function tE(n,e,t,i){return new Lde(n).build(e,t,i)}class Lde{constructor(e){this._driver=e}build(e,t,i){const s=new Fde(t);this._resetContextStyleTimingState(s);const r=os(this,tf(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),r}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0;const r=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function zhe(){return new Ae(3006,Et)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,r.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,s+=l.depCount,o.push(l)}else t.errors.push(function Ghe(){return new Ae(3007,Et)}())}),{type:7,name:e.name,states:r,transitions:o,queryCount:i,depCount:s,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=s||{};i.styles.forEach(a=>{if(b_(a)){const l=a;Object.keys(l).forEach(c=>{OB(l[c]).forEach(u=>{o.hasOwnProperty(u)||r.add(u)})})}}),r.size&&(p_(r.values()),t.errors.push(function Whe(n,e){return new Ae(3008,Et)}()))}return{type:0,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=os(this,tf(e.animation),t);return{type:1,matchers:Dde(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:_l(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>os(this,i,t)),options:_l(e.options)}}visitGroup(e,t){const i=t.currentTime;let s=0;const r=e.steps.map(o=>{t.currentTime=i;const a=os(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:3,steps:r,options:_l(e.options)}}visitAnimate(e,t){const i=function Bde(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return nE(d_(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=nE(0,0,"");return r.dynamic=!0,r.strValue=i,r}return t=t||d_(i,e),nE(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let s,r=e.styles?e.styles:gB({});if(5==r.type)s=this.visitKeyframes(r,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=gB(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,s=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:s,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==mo?i.push(o):t.errors.push(function jhe(n){return new Ae(3002,Et)}()):i.push(o)}):i.push(e.styles);let s=!1,r=null;return i.forEach(o=>{if(b_(o)){const a=o,l=a.easing;if(l&&(r=l,delete a.easing),!s)for(let c in a)if(a[c].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:i,easing:r,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let s=t.currentTime,r=t.currentTime;i&&r>0&&(r-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(r!=s&&r>=c.startTime&&s<=c.endTime&&(t.errors.push(function $he(n,e,t,i,s){return new Ae(3010,Et)}()),u=!1),r=c.startTime),u&&(l[a]={startTime:r,endTime:s}),t.options&&function xde(n,e,t){const i=e.params||{},s=OB(n);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||t.push(function Bhe(n){return new Ae(3001,Et)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function qhe(){return new Ae(3011,Et)}()),i;let r=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(m=>{const y=this._makeStyleAst(m,t);let v=null!=y.offset?y.offset:function kde(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(b_(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(b_(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(y.styles),b=0;return null!=v&&(r++,b=y.offset=v),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),y});l&&t.errors.push(function Xhe(){return new Ae(3012,Et)}()),a&&t.errors.push(function Yhe(){return new Ae(3200,Et)}());const h=e.steps.length;let d=0;r>0&&r<h?t.errors.push(function Khe(){return new Ae(3202,Et)}()):0==r&&(d=1/(h-1));const f=h-1,p=t.currentTime,g=t.currentAnimateTimings,_=g.duration;return u.forEach((m,y)=>{const v=d>0?y==f?1:d*y:o[y],b=v*_;t.currentTime=p+g.delay+b,g.duration=b,this._validateStyleAst(m,t),m.offset=v,i.styles.push(m)}),i}visitReference(e,t){return{type:8,animation:os(this,tf(e.animation),t),options:_l(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:_l(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:_l(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[r,o]=function Ode(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Pde,"")),n=n.replace(/@\*/g,h_).replace(/@\w+/g,t=>h_+"-"+t.substr(1)).replace(/:animating/g,Zw),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+r:r,rs(t.collectedStyles,t.currentQuerySelector,{});const a=os(this,tf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:_l(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Zhe(){return new Ae(3013,Et)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:d_(e.timings,t.errors,!0);return{type:12,animation:os(this,tf(e.animation),t),timings:i,options:null}}}class Fde{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function b_(n){return!Array.isArray(n)&&"object"==typeof n}function _l(n){return n?(n=Eu(n)).params&&(n.params=function Nde(n){return n?Eu(n):null}(n.params)):n={},n}function nE(n,e,t){return{duration:n,delay:e,easing:t}}function iE(n,e,t,i,s,r,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class x_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Hde=new RegExp(":enter","g"),Gde=new RegExp(":leave","g");function sE(n,e,t,i,s,r={},o={},a,l,c=[]){return(new Wde).buildKeyframes(n,e,t,i,s,r,o,a,l,c)}class Wde{buildKeyframes(e,t,i,s,r,o,a,l,c,u=[]){c=c||new x_;const h=new rE(e,t,c,s,r,u,[]);h.options=l,h.currentTimeline.setStyles([o],null,h.errors,l),os(this,i,h);const d=h.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=d.length-1;p>=0;p--){const g=d[p];if(g.element===t){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,h.errors,l)}return d.length?d.map(f=>f.buildKeyframes()):[iE(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const s=t.createSubContext(e.options),r=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,s,s.options);r!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let r=t.currentTimeline.currentTime;const o=null!=i.duration?ml(i.duration):null,a=null!=i.delay?ml(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),os(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let s=t;const r=e.options;if(r&&(r.params||r.delay)&&(s=t.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=M_);const o=ml(r.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>os(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let s=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?ml(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);r&&a.delayNextStep(r),os(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return d_(t.params?f_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());const r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(i.duration),this.visitStyle(r,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.getCurrentStyleProperties().length&&i.forwardFrame();const r=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(r):i.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,s=t.currentTimeline.duration,r=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*r),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+r),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,s=e.options||{},r=s.delay?ml(s.delay):0;r&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=M_);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(e.options,c);r&&h.delayNextStep(r),c===t.element&&(l=h.currentTimeline),os(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,s=t.currentTimeline,r=e.timings,o=Math.abs(r.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;os(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-h+(s.startTime-i.currentTimeline.startTime)}}const M_={};class rE{constructor(e,t,i,s,r,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=M_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new w_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let s=this.options;null!=i.duration&&(s.duration=ml(i.duration)),null!=i.delay&&(s.delay=ml(i.delay));const r=i.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=f_(r[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){const s=t||this.element,r=new rE(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=M_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},r=new jde(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,r,o){let a=[];if(s&&a.push(this.element),e.length>0){e=(e=e.replace(Hde,"."+this._enterClassName)).replace(Gde,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!r&&0==a.length&&o.push(function Jhe(n){return new Ae(3014,Et)}()),a}}class w_{constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new w_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||mo,this._currentKeyframe[t]=mo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){t&&(this._previousKeyframe.easing=t);const r=s&&s.params||{},o=function $de(n,e){const t={};let i;return n.forEach(s=>{"*"===s?(i=i||Object.keys(e),i.forEach(r=>{t[r]=mo})):na(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=f_(o[a],r,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:mo),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],s=e._styleSummary[t];(!i||s.time>i.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,l)=>{const c=na(a,!0);Object.keys(c).forEach(u=>{const h=c[u];"!"==h?e.add(u):h==mo&&t.add(u)}),i||(c.offset=l/this.duration),s.push(c)});const r=e.size?p_(e.values()):[],o=t.size?p_(t.values()):[];if(i){const a=s[0],l=Eu(a);a.offset=0,l.offset=1,s=[a,l]}return iE(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class jde extends w_{constructor(e,t,i,s,r,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],o=i+t,a=t/o,l=na(e[0],!1);l.offset=0,r.push(l);const c=na(e[0],!1);c.offset=UB(a),r.push(c);const u=e.length-1;for(let h=1;h<=u;h++){let d=na(e[h],!1);d.offset=UB((t+d.offset*i)/o),r.push(d)}i=o,t=0,s="",e=r}return iE(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}}function UB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class oE{}class qde extends oE{normalizePropertyName(e,t){return eE(e)}normalizeStyleValue(e,t,i,s){let r="";const o=i.toString().trim();if(Xde[t]&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function Hhe(n,e){return new Ae(3005,Et)}())}return o+r}}const Xde=(()=>function Yde(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function VB(n,e,t,i,s,r,o,a,l,c,u,h,d){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const aE={};class HB{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return function Kde(n,e,t,i,s){return n.some(r=>r(e,t,i,s))}(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){const s=this._stateStyles["*"],r=this._stateStyles[e],o=s?s.buildStyles(t,i):{};return r?r.buildStyles(t,i):o}build(e,t,i,s,r,o,a,l,c,u){const h=[],d=this.ast.options&&this.ast.options.params||aE,p=this.buildStyles(i,a&&a.params||aE,h),g=l&&l.params||aE,_=this.buildStyles(s,g,h),m=new Set,y=new Map,v=new Map,b="void"===s,x={params:Object.assign(Object.assign({},d),g)},w=u?[]:sE(e,t,this.ast.animation,r,o,p,_,x,c,h);let E=0;if(w.forEach(M=>{E=Math.max(M.duration+M.delay,E)}),h.length)return VB(t,this._triggerName,i,s,b,p,_,[],[],y,v,E,h);w.forEach(M=>{const S=M.element,F=rs(y,S,{});M.preStyleProps.forEach(I=>F[I]=!0);const U=rs(v,S,{});M.postStyleProps.forEach(I=>U[I]=!0),S!==t&&m.add(S)});const A=p_(m.values());return VB(t,this._triggerName,i,s,b,p,_,w,A,y,v,E)}}class Zde{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},s=Eu(this.defaultParams);return Object.keys(e).forEach(r=>{const o=e[r];null!=o&&(s[r]=o)}),this.styles.styles.forEach(r=>{if("string"!=typeof r){const o=r;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=f_(l,s,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class Qde{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new Zde(s.style,s.options&&s.options.params||{},i)}),zB(this.states,"true","1"),zB(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new HB(e,s,this.states))}),this.fallbackTransition=function efe(n,e,t){return new HB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(o=>o.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function zB(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const tfe=new x_;class nfe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=tE(this._driver,t,i,[]);if(i.length)throw function rde(n){return new Ae(3503,Et)}();this._animations[e]=r}_buildPlayer(e,t,i){const s=e.element,r=bB(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(s,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const s=[],r=this._animations[e];let o;const a=new Map;if(r?(o=sE(this._driver,t,r,Kw,c_,{},{},i,tfe,s),o.forEach(u=>{const h=rs(a,u.element,{});u.postStyleProps.forEach(d=>h[d]=null)})):(s.push(function ode(){return new Ae(3300,Et)}()),o=[]),s.length)throw function ade(n){return new Ae(3504,Et)}();a.forEach((u,h)=>{Object.keys(u).forEach(d=>{u[d]=this._driver.computeStyle(h,d,mo)})});const c=ta(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,{},h)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function lde(n){return new Ae(3301,Et)}();return t}listen(e,t,i,s){const r=$w(t,"","","");return Ww(this._getPlayer(e),i,r,s),()=>{}}command(e,t,i,s){if("register"==i)return void this.register(e,s[0]);if("create"==i)return void this.create(e,t,s[0]||{});const r=this._getPlayer(e);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const GB="ng-animate-queued",lE="ng-animate-disabled",afe=[],WB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lfe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Cs="__ng_removed";class cE{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function dfe(n){return null!=n?n:null}(i?e.value:e),i){const r=Eu(e);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(s=>{null==i[s]&&(i[s]=t[s])})}}}const nf="void",uE=new cE(nf);class cfe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ds(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.hasOwnProperty(t))throw function cde(n,e){return new Ae(3302,Et)}();if(null==i||0==i.length)throw function ude(n){return new Ae(3303,Et)}();if(!function ffe(n){return"start"==n||"done"==n}(i))throw function hde(n,e){return new Ae(3400,Et)}();const r=rs(this._elementListeners,e,[]),o={name:t,phase:i,callback:s};r.push(o);const a=rs(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Ds(e,u_),Ds(e,u_+"-"+t),a[t]=uE),()=>{this._engine.afterFlush(()=>{const l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function dde(n){return new Ae(3401,Et)}();return t}trigger(e,t,i,s=!0){const r=this._getTrigger(t),o=new hE(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ds(e,u_),Ds(e,u_+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new cE(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=uE),c.value!==nf&&l.value===c.value){if(!function gfe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(!e.hasOwnProperty(r)||n[r]!==e[r])return!1}return!0}(l.params,c.params)){const g=[],_=r.matchStyles(l.value,l.params,g),m=r.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{gl(e,_),Pr(e,m)})}return}const d=rs(this._engine.playersByElement,e,[]);d.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=r.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!s)return;f=r.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Ds(e,GB),o.onStart(()=>{Su(e,GB)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const _=this._engine.playersByElement.get(e);if(_){let m=_.indexOf(o);m>=0&&_.splice(m,1)}}),this.players.push(o),d.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,h_,!0);i.forEach(s=>{if(s[Cs])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){const r=this._engine.statesByElement.get(e),o=new Map;if(r){const a=[];if(Object.keys(r).forEach(l=>{if(o.set(l,r[l].value),this._triggers[l]){const c=this.trigger(e,l,nf,s);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&ta(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const s=new Set;t.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||uE,u=new cE(nf),h=new hE(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(e):[];if(r&&r.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{const r=e[Cs];(!r||r===WB)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ds(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=$w(r,i.triggerName,i.fromState.value,i.toState.value);l._data=e,Ww(i.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{const r=i.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class ufe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,r)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new cfe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,s=this.namespacesByHostElement,r=i.length-1;if(r>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const l=s.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=r;a>=0;a--)if(this.driver.containsElement(i[a].hostElement,t)){i.splice(a+1,0,e),o=!0;break}o||i.unshift(e)}else i.push(e);return s.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const s=Object.keys(i);for(let r=0;r<s.length;r++){const o=i[s[r]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,s){if(E_(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!E_(t))return;const r=t[Cs];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ds(e,lE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Su(e,lE))}removeNode(e,t,i,s){if(E_(t)){const r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,i,s,r){this.collectedLeaveElements.push(t),t[Cs]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,i,s,r){return E_(t)?this._fetchNamespace(e).listen(t,i,s,r):()=>{}}_buildInstruction(e,t,i,s,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,h_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Zw,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ta(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[Cs];if(i&&i.setForRemoval){if(e[Cs]=WB,i.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(i.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(lE))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ds(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ta(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw function fde(n){return new Ae(3402,Et)}()}_flushAnimations(e,t){const i=new x_,s=[],r=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(L=>{u.add(L);const k=this.driver.query(L,".ng-animate-queued",!0);for(let H=0;H<k.length;H++)u.add(k[H])});const h=this.bodyNode,d=Array.from(this.statesByElement.keys()),f=qB(d,this.collectedEnterElements),p=new Map;let g=0;f.forEach((L,k)=>{const H=Kw+g++;p.set(k,H),L.forEach(j=>Ds(j,H))});const _=[],m=new Set,y=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){const k=this.collectedLeaveElements[L],H=k[Cs];H&&H.setForRemoval&&(_.push(k),m.add(k),H.hasAnimation?this.driver.query(k,".ng-star-inserted",!0).forEach(j=>m.add(j)):y.add(k))}const v=new Map,b=qB(d,Array.from(m));b.forEach((L,k)=>{const H=c_+g++;v.set(k,H),L.forEach(j=>Ds(j,H))}),e.push(()=>{f.forEach((L,k)=>{const H=p.get(k);L.forEach(j=>Su(j,H))}),b.forEach((L,k)=>{const H=v.get(k);L.forEach(j=>Su(j,H))}),_.forEach(L=>{this.processLeaveNode(L)})});const x=[],w=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(t).forEach(H=>{const j=H.player,Y=H.element;if(x.push(j),this.collectedEnterElements.length){const P=Y[Cs];if(P&&P.setForMove){if(P.previousTriggersValues&&P.previousTriggersValues.has(H.triggerName)){const Ce=P.previousTriggersValues.get(H.triggerName),De=this.statesByElement.get(H.element);De&&De[H.triggerName]&&(De[H.triggerName].value=Ce)}return void j.destroy()}}const fe=!h||!this.driver.containsElement(h,Y),le=v.get(Y),G=p.get(Y),$=this._buildInstruction(H,i,G,le,fe);if($.errors&&$.errors.length)return void w.push($);if(fe)return j.onStart(()=>gl(Y,$.fromStyles)),j.onDestroy(()=>Pr(Y,$.toStyles)),void s.push(j);if(H.isFallbackTransition)return j.onStart(()=>gl(Y,$.fromStyles)),j.onDestroy(()=>Pr(Y,$.toStyles)),void s.push(j);const ce=[];$.timelines.forEach(P=>{P.stretchStartingKeyframe=!0,this.disabledNodes.has(P.element)||ce.push(P)}),$.timelines=ce,i.append(Y,$.timelines),o.push({instruction:$,player:j,element:Y}),$.queriedElements.forEach(P=>rs(a,P,[]).push(j)),$.preStyleProps.forEach((P,Ce)=>{const De=Object.keys(P);if(De.length){let se=l.get(Ce);se||l.set(Ce,se=new Set),De.forEach(Me=>se.add(Me))}}),$.postStyleProps.forEach((P,Ce)=>{const De=Object.keys(P);let se=c.get(Ce);se||c.set(Ce,se=new Set),De.forEach(Me=>se.add(Me))})});if(w.length){const L=[];w.forEach(k=>{L.push(function pde(n,e){return new Ae(3505,Et)}())}),x.forEach(k=>k.destroy()),this.reportError(L)}const E=new Map,A=new Map;o.forEach(L=>{const k=L.element;i.has(k)&&(A.set(k,k),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,E))}),s.forEach(L=>{const k=L.element;this._getPreviousPlayers(k,!1,L.namespaceId,L.triggerName,null).forEach(j=>{rs(E,k,[]).push(j),j.destroy()})});const M=_.filter(L=>YB(L,l,c)),S=new Map;$B(S,this.driver,y,c,mo).forEach(L=>{YB(L,l,c)&&M.push(L)});const U=new Map;f.forEach((L,k)=>{$B(U,this.driver,new Set(L),l,"!")}),M.forEach(L=>{const k=S.get(L),H=U.get(L);S.set(L,Object.assign(Object.assign({},k),H))});const I=[],B=[],O={};o.forEach(L=>{const{element:k,player:H,instruction:j}=L;if(i.has(k)){if(u.has(k))return H.onDestroy(()=>Pr(k,j.toStyles)),H.disabled=!0,H.overrideTotalTime(j.totalTime),void s.push(H);let Y=O;if(A.size>1){let le=k;const G=[];for(;le=le.parentNode;){const $=A.get(le);if($){Y=$;break}G.push(le)}G.forEach($=>A.set($,Y))}const fe=this._buildAnimation(H.namespaceId,j,E,r,U,S);if(H.setRealPlayer(fe),Y===O)I.push(H);else{const le=this.playersByElement.get(Y);le&&le.length&&(H.parentPlayer=ta(le)),s.push(H)}}else gl(k,j.fromStyles),H.onDestroy(()=>Pr(k,j.toStyles)),B.push(H),u.has(k)&&s.push(H)}),B.forEach(L=>{const k=r.get(L.element);if(k&&k.length){const H=ta(k);L.setRealPlayer(H)}}),s.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<_.length;L++){const k=_[L],H=k[Cs];if(Su(k,c_),H&&H.hasAnimation)continue;let j=[];if(a.size){let fe=a.get(k);fe&&fe.length&&j.push(...fe);let le=this.driver.query(k,Zw,!0);for(let G=0;G<le.length;G++){let $=a.get(le[G]);$&&$.length&&j.push(...$)}}const Y=j.filter(fe=>!fe.destroyed);Y.length?pfe(this,k,Y):this.processLeaveNode(k)}return _.length=0,I.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();const k=this.players.indexOf(L);this.players.splice(k,1)}),L.play()}),I}elementContainsData(e,t){let i=!1;const s=t[Cs];return s&&s.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,r){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!r||r==nf;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||o.push(c)})}}return(i||s)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const r=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==r,h=rs(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),h.push(f)})}gl(r,t.fromStyles)}_buildAnimation(e,t,i,s,r,o){const a=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,d=t.timelines.map(p=>{const g=p.element;u.add(g);const _=g[Cs];if(_&&_.removedBeforeQueried)return new ef(p.duration,p.delay);const m=g!==l,y=function mfe(n){const e=[];return XB(n,e),e}((i.get(g)||afe).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===g),v=r.get(g),b=o.get(g),x=bB(0,this._normalizer,0,p.keyframes,v,b),w=this._buildPlayer(p,x,y);if(p.subTimeline&&s&&h.add(g),m){const E=new hE(e,a,g);E.setRealPlayer(w),c.push(E)}return w});c.forEach(p=>{rs(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function hfe(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const s=i.indexOf(t);i.splice(s,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const s=i.indexOf(t);i.splice(s,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Ds(p,RB));const f=ta(d);return f.onDestroy(()=>{u.forEach(p=>Su(p,RB)),Pr(l,t.toStyles)}),h.forEach(p=>{rs(s,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ef(e.duration,e.delay)}}class hE{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new ef,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>Ww(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){rs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function E_(n){return n&&1===n.nodeType}function jB(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function $B(n,e,t,i,s){const r=[];t.forEach(l=>r.push(jB(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(h=>{const d=u[h]=e.computeStyle(c,h,s);(!d||0==d.length)&&(c[Cs]=lfe,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>jB(l,r[a++])),o}function qB(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const s=new Set(e),r=new Map;function o(a){if(!a)return 1;let l=r.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:s.has(c)?1:o(c),r.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Ds(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Su(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function pfe(n,e,t){ta(t).onDone(()=>n.processLeaveNode(e))}function XB(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof yB?XB(i.players,e):e.push(i)}}function YB(n,e,t){const i=t.get(n);if(!i)return!1;let s=e.get(n);return s?i.forEach(r=>s.add(r)):e.set(n,i),t.delete(n),!0}class S_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,r)=>{},this._transitionEngine=new ufe(e,t,i),this._timelineEngine=new nfe(e,t,i),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(e,t,i,s,r){const o=e+"-"+s;let a=this._triggerCache[o];if(!a){const l=[],u=tE(this._driver,r,l,[]);if(l.length)throw function ide(n,e){return new Ae(3404,Et)}();a=function Jde(n,e,t){return new Qde(n,e,t)}(s,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i,s){this._transitionEngine.removeNode(e,t,s||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if("@"==i.charAt(0)){const[r,o]=xB(i);this._timelineEngine.command(r,t,o,s)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,r){if("@"==i.charAt(0)){const[o,a]=xB(i);return this._timelineEngine.listen(o,t,a,r)}return this._transitionEngine.listen(e,t,i,s,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let yfe=(()=>{class n{constructor(t,i,s){this._element=t,this._startStyles=i,this._endStyles=s,this._state=0;let r=n.initialStylesByElement.get(t);r||n.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Pr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pr(this._element,this._initialStyles),this._endStyles&&(Pr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(gl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(gl(this._element,this._endStyles),this._endStyles=null),Pr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function dE(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const s=t[i];vfe(s)&&(e=e||{},e[s]=n[s])}return e}function vfe(n){return"display"===n||"position"===n}class KB{constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:NB(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class bfe{validateStyleProperty(e){return SB(e)}matchesElement(e,t){return!1}containsElement(e,t){return AB(e,t)}getParentElement(e){return Xw(e)}query(e,t,i){return TB(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,s,r,o=[]){const l={duration:i,delay:s,fill:0==s?"both":"forwards"};r&&(l.easing=r);const c={},u=o.filter(d=>d instanceof KB);(function Ede(n,e){return 0===n||0===e})(i,s)&&u.forEach(d=>{let f=d.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function Sde(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let r=e[0],o=[];if(i.forEach(a=>{r.hasOwnProperty(a)||o.push(a),r[a]=t[a]}),o.length)for(var s=1;s<e.length;s++){let a=e[s];o.forEach(function(l){a[l]=NB(n,l)})}}return e}(e,t=t.map(d=>na(d,!1)),c);const h=function _fe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=dE(e[0]),e.length>1&&(i=dE(e[e.length-1]))):e&&(t=dE(e)),t||i?new yfe(n,t,i):null}(e,t);return new KB(e,t,l,h)}}let xfe=(()=>{class n extends pB{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Ps.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?mB(t):t;return ZB(this._renderer,null,i,"register",[s]),new Mfe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(pe(ga),pe(Jn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();class Mfe extends class Nhe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new wfe(this._id,e,t||{},this._renderer)}}class wfe{constructor(e,t,i,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ZB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function ZB(n,e,t,i,s){return n.setProperty(e,`@@${t}:${i}`,s)}const JB="@.disabled";let Efe=(()=>{class n{constructor(t,i,s){this.delegate=t,this.engine=i,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(r,o)=>{const a=null==o?void 0:o.parentNode(r);a&&o.removeChild(a,r)}}createRenderer(t,i){const r=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(r);return u||(u=new QB("",r,this.engine),this._rendererCache.set(r,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new Sfe(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,s){t>=0&&t<this._microtaskId?this._zone.run(()=>i(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(pe(ga),pe(S_),pe(rn))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();class QB{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==JB?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Sfe extends QB{constructor(e,t,i,s){super(t,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==JB?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const s=function Afe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let r=t.substr(1),o="";return"@"!=r.charAt(0)&&([r,o]=function Tfe(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let Cfe=(()=>{class n extends S_{constructor(t,i,s){super(t.body,i,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(pe(Jn),pe(Yw),pe(oE))},n.\u0275prov=Ie({token:n,factory:n.\u0275fac}),n})();const eU=new nt("AnimationModuleType"),tU=[{provide:pB,useClass:xfe},{provide:oE,useFactory:function Dfe(){return new qde}},{provide:S_,useClass:Cfe},{provide:ga,useFactory:function Rfe(n,e,t){return new Efe(n,e,t)},deps:[Ip,S_,rn]}],nU=[{provide:Yw,useFactory:()=>new bfe},{provide:eU,useValue:"BrowserAnimations"},...tU],Ife=[{provide:Yw,useClass:CB},{provide:eU,useValue:"NoopAnimations"},...tU];let Pfe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Ife:nU}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n}),n.\u0275inj=Zn({providers:nU,imports:[hR]}),n})(),Lfe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ti({type:n,bootstrap:[Ohe]}),n.\u0275inj=Zn({providers:[],imports:[[hR,Lhe,o9,Pfe,$X.forRoot(),o7,She]]}),n})();(function Zj(){b1=!1})(),c$().bootstrapModule(Lfe).catch(n=>console.error(n))}},et=>{et(et.s=590)}]);